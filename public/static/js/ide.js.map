{"version":3,"file":"ide.js","sources":["../../node_modules/regenerator-runtime/runtime.js","../../src/apps/ide/IDE/utils/getSiteURL.js","../../src/apps/ide/IDE/BlobURLGenerator/utils/cleanURL.js","../../src/apps/ide/IDE/BlobURLGenerator/BlobURLGenerator.js","../../src/apps/ide/IDE/BlobURLGenerator/utils/getRegexMatches.js","../../src/apps/ide/IDE/BlobURLGenerator/utils/importURLConverter.js","../../node_modules/codemirror/lib/codemirror.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/modes/htmlmixed/htmlmixed.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/modes/css/css.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/modes/xml/xml.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/modes/javascript/javascript.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/comment/comment.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/display/fullscreen.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/jump-to-line.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/match-highlighter.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/search.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/searchcursor.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/foldcode.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/edit/closebrackets.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/edit/closetag.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/show-hint.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/javascript-hint.js","../../src/apps/ide/IDE/Editor/utils/addFunctionToCodeMirror.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/brace-fold.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/scroll/annotatescrollbar.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/selection/active-line.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/dialog/dialog.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/search/matchesonscrollbar.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/comment-fold.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/foldgutter.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/indent-fold.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/fold/xml-fold.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/anyword-hint.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/xml-hint.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/css-hint.js","../../src/apps/ide/IDE/Editor/vendor/custom/CodeMirrorES6/addons/hint/html-hint.js","../../src/apps/ide/IDE/HTML/HTMLBuilder.js","../../src/apps/ide/IDE/Editor/Editor.js","../../src/apps/ide/IDE/Editor/setupCodeMirror.js","../../src/apps/ide/IDE/utils/classifyURL.js","../../src/apps/ide/IDE/Fetcher/utils/fetchFiles.js","../../src/apps/ide/IDE/File/utils/convertImportsInText.js","../../node_modules/three/src/constants.js","../../src/apps/ide/IDE/File/File.js","../../src/apps/ide/IDE/File/utils/getNameFromURL.js","../../src/apps/ide/IDE/File/utils/getMimetype.js","../../src/apps/ide/IDE/Fetcher/Fetcher.js","../../src/apps/ide/IDE/FileTree/utils/createIcon.js","../../src/apps/ide/IDE/FileTree/vendor/custom/es6tree.js","../../src/apps/ide/IDE/FileTree/buildFileTree.js","../../src/apps/ide/IDE/FileTree/utils/buildDirectories.js","../../src/apps/ide/IDE/FileTree/FileTree.js","../../src/apps/ide/IDE/FileTree/utils/sanitiseFileName.js","../../src/apps/ide/IDE/FileTree/utils/validateFileName.js","../../src/apps/ide/IDE/Preview/Preview.js","../../src/apps/ide/IDE/Preview/utils/uuid.js","../../src/apps/ide/IDE/Controls/Reset.js","../../src/apps/ide/IDE/Controls/Controls.js","../../src/apps/ide/IDE/Panels/vendor/custom/split.js","../../src/apps/ide/IDE/Panels/Panels.js","../../src/apps/ide/IDE/Panels/setupPanels.js","../../src/apps/ide/IDE/Panels/orientationControl.js","../../src/apps/ide/IDE/Panels/createPanelConfig.js","../../node_modules/file-saver/dist/FileSaver.min.js","../../src/apps/ide/IDE/Downloader/vendor/custom/UZIP.js","../../src/apps/ide/IDE/Downloader/vendor/custom/readAs.js","../../src/apps/ide/IDE/Downloader/Downloader.js","../../src/apps/ide/IDE/Downloader/utils/stringToUint8.js","../../src/apps/ide/IDE/Downloader/utils/generateNameFromPageTitle.js","../../src/apps/ide/IDE/IDE.js","../../src/apps/ide/main.js"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function getSiteURL() {\r\n  return window.location.href\r\n    .replace(window.location.pathname, '')\r\n    .replace(window.location.hash, '');\r\n}\r\n\r\nexport { getSiteURL };\r\n","const cleanURL = (url) => {\r\n  return url\r\n    .replace(/(\\.\\.\\/)/g, '')\r\n    .replace(/^(\\.\\/)/, '')\r\n    .replace(/^(\\/)/, '');\r\n}\r\n\r\nexport { cleanURL }","import { getSiteURL } from '../utils/getSiteURL.js';\r\nimport { getRegexMatches } from './utils/getRegexMatches.js';\r\nimport { importURLConverter } from './utils/importURLConverter.js';\r\nimport { cleanURL } from './utils/cleanURL.js';\r\n\r\nclass BlobURLGenerator {\r\n  constructor(files, assetsLocation, entry) {\r\n    this.files = files;\r\n    this.assetsLocation = assetsLocation;\r\n    this.vendorLocation = assetsLocation.replace('assets', 'vendor');\r\n    this.entry = entry;\r\n  }\r\n\r\n  generateSrcURL() {\r\n    if (!this.files[this.entry]) {\r\n      return this.createBlobURL('entry file not found!', 'text/html');\r\n    }\r\n\r\n    return this.generateFileURL(this.files[this.entry]);\r\n  }\r\n\r\n  generateFileURL(file) {\r\n    switch (file.type) {\r\n      case 'html':\r\n        return this.generateHtmlURL(file);\r\n      case 'css':\r\n        return this.generateCssURL(file);\r\n      case 'js':\r\n        return this.generateJsURL(file);\r\n      default:\r\n        return this.createBlobURL(\r\n          `File type \".${file.type} is unknown`,\r\n        );\r\n    }\r\n  }\r\n\r\n  generateHtmlURL(file) {\r\n    const parser = new DOMParser();\r\n    const document = parser.parseFromString(\r\n      file.contents,\r\n      file.mimeType,\r\n    );\r\n\r\n    const styles = document.querySelectorAll(\r\n      'link[rel=\"stylesheet\"]',\r\n    );\r\n\r\n    styles.forEach((style) => {\r\n      const ref = cleanURL(style.getAttribute('href'));\r\n      const cssFile = this.files[ref];\r\n      if (cssFile) style.href = this.generateFileURL(cssFile);\r\n    });\r\n\r\n    const scriptTags = document.querySelectorAll('script');\r\n\r\n    scriptTags.forEach((script) => {\r\n      const src = script.getAttribute('src');\r\n      if (!src) return;\r\n      const ref = cleanURL(src);\r\n      const jsFile = this.files[ref];\r\n      if (jsFile) script.src = this.generateFileURL(jsFile);\r\n    });\r\n\r\n    const serializer = new XMLSerializer();\r\n\r\n    const htmlString = serializer.serializeToString(document);\r\n\r\n    return this.createBlobURL(htmlString, 'text/html');\r\n  }\r\n\r\n  generateCssURL(file) {\r\n    return this.createBlobURL(file.contents, file.mimeType);\r\n  }\r\n\r\n  // TODO handle multiple imports from the same file\r\n  generateJsURL(file) {\r\n    const currentURL = file.url.substring(\r\n      0,\r\n      file.url.lastIndexOf('/') + 1,\r\n    );\r\n\r\n    let text = file.contents;\r\n\r\n    const importURLs = getRegexMatches(\r\n      text,\r\n      /\\b\\s*from\\s*['\"](.*?)['\"]/g,\r\n      1,\r\n    );\r\n\r\n    const convertedURLs = importURLs.map((url) => {\r\n      if (!url.includes('three')) {\r\n        return importURLConverter(url, currentURL);\r\n      }\r\n    });\r\n\r\n    convertedURLs.forEach((url, i) => {\r\n      if (this.files[url]) {\r\n        const blobURL = this.generateFileURL(this.files[url]);\r\n\r\n        text = text.replace(importURLs[i], blobURL);\r\n      }\r\n    });\r\n\r\n    text = this.replaceAssetsURLs(text);\r\n    text = this.replaceVendorURLs(text);\r\n\r\n    const processedURL = this.createBlobURL(text, file.mimeType);\r\n\r\n    return processedURL;\r\n  }\r\n\r\n  replaceVendorURLs(text) {\r\n    let newText = text.replace(\r\n      /from 'three'/gi,\r\n      `from '${getSiteURL()}/static/examples/vendor/three/build/three.module.js'`,\r\n    );\r\n    newText = newText.replace(\r\n      /from 'three/gi,\r\n      `from '${getSiteURL()}/static/examples/vendor/three`,\r\n    );\r\n    return newText;\r\n  }\r\n\r\n  // replace all assets urls with direct url to the server\r\n  // TODO: this function is duplicated in Downloader\r\n  replaceAssetsURLs(text) {\r\n    const serverURL = text.replace(\r\n      /\\/assets\\//g,\r\n      this.assetsLocation,\r\n    );\r\n\r\n    return serverURL;\r\n  }\r\n\r\n  createBlobURL(code, type) {\r\n    const blob = new Blob([code], {\r\n      type,\r\n    });\r\n    return URL.createObjectURL(blob);\r\n  }\r\n}\r\n\r\nexport { BlobURLGenerator };\r\n","function getRegexMatches(string, regex, index = 1) {\r\n  const matches = [];\r\n  let match;\r\n\r\n  while ((match = regex.exec(string))) {\r\n    matches.push(match[index]);\r\n  }\r\n\r\n  return matches;\r\n}\r\n\r\nexport { getRegexMatches };\r\n","// TODO-HIGH this should be done by the File class probably.\r\n// TODO-HIGH not working with unpkg.com imports\r\n// replace urls that start with ./ or ../ with abs url based on current dir\r\n// leave all other urls unchanged\r\nfunction importURLConverter(url, currentURL) {\r\n  if (url.indexOf('./') === 0) return url.replace('./', currentURL);\r\n\r\n  if (url.indexOf('../') === 0) {\r\n    const currentURLParts = currentURL.split('/').filter(String);\r\n\r\n    while (url.indexOf('../') === 0) {\r\n      if (currentURLParts.length === 0) {\r\n        console.error(\r\n          `Could not resolve import ${url} relative to ${currentURL}`,\r\n        );\r\n        return '';\r\n      }\r\n      url = url.replace('../', '');\r\n\r\n      currentURLParts.pop();\r\n    }\r\n\r\n    return currentURLParts.length\r\n      ? currentURLParts.join('/') + '/' + url\r\n      : url;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nexport { importURLConverter };\r\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = document.activeElement;\n    } catch(e) {\n      activeElement = document.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n  // Add a span to a line.\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    for (var i = 0; i < lineView.rest.length; i++)\n      { if (lineView.rest[i] == line)\n        { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n      { if (lineNo(lineView.rest[i$1]) > lineN)\n        { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) }\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft\n  }\n  function pageScrollY() {\n    if (chrome && android) { return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) }\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n    if (lineObj.widgets) { for (var i = 0; i < lineObj.widgets.length; ++i) { if (lineObj.widgets[i].above)\n      { height += widgetHeight(lineObj.widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (collapsed || cm.options.showCursorWhenSelecting)\n        { drawSelectionCursor(cm, range.head, curFragment); }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () { return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\"; },\n        cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) { cm.display.input.focus(); onFocus(cm); }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      onBlur(cm);\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.pointerEvents = \"none\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId           // Unique ID\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt();\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = window.getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(), range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = startGen || 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm)\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null));\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history.maxGeneration);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\", \"Alt-B\": \"goWordLeft\", \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\", \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\", \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"char\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt();\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    delayBlurEvent(cm);\n    setTimeout(function () { return display.input.focus(); }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display, doc = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200c\\u200e\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(bind(onFocus, this), 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted)\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput)\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    disableBrowserMagic(te);\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){window.focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt() },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = document.activeElement == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || document.activeElement != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n    if (this.selectionInEditor())\n      { this.pollSelection(); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) { return }\n    var cm = this.cm;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = window.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { window.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, …*/) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.55.0\";\n\n  return CodeMirror;\n\n})));\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addHTMLMixedMode(CodeMirror) {\n\n  const defaultTags = {\n    script: [\n      ['lang', /(javascript|babel)/i, 'javascript'],\n      ['type', /^(?:text|application)\\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, 'javascript'],\n      ['type', /./, 'text/plain'],\n      [null, null, 'javascript'],\n    ],\n    style: [\n      ['lang', /^css$/i, 'css'],\n      ['type', /^(text\\/)?(x-)?(stylesheet|css)$/i, 'css'],\n      ['type', /./, 'text/plain'],\n      [null, null, 'css'],\n    ],\n  };\n\n  function maybeBackup(stream, pat, style) {\n    const cur = stream.current();\n    const close = cur.search(pat);\n    if (close > -1) {\n      stream.backUp(cur.length - close);\n    } else if (cur.match(/<\\/?$/)) {\n      stream.backUp(cur.length);\n      if (!stream.match(pat, false)) stream.match(cur);\n    }\n    return style;\n  }\n\n  const attrRegexpCache = {};\n\n  function getAttrRegexp(attr) {\n    const regexp = attrRegexpCache[attr];\n    if (regexp) return regexp;\n    return attrRegexpCache[attr] = new RegExp('\\\\s+' + attr + \"\\\\s*=\\\\s*('|\\\")?([^'\\\"]+)('|\\\")?\\\\s*\");\n  }\n\n  function getAttrValue(text, attr) {\n    const match = text.match(getAttrRegexp(attr));\n    return match ? /^\\s*(.*?)\\s*$/.exec(match[2])[1] : '';\n  }\n\n  function getTagRegexp(tagName, anchored) {\n    return new RegExp((anchored ? '^' : '') + '<\\/\\s*' + tagName + '\\s*>', 'i');\n  }\n\n  function addTags(from, to) {\n    for (const tag in from) {\n      const dest = to[tag] || (to[tag] = []);\n      const source = from[tag];\n      for (let i = source.length - 1; i >= 0; i--) {\n        dest.unshift(source[i]);\n      }\n    }\n  }\n\n  function findMatchingMode(tagInfo, tagText) {\n    for (let i = 0; i < tagInfo.length; i++) {\n      const spec = tagInfo[i];\n      if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];\n    }\n  }\n\n  CodeMirror.defineMode('htmlmixed', (config, parserConfig) => {\n    const htmlMode = CodeMirror.getMode(config, {\n      name: 'xml',\n      htmlMode: true,\n      multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,\n      multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag,\n    });\n\n    const tags = {};\n    const configTags = parserConfig && parserConfig.tags;\n    const configScript = parserConfig && parserConfig.scriptTypes;\n    addTags(defaultTags, tags);\n    if (configTags) addTags(configTags, tags);\n    if (configScript) {\n      for (let i = configScript.length - 1; i >= 0; i--) {\n        tags.script.unshift(['type', configScript[i].matches, configScript[i].mode]);\n      }\n    }\n\n    function html(stream, state) {\n      const style = htmlMode.token(stream, state.htmlState);\n      const tag = /\\btag\\b/.test(style);\n      let tagName;\n      if (tag && !/[<>\\s\\/]/.test(stream.current()) &&\n        (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) &&\n        tags.hasOwnProperty(tagName)) {\n        state.inTag = tagName + ' ';\n      } else if (state.inTag && tag && />$/.test(stream.current())) {\n        const inTag = /^([\\S]+) (.*)/.exec(state.inTag);\n        state.inTag = null;\n        const modeSpec = stream.current() == '>' && findMatchingMode(tags[inTag[1]], inTag[2]);\n        const mode = CodeMirror.getMode(config, modeSpec);\n        const endTagA = getTagRegexp(inTag[1], true);\n        const endTag = getTagRegexp(inTag[1], false);\n        state.token = function (stream, state) {\n          if (stream.match(endTagA, false)) {\n            state.token = html;\n            state.localState = state.localMode = null;\n            return null;\n          }\n          return maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));\n        };\n        state.localMode = mode;\n        state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, '', ''));\n      } else if (state.inTag) {\n        state.inTag += stream.current();\n        if (stream.eol()) state.inTag += ' ';\n      }\n      return style;\n    }\n\n    return {\n      startState() {\n        const state = CodeMirror.startState(htmlMode);\n        return {\n          token: html,\n          inTag: null,\n          localMode: null,\n          localState: null,\n          htmlState: state,\n        };\n      },\n\n      copyState(state) {\n        let local;\n        if (state.localState) {\n          local = CodeMirror.copyState(state.localMode, state.localState);\n        }\n        return {\n          token: state.token,\n          inTag: state.inTag,\n          localMode: state.localMode,\n          localState: local,\n          htmlState: CodeMirror.copyState(htmlMode, state.htmlState),\n        };\n      },\n\n      token(stream, state) {\n        return state.token(stream, state);\n      },\n\n      indent(state, textAfter, line) {\n        if (!state.localMode || /^\\s*<\\//.test(textAfter)) {\n          return htmlMode.indent(state.htmlState, textAfter, line);\n        }\n        if (state.localMode.indent) {\n          return state.localMode.indent(state.localState, textAfter, line);\n        }\n        return CodeMirror.Pass;\n      },\n\n      innerMode(state) {\n        return {\n          state: state.localState || state.htmlState,\n          mode: state.localMode || htmlMode\n        };\n      },\n    };\n  }, 'xml', 'javascript', 'css');\n\n  CodeMirror.defineMIME('text/html', 'htmlmixed');\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addCSSMode(CodeMirror) {\n\n  CodeMirror.defineMode('css', (config, parserConfig) => {\n    const inline = parserConfig.inline;\n    if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode('text/css');\n\n    const indentUnit = config.indentUnit;\n    const tokenHooks = parserConfig.tokenHooks;\n    const documentTypes = parserConfig.documentTypes || {};\n    const mediaTypes = parserConfig.mediaTypes || {};\n    const mediaFeatures = parserConfig.mediaFeatures || {};\n    const mediaValueKeywords = parserConfig.mediaValueKeywords || {};\n    const propertyKeywords = parserConfig.propertyKeywords || {};\n    const nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {};\n    const fontProperties = parserConfig.fontProperties || {};\n    const counterDescriptors = parserConfig.counterDescriptors || {};\n    const colorKeywords = parserConfig.colorKeywords || {};\n    const valueKeywords = parserConfig.valueKeywords || {};\n    const allowNested = parserConfig.allowNested;\n    const lineComment = parserConfig.lineComment;\n    const supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n    let type;\n    let override;\n\n    function ret(style, tp) {\n      type = tp;\n      return style;\n    }\n\n    // Tokenizers\n\n    function tokenBase(stream, state) {\n      var ch = stream.next();\n      if (tokenHooks[ch]) {\n        var result = tokenHooks[ch](stream, state);\n        if (result !== false) return result;\n      }\n      if (ch == \"@\") {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        return ret(\"def\", stream.current());\n      }\n      if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n        return ret(null, \"compare\");\n      }\n      if (ch == \"\\\"\" || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      }\n      if (ch == \"#\") {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        return ret(\"atom\", \"hash\");\n      }\n      if (ch == \"!\") {\n        stream.match(/^\\s*\\w*/);\n        return ret(\"keyword\", \"important\");\n      } if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } if (ch === \"-\") {\n        if (/[\\d.]/.test(stream.peek())) {\n          stream.eatWhile(/[\\w.%]/);\n          return ret(\"number\", \"unit\");\n        }\n        if (stream.match(/^-[\\w\\\\\\-]*/)) {\n          stream.eatWhile(/[\\w\\\\\\-]/);\n          if (stream.match(/^\\s*:/, false))\n            return ret(\"variable-2\", \"variable-definition\");\n          return ret(\"variable-2\", \"variable\");\n        }\n        if (stream.match(/^\\w+-/)) {\n          return ret(\"meta\", \"meta\");\n        }\n      } else if (/[,+>*\\/]/.test(ch)) {\n        return ret(null, \"select-op\");\n      } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n        return ret(\"qualifier\", \"qualifier\");\n      } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n        return ret(null, ch);\n      } else if (stream.match(/[\\w-.]+(?=\\()/)) {\n        if (/^(url(-prefix)?|domain|regexp)$/.test(stream.current()\n          .toLowerCase())) {\n          state.tokenize = tokenParenthesized;\n        }\n        return ret(\"variable callee\", \"variable\");\n      } else if (/[\\w\\\\\\-]/.test(ch)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        return ret(\"property\", \"word\");\n      } else {\n        return ret(null, null);\n      }\n    }\n\n    function tokenString(quote) {\n      return function (stream, state) {\n        let escaped = false;\n        let ch;\n        while ((ch = stream.next()) != null) {\n          if (ch == quote && !escaped) {\n            if (quote == ')') stream.backUp(1);\n            break;\n          }\n          escaped = !escaped && ch == '\\\\';\n        }\n        if (ch == quote || !escaped && quote != ')') state.tokenize = null;\n        return ret('string', 'string');\n      };\n    }\n\n    function tokenParenthesized(stream, state) {\n      stream.next(); // Must be '('\n      if (!stream.match(/\\s*[\\\"\\')]/, false)) {\n        state.tokenize = tokenString(')');\n      } else {\n        state.tokenize = null;\n      }\n      return ret(null, '(');\n    }\n\n    // Context management\n\n    function Context(type, indent, prev) {\n      this.type = type;\n      this.indent = indent;\n      this.prev = prev;\n    }\n\n    function pushContext(state, stream, type, indent) {\n      state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state\n        .context);\n      return type;\n    }\n\n    function popContext(state) {\n      if (state.context.prev) {\n        state.context = state.context.prev;\n      }\n      return state.context.type;\n    }\n\n    function pass(type, stream, state) {\n      return states[state.context.type](type, stream, state);\n    }\n\n    function popAndPass(type, stream, state, n) {\n      for (let i = n || 1; i > 0; i--) {\n        state.context = state.context.prev;\n      }\n      return pass(type, stream, state);\n    }\n\n    // Parser\n\n    function wordAsValue(stream) {\n      const word = stream.current()\n        .toLowerCase();\n      if (valueKeywords.hasOwnProperty(word)) {\n        override = 'atom';\n      } else if (colorKeywords.hasOwnProperty(word)) {\n        override = 'keyword';\n      } else {\n        override = 'variable';\n      }\n    }\n\n    var states = {};\n\n    states.top = function (type, stream, state) {\n      if (type == \"{\") {\n        return pushContext(state, stream, \"block\");\n      }\n      if (type == \"}\" && state.context.prev) {\n        return popContext(state);\n      }\n      if (supportsAtComponent && /@component/i.test(type)) {\n        return pushContext(state, stream, \"atComponentBlock\");\n      }\n      if (/^@(-moz-)?document$/i.test(type)) {\n        return pushContext(state, stream, \"documentTypes\");\n      }\n      if (/^@(media|supports|(-moz-)?document|import)$/i.test(type)) {\n        return pushContext(state, stream, \"atBlock\");\n      }\n      if (/^@(font-face|counter-style)/i.test(type)) {\n        state.stateArg = type;\n        return \"restricted_atBlock_before\";\n      }\n      if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type)) {\n        return \"keyframes\";\n      } if (type && type.charAt(0) == \"@\") {\n        return pushContext(state, stream, \"at\");\n      } if (type == \"hash\") {\n        override = \"builtin\";\n      } else if (type == \"word\") {\n        override = \"tag\";\n      } else if (type == \"variable-definition\") {\n        return \"maybeprop\";\n      } else if (type == \"interpolation\") {\n        return pushContext(state, stream, \"interpolation\");\n      } else if (type == \":\") {\n        return \"pseudo\";\n      } else if (allowNested && type == \"(\") {\n        return pushContext(state, stream, \"parens\");\n      }\n      return state.context.type;\n    };\n\n    states.block = function (type, stream, state) {\n      if (type == 'word') {\n        const word = stream.current()\n          .toLowerCase();\n        if (propertyKeywords.hasOwnProperty(word)) {\n          override = 'property';\n          return 'maybeprop';\n        }\n        if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n          override = 'string-2';\n          return 'maybeprop';\n        }\n        if (allowNested) {\n          override = stream.match(/^\\s*:(?:\\s|$)/, false) ? 'property' : 'tag';\n          return 'block';\n        }\n        override += ' error';\n        return 'maybeprop';\n\n      }\n      if (type == 'meta') {\n        return 'block';\n      }\n      if (!allowNested && (type == 'hash' || type == 'qualifier')) {\n        override = 'error';\n        return 'block';\n      }\n      return states.top(type, stream, state);\n\n    };\n\n    states.maybeprop = function (type, stream, state) {\n      if (type == ':') return pushContext(state, stream, 'prop');\n      return pass(type, stream, state);\n    };\n\n    states.prop = function (type, stream, state) {\n      if (type == ';') return popContext(state);\n      if (type == '{' && allowNested) return pushContext(state, stream, 'propBlock');\n      if (type == '}' || type == '{') return popAndPass(type, stream, state);\n      if (type == '(') return pushContext(state, stream, 'parens');\n\n      if (type == 'hash' && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n        override += ' error';\n      } else if (type == 'word') {\n        wordAsValue(stream);\n      } else if (type == 'interpolation') {\n        return pushContext(state, stream, 'interpolation');\n      }\n      return 'prop';\n    };\n\n    states.propBlock = function (type, _stream, state) {\n      if (type == '}') return popContext(state);\n      if (type == 'word') {\n        override = 'property';\n        return 'maybeprop';\n      }\n      return state.context.type;\n    };\n\n    states.parens = function (type, stream, state) {\n      if (type == '{' || type == '}') return popAndPass(type, stream, state);\n      if (type == ')') return popContext(state);\n      if (type == '(') return pushContext(state, stream, 'parens');\n      if (type == 'interpolation') return pushContext(state, stream, 'interpolation');\n      if (type == 'word') wordAsValue(stream);\n      return 'parens';\n    };\n\n    states.pseudo = function (type, stream, state) {\n      if (type == 'meta') return 'pseudo';\n\n      if (type == 'word') {\n        override = 'variable-3';\n        return state.context.type;\n      }\n      return pass(type, stream, state);\n    };\n\n    states.documentTypes = function (type, stream, state) {\n      if (type == 'word' && documentTypes.hasOwnProperty(stream.current())) {\n        override = 'tag';\n        return state.context.type;\n      }\n      return states.atBlock(type, stream, state);\n\n    };\n\n    states.atBlock = function (type, stream, state) {\n      if (type == '(') return pushContext(state, stream, 'atBlock_parens');\n      if (type == '}' || type == ';') return popAndPass(type, stream, state);\n      if (type == '{') {\n        return popContext(state) && pushContext(state, stream, allowNested ? 'block'\n          : 'top');\n      }\n\n      if (type == 'interpolation') return pushContext(state, stream, 'interpolation');\n\n      if (type == 'word') {\n        const word = stream.current()\n          .toLowerCase();\n        if (word == 'only' || word == 'not' || word == 'and' || word == 'or') {\n          override = 'keyword';\n        } else if (mediaTypes.hasOwnProperty(word)) {\n          override = 'attribute';\n        } else if (mediaFeatures.hasOwnProperty(word)) {\n          override = 'property';\n        } else if (mediaValueKeywords.hasOwnProperty(word)) {\n          override = 'keyword';\n        } else if (propertyKeywords.hasOwnProperty(word)) {\n          override = 'property';\n        } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n          override = 'string-2';\n        } else if (valueKeywords.hasOwnProperty(word)) {\n          override = 'atom';\n        } else if (colorKeywords.hasOwnProperty(word)) {\n          override = 'keyword';\n        } else {\n          override = 'error';\n        }\n      }\n      return state.context.type;\n    };\n\n    states.atComponentBlock = function (type, stream, state) {\n      if (type == '}') {\n        return popAndPass(type, stream, state);\n      }\n      if (type == '{') {\n        return popContext(state) && pushContext(state, stream, allowNested ? 'block' : 'top', false);\n      }\n      if (type == 'word') {\n        override = 'error';\n      }\n      return state.context.type;\n    };\n\n    states.atBlock_parens = function (type, stream, state) {\n      if (type == ')') return popContext(state);\n      if (type == '{' || type == '}') return popAndPass(type, stream, state, 2);\n      return states.atBlock(type, stream, state);\n    };\n\n    states.restricted_atBlock_before = function (type, stream, state) {\n      if (type == '{') {\n        return pushContext(state, stream, 'restricted_atBlock');\n      }\n      if (type == 'word' && state.stateArg == '@counter-style') {\n        override = 'variable';\n        return 'restricted_atBlock_before';\n      }\n      return pass(type, stream, state);\n    };\n\n    states.restricted_atBlock = function (type, stream, state) {\n      if (type == '}') {\n        state.stateArg = null;\n        return popContext(state);\n      }\n      if (type == 'word') {\n        if ((state.stateArg == '@font-face' && !fontProperties.hasOwnProperty(stream.current()\n          .toLowerCase()))\n          || (state.stateArg == '@counter-style' && !counterDescriptors.hasOwnProperty(stream.current()\n            .toLowerCase()))) {\n          override = 'error';\n        } else {\n          override = 'property';\n        }\n        return 'maybeprop';\n      }\n      return 'restricted_atBlock';\n    };\n\n    states.keyframes = function (type, stream, state) {\n      if (type == 'word') {\n        override = 'variable';\n        return 'keyframes';\n      }\n      if (type == '{') return pushContext(state, stream, 'top');\n      return pass(type, stream, state);\n    };\n\n    states.at = function (type, stream, state) {\n      if (type == ';') return popContext(state);\n      if (type == '{' || type == '}') return popAndPass(type, stream, state);\n      if (type == 'word') override = 'tag';\n      else if (type == 'hash') override = 'builtin';\n      return 'at';\n    };\n\n    states.interpolation = function (type, stream, state) {\n      if (type == '}') return popContext(state);\n      if (type == '{' || type == ';') return popAndPass(type, stream, state);\n      if (type == 'word') override = 'variable';\n      else if (type != 'variable' && type != '(' && type != ')') override = 'error';\n      return 'interpolation';\n    };\n\n    return {\n      startState(base) {\n        return {\n          tokenize: null,\n          state: inline ? 'block' : 'top',\n          stateArg: null,\n          context: new Context(inline ? 'block' : 'top', base || 0, null),\n        };\n      },\n\n      token(stream, state) {\n        if (!state.tokenize && stream.eatSpace()) return null;\n        let style = (state.tokenize || tokenBase)(stream, state);\n        if (style && typeof style === 'object') {\n          type = style[1];\n          style = style[0];\n        }\n        override = style;\n        if (type != 'comment') {\n          state.state = states[state.state](type, stream, state);\n        }\n        return override;\n      },\n\n      indent(state, textAfter) {\n        let cx = state.context;\n        const ch = textAfter && textAfter.charAt(0);\n        let indent = cx.indent;\n        if (cx.type == 'prop' && (ch == '}' || ch == ')')) cx = cx.prev;\n        if (cx.prev) {\n          if (ch == '}' && (cx.type == 'block' || cx.type == 'top'\n            || cx.type == 'interpolation' || cx.type == 'restricted_atBlock')) {\n            // Resume indentation from parent context.\n            cx = cx.prev;\n            indent = cx.indent;\n          } else if (ch == ')' && (cx.type == 'parens' || cx.type == 'atBlock_parens')\n            || ch == '{' && (cx.type == 'at' || cx.type == 'atBlock')) {\n            // Dedent relative to current context.\n            indent = Math.max(0, cx.indent - indentUnit);\n          }\n        }\n        return indent;\n      },\n\n      electricChars: '}',\n      blockCommentStart: '/*',\n      blockCommentEnd: '*/',\n      blockCommentContinue: ' * ',\n      lineComment,\n      fold: 'brace',\n    };\n  });\n\n  function keySet(array) {\n    const keys = {};\n    for (let i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  const documentTypes_ = [\n    'domain', 'regexp', 'url', 'url-prefix',\n  ];\n  const documentTypes = keySet(documentTypes_);\n\n  const mediaTypes_ = [\n    'all', 'aural', 'braille', 'handheld', 'print', 'projection', 'screen',\n    'tty', 'tv', 'embossed',\n  ];\n  const mediaTypes = keySet(mediaTypes_);\n\n  const mediaFeatures_ = [\n    'width', 'min-width', 'max-width', 'height', 'min-height', 'max-height',\n    'device-width', 'min-device-width', 'max-device-width', 'device-height',\n    'min-device-height', 'max-device-height', 'aspect-ratio',\n    'min-aspect-ratio', 'max-aspect-ratio', 'device-aspect-ratio',\n    'min-device-aspect-ratio', 'max-device-aspect-ratio', 'color', 'min-color',\n    'max-color', 'color-index', 'min-color-index', 'max-color-index',\n    'monochrome', 'min-monochrome', 'max-monochrome', 'resolution',\n    'min-resolution', 'max-resolution', 'scan', 'grid', 'orientation',\n    'device-pixel-ratio', 'min-device-pixel-ratio', 'max-device-pixel-ratio',\n    'pointer', 'any-pointer', 'hover', 'any-hover',\n  ];\n  const mediaFeatures = keySet(mediaFeatures_);\n\n  const mediaValueKeywords_ = [\n    'landscape', 'portrait', 'none', 'coarse', 'fine', 'on-demand', 'hover',\n    'interlace', 'progressive',\n  ];\n  const mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  const propertyKeywords_ = [\n    'align-content', 'align-items', 'align-self', 'alignment-adjust',\n    'alignment-baseline', 'anchor-point', 'animation', 'animation-delay',\n    'animation-direction', 'animation-duration', 'animation-fill-mode',\n    'animation-iteration-count', 'animation-name', 'animation-play-state',\n    'animation-timing-function', 'appearance', 'azimuth', 'backface-visibility',\n    'background', 'background-attachment', 'background-blend-mode', 'background-clip',\n    'background-color', 'background-image', 'background-origin', 'background-position',\n    'background-repeat', 'background-size', 'baseline-shift', 'binding',\n    'bleed', 'bookmark-label', 'bookmark-level', 'bookmark-state',\n    'bookmark-target', 'border', 'border-bottom', 'border-bottom-color',\n    'border-bottom-left-radius', 'border-bottom-right-radius',\n    'border-bottom-style', 'border-bottom-width', 'border-collapse',\n    'border-color', 'border-image', 'border-image-outset',\n    'border-image-repeat', 'border-image-slice', 'border-image-source',\n    'border-image-width', 'border-left', 'border-left-color',\n    'border-left-style', 'border-left-width', 'border-radius', 'border-right',\n    'border-right-color', 'border-right-style', 'border-right-width',\n    'border-spacing', 'border-style', 'border-top', 'border-top-color',\n    'border-top-left-radius', 'border-top-right-radius', 'border-top-style',\n    'border-top-width', 'border-width', 'bottom', 'box-decoration-break',\n    'box-shadow', 'box-sizing', 'break-after', 'break-before', 'break-inside',\n    'caption-side', 'caret-color', 'clear', 'clip', 'color', 'color-profile', 'column-count',\n    'column-fill', 'column-gap', 'column-rule', 'column-rule-color',\n    'column-rule-style', 'column-rule-width', 'column-span', 'column-width',\n    'columns', 'content', 'counter-increment', 'counter-reset', 'crop', 'cue',\n    'cue-after', 'cue-before', 'cursor', 'direction', 'display',\n    'dominant-baseline', 'drop-initial-after-adjust',\n    'drop-initial-after-align', 'drop-initial-before-adjust',\n    'drop-initial-before-align', 'drop-initial-size', 'drop-initial-value',\n    'elevation', 'empty-cells', 'fit', 'fit-position', 'flex', 'flex-basis',\n    'flex-direction', 'flex-flow', 'flex-grow', 'flex-shrink', 'flex-wrap',\n    'float', 'float-offset', 'flow-from', 'flow-into', 'font', 'font-feature-settings',\n    'font-family', 'font-kerning', 'font-language-override', 'font-size', 'font-size-adjust',\n    'font-stretch', 'font-style', 'font-synthesis', 'font-variant',\n    'font-variant-alternates', 'font-variant-caps', 'font-variant-east-asian',\n    'font-variant-ligatures', 'font-variant-numeric', 'font-variant-position',\n    'font-weight', 'grid', 'grid-area', 'grid-auto-columns', 'grid-auto-flow',\n    'grid-auto-rows', 'grid-column', 'grid-column-end', 'grid-column-gap',\n    'grid-column-start', 'grid-gap', 'grid-row', 'grid-row-end', 'grid-row-gap',\n    'grid-row-start', 'grid-template', 'grid-template-areas', 'grid-template-columns',\n    'grid-template-rows', 'hanging-punctuation', 'height', 'hyphens',\n    'icon', 'image-orientation', 'image-rendering', 'image-resolution',\n    'inline-box-align', 'justify-content', 'justify-items', 'justify-self', 'left', 'letter-spacing',\n    'line-break', 'line-height', 'line-stacking', 'line-stacking-ruby',\n    'line-stacking-shift', 'line-stacking-strategy', 'list-style',\n    'list-style-image', 'list-style-position', 'list-style-type', 'margin',\n    'margin-bottom', 'margin-left', 'margin-right', 'margin-top',\n    'marks', 'marquee-direction', 'marquee-loop',\n    'marquee-play-count', 'marquee-speed', 'marquee-style', 'max-height',\n    'max-width', 'min-height', 'min-width', 'mix-blend-mode', 'move-to', 'nav-down', 'nav-index',\n    'nav-left', 'nav-right', 'nav-up', 'object-fit', 'object-position',\n    'opacity', 'order', 'orphans', 'outline',\n    'outline-color', 'outline-offset', 'outline-style', 'outline-width',\n    'overflow', 'overflow-style', 'overflow-wrap', 'overflow-x', 'overflow-y',\n    'padding', 'padding-bottom', 'padding-left', 'padding-right', 'padding-top',\n    'page', 'page-break-after', 'page-break-before', 'page-break-inside',\n    'page-policy', 'pause', 'pause-after', 'pause-before', 'perspective',\n    'perspective-origin', 'pitch', 'pitch-range', 'place-content', 'place-items', 'place-self', 'play-during', 'position',\n    'presentation-level', 'punctuation-trim', 'quotes', 'region-break-after',\n    'region-break-before', 'region-break-inside', 'region-fragment',\n    'rendering-intent', 'resize', 'rest', 'rest-after', 'rest-before', 'richness',\n    'right', 'rotation', 'rotation-point', 'ruby-align', 'ruby-overhang',\n    'ruby-position', 'ruby-span', 'shape-image-threshold', 'shape-inside', 'shape-margin',\n    'shape-outside', 'size', 'speak', 'speak-as', 'speak-header',\n    'speak-numeral', 'speak-punctuation', 'speech-rate', 'stress', 'string-set',\n    'tab-size', 'table-layout', 'target', 'target-name', 'target-new',\n    'target-position', 'text-align', 'text-align-last', 'text-decoration',\n    'text-decoration-color', 'text-decoration-line', 'text-decoration-skip',\n    'text-decoration-style', 'text-emphasis', 'text-emphasis-color',\n    'text-emphasis-position', 'text-emphasis-style', 'text-height',\n    'text-indent', 'text-justify', 'text-outline', 'text-overflow', 'text-shadow',\n    'text-size-adjust', 'text-space-collapse', 'text-transform', 'text-underline-position',\n    'text-wrap', 'top', 'transform', 'transform-origin', 'transform-style',\n    'transition', 'transition-delay', 'transition-duration',\n    'transition-property', 'transition-timing-function', 'unicode-bidi',\n    'user-select', 'vertical-align', 'visibility', 'voice-balance', 'voice-duration',\n    'voice-family', 'voice-pitch', 'voice-range', 'voice-rate', 'voice-stress',\n    'voice-volume', 'volume', 'white-space', 'widows', 'width', 'will-change', 'word-break',\n    'word-spacing', 'word-wrap', 'z-index',\n    // SVG-specific\n    'clip-path', 'clip-rule', 'mask', 'enable-background', 'filter', 'flood-color',\n    'flood-opacity', 'lighting-color', 'stop-color', 'stop-opacity', 'pointer-events',\n    'color-interpolation', 'color-interpolation-filters',\n    'color-rendering', 'fill', 'fill-opacity', 'fill-rule', 'image-rendering',\n    'marker', 'marker-end', 'marker-mid', 'marker-start', 'shape-rendering', 'stroke',\n    'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin',\n    'stroke-miterlimit', 'stroke-opacity', 'stroke-width', 'text-rendering',\n    'baseline-shift', 'dominant-baseline', 'glyph-orientation-horizontal',\n    'glyph-orientation-vertical', 'text-anchor', 'writing-mode',\n  ];\n  const propertyKeywords = keySet(propertyKeywords_);\n\n  const nonStandardPropertyKeywords_ = [\n    'scrollbar-arrow-color', 'scrollbar-base-color', 'scrollbar-dark-shadow-color',\n    'scrollbar-face-color', 'scrollbar-highlight-color', 'scrollbar-shadow-color',\n    'scrollbar-3d-light-color', 'scrollbar-track-color', 'shape-inside',\n    'searchfield-cancel-button', 'searchfield-decoration', 'searchfield-results-button',\n    'searchfield-results-decoration', 'zoom',\n  ];\n  const nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  const fontProperties_ = [\n    'font-family', 'src', 'unicode-range', 'font-variant', 'font-feature-settings',\n    'font-stretch', 'font-weight', 'font-style',\n  ];\n  const fontProperties = keySet(fontProperties_);\n\n  const counterDescriptors_ = [\n    'additive-symbols', 'fallback', 'negative', 'pad', 'prefix', 'range',\n    'speak-as', 'suffix', 'symbols', 'system',\n  ];\n  const counterDescriptors = keySet(counterDescriptors_);\n\n  const colorKeywords_ = [\n    'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige',\n    'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n    'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral', 'cornflowerblue',\n    'cornsilk', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod',\n    'darkgray', 'darkgreen', 'darkkhaki', 'darkmagenta', 'darkolivegreen',\n    'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n    'darkslateblue', 'darkslategray', 'darkturquoise', 'darkviolet',\n    'deeppink', 'deepskyblue', 'dimgray', 'dodgerblue', 'firebrick',\n    'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro', 'ghostwhite',\n    'gold', 'goldenrod', 'gray', 'grey', 'green', 'greenyellow', 'honeydew',\n    'hotpink', 'indianred', 'indigo', 'ivory', 'khaki', 'lavender',\n    'lavenderblush', 'lawngreen', 'lemonchiffon', 'lightblue', 'lightcoral',\n    'lightcyan', 'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightpink',\n    'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray',\n    'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta',\n    'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n    'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise',\n    'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose', 'moccasin',\n    'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab', 'orange', 'orangered',\n    'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 'palevioletred',\n    'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue',\n    'purple', 'rebeccapurple', 'red', 'rosybrown', 'royalblue', 'saddlebrown',\n    'salmon', 'sandybrown', 'seagreen', 'seashell', 'sienna', 'silver', 'skyblue',\n    'slateblue', 'slategray', 'snow', 'springgreen', 'steelblue', 'tan',\n    'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white',\n    'whitesmoke', 'yellow', 'yellowgreen',\n  ];\n  const colorKeywords = keySet(colorKeywords_);\n\n  const valueKeywords_ = [\n    'above', 'absolute', 'activeborder', 'additive', 'activecaption', 'afar',\n    'after-white-space', 'ahead', 'alias', 'all', 'all-scroll', 'alphabetic', 'alternate',\n    'always', 'amharic', 'amharic-abegede', 'antialiased', 'appworkspace',\n    'arabic-indic', 'armenian', 'asterisks', 'attr', 'auto', 'auto-flow', 'avoid', 'avoid-column', 'avoid-page',\n    'avoid-region', 'background', 'backwards', 'baseline', 'below', 'bidi-override', 'binary',\n    'bengali', 'blink', 'block', 'block-axis', 'bold', 'bolder', 'border', 'border-box',\n    'both', 'bottom', 'break', 'break-all', 'break-word', 'bullets', 'button', 'button-bevel',\n    'buttonface', 'buttonhighlight', 'buttonshadow', 'buttontext', 'calc', 'cambodian',\n    'capitalize', 'caps-lock-indicator', 'caption', 'captiontext', 'caret',\n    'cell', 'center', 'checkbox', 'circle', 'cjk-decimal', 'cjk-earthly-branch',\n    'cjk-heavenly-stem', 'cjk-ideographic', 'clear', 'clip', 'close-quote',\n    'col-resize', 'collapse', 'color', 'color-burn', 'color-dodge', 'column', 'column-reverse',\n    'compact', 'condensed', 'contain', 'content', 'contents',\n    'content-box', 'context-menu', 'continuous', 'copy', 'counter', 'counters', 'cover', 'crop',\n    'cross', 'crosshair', 'currentcolor', 'cursive', 'cyclic', 'darken', 'dashed', 'decimal',\n    'decimal-leading-zero', 'default', 'default-button', 'dense', 'destination-atop',\n    'destination-in', 'destination-out', 'destination-over', 'devanagari', 'difference',\n    'disc', 'discard', 'disclosure-closed', 'disclosure-open', 'document',\n    'dot-dash', 'dot-dot-dash',\n    'dotted', 'double', 'down', 'e-resize', 'ease', 'ease-in', 'ease-in-out', 'ease-out',\n    'element', 'ellipse', 'ellipsis', 'embed', 'end', 'ethiopic', 'ethiopic-abegede',\n    'ethiopic-abegede-am-et', 'ethiopic-abegede-gez', 'ethiopic-abegede-ti-er',\n    'ethiopic-abegede-ti-et', 'ethiopic-halehame-aa-er',\n    'ethiopic-halehame-aa-et', 'ethiopic-halehame-am-et',\n    'ethiopic-halehame-gez', 'ethiopic-halehame-om-et',\n    'ethiopic-halehame-sid-et', 'ethiopic-halehame-so-et',\n    'ethiopic-halehame-ti-er', 'ethiopic-halehame-ti-et', 'ethiopic-halehame-tig',\n    'ethiopic-numeric', 'ew-resize', 'exclusion', 'expanded', 'extends', 'extra-condensed',\n    'extra-expanded', 'fantasy', 'fast', 'fill', 'fixed', 'flat', 'flex', 'flex-end', 'flex-start', 'footnotes',\n    'forwards', 'from', 'geometricPrecision', 'georgian', 'graytext', 'grid', 'groove',\n    'gujarati', 'gurmukhi', 'hand', 'hangul', 'hangul-consonant', 'hard-light', 'hebrew',\n    'help', 'hidden', 'hide', 'higher', 'highlight', 'highlighttext',\n    'hiragana', 'hiragana-iroha', 'horizontal', 'hsl', 'hsla', 'hue', 'icon', 'ignore',\n    'inactiveborder', 'inactivecaption', 'inactivecaptiontext', 'infinite',\n    'infobackground', 'infotext', 'inherit', 'initial', 'inline', 'inline-axis',\n    'inline-block', 'inline-flex', 'inline-grid', 'inline-table', 'inset', 'inside', 'intrinsic', 'invert',\n    'italic', 'japanese-formal', 'japanese-informal', 'justify', 'kannada',\n    'katakana', 'katakana-iroha', 'keep-all', 'khmer',\n    'korean-hangul-formal', 'korean-hanja-formal', 'korean-hanja-informal',\n    'landscape', 'lao', 'large', 'larger', 'left', 'level', 'lighter', 'lighten',\n    'line-through', 'linear', 'linear-gradient', 'lines', 'list-item', 'listbox', 'listitem',\n    'local', 'logical', 'loud', 'lower', 'lower-alpha', 'lower-armenian',\n    'lower-greek', 'lower-hexadecimal', 'lower-latin', 'lower-norwegian',\n    'lower-roman', 'lowercase', 'ltr', 'luminosity', 'malayalam', 'match', 'matrix', 'matrix3d',\n    'media-controls-background', 'media-current-time-display',\n    'media-fullscreen-button', 'media-mute-button', 'media-play-button',\n    'media-return-to-realtime-button', 'media-rewind-button',\n    'media-seek-back-button', 'media-seek-forward-button', 'media-slider',\n    'media-sliderthumb', 'media-time-remaining-display', 'media-volume-slider',\n    'media-volume-slider-container', 'media-volume-sliderthumb', 'medium',\n    'menu', 'menulist', 'menulist-button', 'menulist-text',\n    'menulist-textfield', 'menutext', 'message-box', 'middle', 'min-intrinsic',\n    'mix', 'mongolian', 'monospace', 'move', 'multiple', 'multiply', 'myanmar', 'n-resize',\n    'narrower', 'ne-resize', 'nesw-resize', 'no-close-quote', 'no-drop',\n    'no-open-quote', 'no-repeat', 'none', 'normal', 'not-allowed', 'nowrap',\n    'ns-resize', 'numbers', 'numeric', 'nw-resize', 'nwse-resize', 'oblique', 'octal', 'opacity', 'open-quote',\n    'optimizeLegibility', 'optimizeSpeed', 'oriya', 'oromo', 'outset',\n    'outside', 'outside-shape', 'overlay', 'overline', 'padding', 'padding-box',\n    'painted', 'page', 'paused', 'persian', 'perspective', 'plus-darker', 'plus-lighter',\n    'pointer', 'polygon', 'portrait', 'pre', 'pre-line', 'pre-wrap', 'preserve-3d',\n    'progress', 'push-button', 'radial-gradient', 'radio', 'read-only',\n    'read-write', 'read-write-plaintext-only', 'rectangle', 'region',\n    'relative', 'repeat', 'repeating-linear-gradient',\n    'repeating-radial-gradient', 'repeat-x', 'repeat-y', 'reset', 'reverse',\n    'rgb', 'rgba', 'ridge', 'right', 'rotate', 'rotate3d', 'rotateX', 'rotateY',\n    'rotateZ', 'round', 'row', 'row-resize', 'row-reverse', 'rtl', 'run-in', 'running',\n    's-resize', 'sans-serif', 'saturation', 'scale', 'scale3d', 'scaleX', 'scaleY', 'scaleZ', 'screen',\n    'scroll', 'scrollbar', 'scroll-position', 'se-resize', 'searchfield',\n    'searchfield-cancel-button', 'searchfield-decoration',\n    'searchfield-results-button', 'searchfield-results-decoration', 'self-start', 'self-end',\n    'semi-condensed', 'semi-expanded', 'separate', 'serif', 'show', 'sidama',\n    'simp-chinese-formal', 'simp-chinese-informal', 'single',\n    'skew', 'skewX', 'skewY', 'skip-white-space', 'slide', 'slider-horizontal',\n    'slider-vertical', 'sliderthumb-horizontal', 'sliderthumb-vertical', 'slow',\n    'small', 'small-caps', 'small-caption', 'smaller', 'soft-light', 'solid', 'somali',\n    'source-atop', 'source-in', 'source-out', 'source-over', 'space', 'space-around', 'space-between', 'space-evenly',\n    'spell-out', 'square',\n    'square-button', 'start', 'static', 'status-bar', 'stretch', 'stroke', 'sub',\n    'subpixel-antialiased', 'super', 'sw-resize', 'symbolic', 'symbols', 'system-ui', 'table',\n    'table-caption', 'table-cell', 'table-column', 'table-column-group',\n    'table-footer-group', 'table-header-group', 'table-row', 'table-row-group',\n    'tamil',\n    'telugu', 'text', 'text-bottom', 'text-top', 'textarea', 'textfield', 'thai',\n    'thick', 'thin', 'threeddarkshadow', 'threedface', 'threedhighlight',\n    'threedlightshadow', 'threedshadow', 'tibetan', 'tigre', 'tigrinya-er',\n    'tigrinya-er-abegede', 'tigrinya-et', 'tigrinya-et-abegede', 'to', 'top',\n    'trad-chinese-formal', 'trad-chinese-informal', 'transform',\n    'translate', 'translate3d', 'translateX', 'translateY', 'translateZ',\n    'transparent', 'ultra-condensed', 'ultra-expanded', 'underline', 'unset', 'up',\n    'upper-alpha', 'upper-armenian', 'upper-greek', 'upper-hexadecimal',\n    'upper-latin', 'upper-norwegian', 'upper-roman', 'uppercase', 'urdu', 'url',\n    'var', 'vertical', 'vertical-text', 'visible', 'visibleFill', 'visiblePainted',\n    'visibleStroke', 'visual', 'w-resize', 'wait', 'wave', 'wider',\n    'window', 'windowframe', 'windowtext', 'words', 'wrap', 'wrap-reverse', 'x-large', 'x-small', 'xor',\n    'xx-large', 'xx-small',\n  ];\n  const valueKeywords = keySet(valueKeywords_);\n\n  const allWords = documentTypes_.concat(mediaTypes_)\n    .concat(mediaFeatures_)\n    .concat(mediaValueKeywords_)\n    .concat(propertyKeywords_)\n    .concat(nonStandardPropertyKeywords_)\n    .concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper('hintWords', 'css', allWords);\n\n  function tokenCComment(stream, state) {\n    let maybeEnd = false;\n    let ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == '/') {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == '*');\n    }\n    return ['comment', 'comment'];\n  }\n\n  CodeMirror.defineMIME('text/css', {\n    documentTypes,\n    mediaTypes,\n    mediaFeatures,\n    mediaValueKeywords,\n    propertyKeywords,\n    nonStandardPropertyKeywords,\n    fontProperties,\n    counterDescriptors,\n    colorKeywords,\n    valueKeywords,\n    tokenHooks: {\n      '/': function (stream, state) {\n        if (!stream.eat('*')) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      },\n    },\n    name: 'css',\n  });\n\n  CodeMirror.defineMIME('text/x-scss', {\n    mediaTypes,\n    mediaFeatures,\n    mediaValueKeywords,\n    propertyKeywords,\n    nonStandardPropertyKeywords,\n    colorKeywords,\n    valueKeywords,\n    fontProperties,\n    allowNested: true,\n    lineComment: '//',\n    tokenHooks: {\n      '/': function (stream, state) {\n        if (stream.eat('/')) {\n          stream.skipToEnd();\n          return ['comment', 'comment'];\n        }\n        if (stream.eat('*')) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        }\n        return ['operator', 'operator'];\n\n      },\n      ':': function (stream) {\n        if (stream.match(/\\s*\\{/, false)) {\n          return [null, null];\n        }\n        return false;\n      },\n      $(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false)) {\n          return ['variable-2', 'variable-definition'];\n        }\n        return ['variable-2', 'variable'];\n      },\n      '#': function (stream) {\n        if (!stream.eat('{')) return false;\n        return [null, 'interpolation'];\n      },\n    },\n    name: 'css',\n    helperType: 'scss',\n  });\n\n  CodeMirror.defineMIME('text/x-less', {\n    mediaTypes,\n    mediaFeatures,\n    mediaValueKeywords,\n    propertyKeywords,\n    nonStandardPropertyKeywords,\n    colorKeywords,\n    valueKeywords,\n    fontProperties,\n    allowNested: true,\n    lineComment: '//',\n    tokenHooks: {\n      '/': function (stream, state) {\n        if (stream.eat('/')) {\n          stream.skipToEnd();\n          return ['comment', 'comment'];\n        }\n        if (stream.eat('*')) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        }\n        return ['operator', 'operator'];\n\n      },\n      '@': function (stream) {\n        if (stream.eat('{')) return [null, 'interpolation'];\n        if (stream.match(\n          /^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i,\n          false,\n        )) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false)) {\n          return ['variable-2', 'variable-definition'];\n        }\n        return ['variable-2', 'variable'];\n      },\n      '&': function () {\n        return ['atom', 'atom'];\n      },\n    },\n    name: 'css',\n    helperType: 'less',\n  });\n\n  CodeMirror.defineMIME('text/x-gss', {\n    documentTypes,\n    mediaTypes,\n    mediaFeatures,\n    propertyKeywords,\n    nonStandardPropertyKeywords,\n    fontProperties,\n    counterDescriptors,\n    colorKeywords,\n    valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      '/': function (stream, state) {\n        if (!stream.eat('*')) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      },\n    },\n    name: 'css',\n    helperType: 'gss',\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addXMLMode(CodeMirror) {\n\n  const htmlConfig = {\n    autoSelfClosers: {\n      area: true,\n      base: true,\n      br: true,\n      col: true,\n      command: true,\n      embed: true,\n      frame: true,\n      hr: true,\n      img: true,\n      input: true,\n      keygen: true,\n      link: true,\n      meta: true,\n      param: true,\n      source: true,\n      track: true,\n      wbr: true,\n      menuitem: true,\n    },\n    implicitlyClosed: {\n      dd: true,\n      li: true,\n      optgroup: true,\n      option: true,\n      p: true,\n      rp: true,\n      rt: true,\n      tbody: true,\n      td: true,\n      tfoot: true,\n      th: true,\n      tr: true,\n    },\n    contextGrabbers: {\n      dd: {\n        dd: true,\n        dt: true,\n      },\n      dt: {\n        dd: true,\n        dt: true,\n      },\n      li: {\n        li: true,\n      },\n      option: {\n        option: true,\n        optgroup: true,\n      },\n      optgroup: {\n        optgroup: true,\n      },\n      p: {\n        address: true,\n        article: true,\n        aside: true,\n        blockquote: true,\n        dir: true,\n        div: true,\n        dl: true,\n        fieldset: true,\n        footer: true,\n        form: true,\n        h1: true,\n        h2: true,\n        h3: true,\n        h4: true,\n        h5: true,\n        h6: true,\n        header: true,\n        hgroup: true,\n        hr: true,\n        menu: true,\n        nav: true,\n        ol: true,\n        p: true,\n        pre: true,\n        section: true,\n        table: true,\n        ul: true,\n      },\n      rp: {\n        rp: true,\n        rt: true,\n      },\n      rt: {\n        rp: true,\n        rt: true,\n      },\n      tbody: {\n        tbody: true,\n        tfoot: true,\n      },\n      td: {\n        td: true,\n        th: true,\n      },\n      tfoot: {\n        tbody: true,\n      },\n      th: {\n        td: true,\n        th: true,\n      },\n      thead: {\n        tbody: true,\n        tfoot: true,\n      },\n      tr: {\n        tr: true,\n      },\n    },\n    doNotIndent: {\n      pre: true,\n    },\n    allowUnquoted: true,\n    allowMissing: true,\n    caseFold: true,\n  };\n\n  const xmlConfig = {\n    autoSelfClosers: {},\n    implicitlyClosed: {},\n    contextGrabbers: {},\n    doNotIndent: {},\n    allowUnquoted: false,\n    allowMissing: false,\n    allowMissingTagName: false,\n    caseFold: false,\n  };\n\n  CodeMirror.defineMode('xml', (editorConf, config_) => {\n    const indentUnit = editorConf.indentUnit;\n    const config = {};\n    const defaults = config_.htmlMode ? htmlConfig : xmlConfig;\n    for (var prop in defaults) config[prop] = defaults[prop];\n    for (var prop in config_) config[prop] = config_[prop];\n\n    // Return variables for tokenizers\n    let type;\n    let setStyle;\n\n    function inText(stream, state) {\n      function chain(parser) {\n        state.tokenize = parser;\n        return parser(stream, state);\n      }\n\n      var ch = stream.next();\n      if (ch == \"<\") {\n        if (stream.eat(\"!\")) {\n          if (stream.eat(\"[\")) {\n            if (stream.match(\"CDATA[\")) return chain(inBlock(\"atom\", \"]]>\"));\n            return null;\n          }\n          if (stream.match(\"--\")) {\n            return chain(inBlock(\"comment\", \"-->\"));\n          }\n          if (stream.match(\"DOCTYPE\", true, true)) {\n            stream.eatWhile(/[\\w\\._\\-]/);\n            return chain(doctype(1));\n          }\n          return null;\n\n        }\n        if (stream.eat(\"?\")) {\n          stream.eatWhile(/[\\w\\._\\-]/);\n          state.tokenize = inBlock(\"meta\", \"?>\");\n          return \"meta\";\n        }\n        type = stream.eat(\"/\") ? \"closeTag\" : \"openTag\";\n        state.tokenize = inTag;\n        return \"tag bracket\";\n\n      }\n      if (ch == \"&\") {\n        var ok;\n        if (stream.eat(\"#\")) {\n          if (stream.eat(\"x\")) {\n            ok = stream.eatWhile(/[a-fA-F\\d]/) && stream.eat(\";\");\n          } else {\n            ok = stream.eatWhile(/[\\d]/) && stream.eat(\";\");\n          }\n        } else {\n          ok = stream.eatWhile(/[\\w\\.\\-:]/) && stream.eat(\";\");\n        }\n        return ok ? \"atom\" : \"error\";\n      }\n      stream.eatWhile(/[^&<]/);\n      return null;\n\n    }\n    inText.isInText = true;\n\n    function inTag(stream, state) {\n      const ch = stream.next();\n      if (ch == '>' || (ch == '/' && stream.eat('>'))) {\n        state.tokenize = inText;\n        type = ch == '>' ? 'endTag' : 'selfcloseTag';\n        return 'tag bracket';\n      }\n      if (ch == '=') {\n        type = 'equals';\n        return null;\n      }\n      if (ch == '<') {\n        state.tokenize = inText;\n        state.state = baseState;\n        state.tagName = state.tagStart = null;\n        const next = state.tokenize(stream, state);\n        return next ? next + ' tag error' : 'tag error';\n      }\n      if (/[\\'\\\"]/.test(ch)) {\n        state.tokenize = inAttribute(ch);\n        state.stringStartCol = stream.column();\n        return state.tokenize(stream, state);\n      }\n      stream.match(/^[^\\s\\u00a0=<>\\\"\\']*[^\\s\\u00a0=<>\\\"\\'\\/]/);\n      return 'word';\n\n    }\n\n    function inAttribute(quote) {\n      const closure = function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.next() == quote) {\n            state.tokenize = inTag;\n            break;\n          }\n        }\n        return 'string';\n      };\n      closure.isInAttribute = true;\n      return closure;\n    }\n\n    function inBlock(style, terminator) {\n      return function (stream, state) {\n        while (!stream.eol()) {\n          if (stream.match(terminator)) {\n            state.tokenize = inText;\n            break;\n          }\n          stream.next();\n        }\n        return style;\n      };\n    }\n\n    function doctype(depth) {\n      return function (stream, state) {\n        let ch;\n        while ((ch = stream.next()) != null) {\n          if (ch == '<') {\n            state.tokenize = doctype(depth + 1);\n            return state.tokenize(stream, state);\n          }\n          if (ch == '>') {\n            if (depth == 1) {\n              state.tokenize = inText;\n              break;\n            } else {\n              state.tokenize = doctype(depth - 1);\n              return state.tokenize(stream, state);\n            }\n          }\n        }\n        return 'meta';\n      };\n    }\n\n    function Context(state, tagName, startOfLine) {\n      this.prev = state.context;\n      this.tagName = tagName;\n      this.indent = state.indented;\n      this.startOfLine = startOfLine;\n      if (config.doNotIndent.hasOwnProperty(tagName) || (state.context && state.context.noIndent)) {\n        this.noIndent = true;\n      }\n    }\n\n    function popContext(state) {\n      if (state.context) state.context = state.context.prev;\n    }\n\n    function maybePopContext(state, nextTagName) {\n      let parentTagName;\n      while (true) {\n        if (!state.context) {\n          return;\n        }\n        parentTagName = state.context.tagName;\n        if (!config.contextGrabbers.hasOwnProperty(parentTagName)\n          || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) {\n          return;\n        }\n        popContext(state);\n      }\n    }\n\n    function baseState(type, stream, state) {\n      if (type == 'openTag') {\n        state.tagStart = stream.column();\n        return tagNameState;\n      }\n      if (type == 'closeTag') {\n        return closeTagNameState;\n      }\n      return baseState;\n\n    }\n\n    function tagNameState(type, stream, state) {\n      if (type == 'word') {\n        state.tagName = stream.current();\n        setStyle = 'tag';\n        return attrState;\n      }\n      if (config.allowMissingTagName && type == 'endTag') {\n        setStyle = 'tag bracket';\n        return attrState(type, stream, state);\n      }\n      setStyle = 'error';\n      return tagNameState;\n\n    }\n\n    function closeTagNameState(type, stream, state) {\n      if (type == 'word') {\n        const tagName = stream.current();\n        if (state.context && state.context.tagName != tagName\n          && config.implicitlyClosed.hasOwnProperty(state.context.tagName)) {\n          popContext(state);\n        }\n        if ((state.context && state.context.tagName == tagName) || config.matchClosing === false) {\n          setStyle = 'tag';\n          return closeState;\n        }\n        setStyle = 'tag error';\n        return closeStateErr;\n\n      }\n      if (config.allowMissingTagName && type == 'endTag') {\n        setStyle = 'tag bracket';\n        return closeState(type, stream, state);\n      }\n      setStyle = 'error';\n      return closeStateErr;\n\n    }\n\n    function closeState(type, _stream, state) {\n      if (type != 'endTag') {\n        setStyle = 'error';\n        return closeState;\n      }\n      popContext(state);\n      return baseState;\n    }\n\n    function closeStateErr(type, stream, state) {\n      setStyle = 'error';\n      return closeState(type, stream, state);\n    }\n\n    function attrState(type, _stream, state) {\n      if (type == 'word') {\n        setStyle = 'attribute';\n        return attrEqState;\n      }\n      if (type == 'endTag' || type == 'selfcloseTag') {\n        const tagName = state.tagName;\n        const tagStart = state.tagStart;\n        state.tagName = state.tagStart = null;\n        if (type == 'selfcloseTag'\n          || config.autoSelfClosers.hasOwnProperty(tagName)) {\n          maybePopContext(state, tagName);\n        } else {\n          maybePopContext(state, tagName);\n          state.context = new Context(state, tagName, tagStart == state.indented);\n        }\n        return baseState;\n      }\n      setStyle = 'error';\n      return attrState;\n    }\n\n    function attrEqState(type, stream, state) {\n      if (type == 'equals') return attrValueState;\n      if (!config.allowMissing) setStyle = 'error';\n      return attrState(type, stream, state);\n    }\n\n    function attrValueState(type, stream, state) {\n      if (type == 'string') return attrContinuedState;\n      if (type == 'word' && config.allowUnquoted) {\n        setStyle = 'string';\n        return attrState;\n      }\n      setStyle = 'error';\n      return attrState(type, stream, state);\n    }\n\n    function attrContinuedState(type, stream, state) {\n      if (type == 'string') return attrContinuedState;\n      return attrState(type, stream, state);\n    }\n\n    return {\n      startState(baseIndent) {\n        const state = {\n          tokenize: inText,\n          state: baseState,\n          indented: baseIndent || 0,\n          tagName: null,\n          tagStart: null,\n          context: null,\n        };\n        if (baseIndent != null) state.baseIndent = baseIndent;\n        return state;\n      },\n\n      token(stream, state) {\n        if (!state.tagName && stream.sol()) {\n          state.indented = stream.indentation();\n        }\n\n        if (stream.eatSpace()) return null;\n        type = null;\n        let style = state.tokenize(stream, state);\n        if ((style || type) && style != 'comment') {\n          setStyle = null;\n          state.state = state.state(type || style, stream, state);\n          if (setStyle) {\n            style = setStyle == 'error' ? style + ' error' : setStyle;\n          }\n        }\n        return style;\n      },\n\n      indent(state, textAfter, fullLine) {\n        let context = state.context;\n        // Indent multi-line strings (e.g. css).\n        if (state.tokenize.isInAttribute) {\n          if (state.tagStart == state.indented) {\n            return state.stringStartCol + 1;\n          }\n          return state.indented + indentUnit;\n        }\n        if (context && context.noIndent) return CodeMirror.Pass;\n        if (state.tokenize != inTag && state.tokenize != inText) {\n          return fullLine ? fullLine.match(/^(\\s*)/)[0].length : 0;\n        }\n        // Indent the starts of attribute names.\n        if (state.tagName) {\n          if (config.multilineTagIndentPastTag !== false) {\n            return state.tagStart + state.tagName.length + 2;\n          }\n          return state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);\n        }\n        if (config.alignCDATA && /<!\\[CDATA\\[/.test(textAfter)) return 0;\n        const tagAfter = textAfter && /^<(\\/)?([\\w_:\\.-]*)/.exec(textAfter);\n        if (tagAfter && tagAfter[1]) { // Closing tag spotted\n          while (context) {\n            if (context.tagName == tagAfter[2]) {\n              context = context.prev;\n              break;\n            } else if (config.implicitlyClosed.hasOwnProperty(context.tagName)) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        } else if (tagAfter) { // Opening tag spotted\n          while (context) {\n            const grabbers = config.contextGrabbers[context.tagName];\n            if (grabbers && grabbers.hasOwnProperty(tagAfter[2])) {\n              context = context.prev;\n            } else {\n              break;\n            }\n          }\n        }\n        while (context && context.prev && !context.startOfLine) {\n          context = context.prev;\n        }\n        if (context) return context.indent + indentUnit;\n        return state.baseIndent || 0;\n      },\n\n      electricInput: /<\\/[\\s\\w:]+>$/,\n      blockCommentStart: '<!--',\n      blockCommentEnd: '-->',\n\n      configuration: config.htmlMode ? 'html' : 'xml',\n      helperType: config.htmlMode ? 'html' : 'xml',\n\n      skipAttribute(state) {\n        if (state.state == attrValueState) {\n          state.state = attrState;\n        }\n      },\n    };\n  });\n\n  CodeMirror.defineMIME('text/xml', 'xml');\n  CodeMirror.defineMIME('application/xml', 'xml');\n  if (!CodeMirror.mimeModes.hasOwnProperty('text/html')) {\n    CodeMirror.defineMIME('text/html', {\n      name: 'xml',\n      htmlMode: true,\n    });\n  }\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addJavaScriptMode(CodeMirror) {\n  CodeMirror.defineMode('javascript', (config, parserConfig) => {\n    const indentUnit = config.indentUnit;\n    const statementIndent = parserConfig.statementIndent;\n    const jsonldMode = parserConfig.jsonld;\n    const jsonMode = parserConfig.json || jsonldMode;\n    const isTS = parserConfig.typescript;\n    const wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n    // Tokenizer\n\n    const keywords = (function () {\n      function kw(type) {\n        return {\n          type,\n          style: 'keyword',\n        };\n      }\n      const A = kw('keyword a');\n      const B = kw('keyword b');\n      const C = kw('keyword c');\n      const D = kw('keyword d');\n      const operator = kw('operator');\n      const atom = {\n        type: 'atom',\n        style: 'atom',\n      };\n\n      return {\n        if: kw('if'),\n        while: A,\n        with: A,\n        else: B,\n        do: B,\n        try: B,\n        finally: B,\n        return: D,\n        break: D,\n        continue: D,\n        new: kw('new'),\n        delete: C,\n        void: C,\n        throw: C,\n        debugger: kw('debugger'),\n        var: kw('var'),\n        const: kw('var'),\n        let: kw('var'),\n        function: kw('function'),\n        catch: kw('catch'),\n        for: kw('for'),\n        switch: kw('switch'),\n        case: kw('case'),\n        default: kw('default'),\n        in: operator,\n        typeof: operator,\n        instanceof: operator,\n        true: atom,\n        false: atom,\n        null: atom,\n        undefined: atom,\n        NaN: atom,\n        Infinity: atom,\n        this: kw('this'),\n        class: kw('class'),\n        super: kw('atom'),\n        yield: C,\n        export: kw('export'),\n        import: kw('import'),\n        extends: C,\n        await: C,\n      };\n    })();\n\n    const isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n    const isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n    function readRegexp(stream) {\n      let escaped = false;\n      let next;\n      let inSet = false;\n      while ((next = stream.next()) != null) {\n        if (!escaped) {\n          if (next == '/' && !inSet) return;\n          if (next == '[') inSet = true;\n          else if (inSet && next == ']') inSet = false;\n        }\n        escaped = !escaped && next == '\\\\';\n      }\n    }\n\n    // Used as scratch variables to communicate multiple values without\n    // consing up tons of objects.\n    let type;\n    let content;\n\n    function ret(tp, style, cont) {\n      type = tp;\n      content = cont;\n      return style;\n    }\n\n    function tokenBase(stream, state) {\n      const ch = stream.next();\n      if (ch == '\"' || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      }\n      if (\n        ch == '.' &&\n        stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)\n      ) {\n        return ret('number', 'number');\n      }\n      if (ch == '.' && stream.match('..')) {\n        return ret('spread', 'meta');\n      }\n      if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n        return ret(ch);\n      }\n      if (ch == '=' && stream.eat('>')) {\n        return ret('=>', 'operator');\n      }\n      if (\n        ch == '0' &&\n        stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)\n      ) {\n        return ret('number', 'number');\n      }\n      if (/\\d/.test(ch)) {\n        stream.match(\n          /^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/,\n        );\n        return ret('number', 'number');\n      }\n      if (ch == '/') {\n        if (stream.eat('*')) {\n          state.tokenize = tokenComment;\n          return tokenComment(stream, state);\n        }\n        if (stream.eat('/')) {\n          stream.skipToEnd();\n          return ret('comment', 'comment');\n        }\n        if (expressionAllowed(stream, state, 1)) {\n          readRegexp(stream);\n          stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n          return ret('regexp', 'string-2');\n        }\n        stream.eat('=');\n        return ret('operator', 'operator', stream.current());\n      }\n      if (ch == '`') {\n        state.tokenize = tokenQuasi;\n        return tokenQuasi(stream, state);\n      }\n      if (ch == '#') {\n        stream.skipToEnd();\n        return ret('error', 'error');\n      }\n      if (\n        (ch == '<' && stream.match('!--')) ||\n        (ch == '-' && stream.match('->'))\n      ) {\n        stream.skipToEnd();\n        return ret('comment', 'comment');\n      }\n      if (isOperatorChar.test(ch)) {\n        if (\n          ch != '>' ||\n          !state.lexical ||\n          state.lexical.type != '>'\n        ) {\n          if (stream.eat('=')) {\n            if (ch == '!' || ch == '=') stream.eat('=');\n          } else if (/[<>*+\\-]/.test(ch)) {\n            stream.eat(ch);\n            if (ch == '>') stream.eat(ch);\n          }\n        }\n        return ret('operator', 'operator', stream.current());\n      }\n      if (wordRE.test(ch)) {\n        stream.eatWhile(wordRE);\n        const word = stream.current();\n        if (state.lastType != '.') {\n          if (keywords.propertyIsEnumerable(word)) {\n            const kw = keywords[word];\n            return ret(kw.type, kw.style, word);\n          }\n          if (\n            word == 'async' &&\n            stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, false)\n          )\n            return ret('async', 'keyword', word);\n        }\n        return ret('variable', 'variable', word);\n      }\n    }\n\n    function tokenString(quote) {\n      return function (stream, state) {\n        let escaped = false;\n        let next;\n        if (\n          jsonldMode &&\n          stream.peek() == '@' &&\n          stream.match(isJsonldKeyword)\n        ) {\n          state.tokenize = tokenBase;\n          return ret('jsonld-keyword', 'meta');\n        }\n        while ((next = stream.next()) != null) {\n          if (next == quote && !escaped) break;\n          escaped = !escaped && next == '\\\\';\n        }\n        if (!escaped) state.tokenize = tokenBase;\n        return ret('string', 'string');\n      };\n    }\n\n    function tokenComment(stream, state) {\n      let maybeEnd = false;\n      let ch;\n      while ((ch = stream.next())) {\n        if (ch == '/' && maybeEnd) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = ch == '*';\n      }\n      return ret('comment', 'comment');\n    }\n\n    function tokenQuasi(stream, state) {\n      let escaped = false;\n      let next;\n      while ((next = stream.next()) != null) {\n        if (\n          !escaped &&\n          (next == '`' || (next == '$' && stream.eat('{')))\n        ) {\n          state.tokenize = tokenBase;\n          break;\n        }\n        escaped = !escaped && next == '\\\\';\n      }\n      return ret('quasi', 'string-2', stream.current());\n    }\n\n    const brackets = '([{}])';\n    // This is a crude lookahead trick to try and notice that we're\n    // parsing the argument patterns for a fat-arrow function before we\n    // actually hit the arrow token. It only works if the arrow is on\n    // the same line as the arguments and there's no strange noise\n    // (comments) in between. Fallback is to only notice when we hit the\n    // arrow, and not declare the arguments as locals for the arrow\n    // body.\n    function findFatArrow(stream, state) {\n      if (state.fatArrowAt) state.fatArrowAt = null;\n      let arrow = stream.string.indexOf('=>', stream.start);\n      if (arrow < 0) return;\n\n      if (isTS) {\n        // Try to skip TypeScript return type declarations after the arguments\n        const m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(\n          stream.string.slice(stream.start, arrow),\n        );\n        if (m) arrow = m.index;\n      }\n\n      let depth = 0;\n      let sawSomething = false;\n      for (var pos = arrow - 1; pos >= 0; --pos) {\n        const ch = stream.string.charAt(pos);\n        const bracket = brackets.indexOf(ch);\n        if (bracket >= 0 && bracket < 3) {\n          if (!depth) {\n            ++pos;\n            break;\n          }\n          if (--depth == 0) {\n            if (ch == '(') sawSomething = true;\n            break;\n          }\n        } else if (bracket >= 3 && bracket < 6) {\n          ++depth;\n        } else if (wordRE.test(ch)) {\n          sawSomething = true;\n        } else if (/[\"'\\/`]/.test(ch)) {\n          for (; ; --pos) {\n            if (pos == 0) return;\n            const next = stream.string.charAt(pos - 1);\n            if (next == ch && stream.string.charAt(pos - 2) != '\\\\') {\n              pos--;\n              break;\n            }\n          }\n        } else if (sawSomething && !depth) {\n          ++pos;\n          break;\n        }\n      }\n      if (sawSomething && !depth) state.fatArrowAt = pos;\n    }\n\n    // Parser\n\n    const atomicTypes = {\n      atom: true,\n      number: true,\n      variable: true,\n      string: true,\n      regexp: true,\n      this: true,\n      'jsonld-keyword': true,\n    };\n\n    function JSLexical(indented, column, type, align, prev, info) {\n      this.indented = indented;\n      this.column = column;\n      this.type = type;\n      this.prev = prev;\n      this.info = info;\n      if (align != null) this.align = align;\n    }\n\n    function inScope(state, varname) {\n      for (var v = state.localVars; v; v = v.next) {\n        if (v.name == varname) return true;\n      }\n      for (let cx = state.context; cx; cx = cx.prev) {\n        for (var v = cx.vars; v; v = v.next) {\n          if (v.name == varname) return true;\n        }\n      }\n    }\n\n    function parseJS(state, style, type, content, stream) {\n      const cc = state.cc;\n      // Communicate our context to the combinators.\n      // (Less wasteful than consing up a hundred closures on every call.)\n      cx.state = state;\n      cx.stream = stream;\n      (cx.marked = null), (cx.cc = cc);\n      cx.style = style;\n\n      if (!state.lexical.hasOwnProperty('align')) {\n        state.lexical.align = true;\n      }\n\n      while (true) {\n        const combinator = cc.length\n          ? cc.pop()\n          : jsonMode\n          ? expression\n          : statement;\n        if (combinator(type, content)) {\n          while (cc.length && cc[cc.length - 1].lex) {\n            cc.pop()();\n          }\n          if (cx.marked) return cx.marked;\n          if (type == 'variable' && inScope(state, content))\n            return 'variable-2';\n          return style;\n        }\n      }\n    }\n\n    // Combinator utils\n\n    var cx = {\n      state: null,\n      column: null,\n      marked: null,\n      cc: null,\n    };\n\n    function pass() {\n      for (let i = arguments.length - 1; i >= 0; i--)\n        cx.cc.push(arguments[i]);\n    }\n\n    function cont() {\n      pass.apply(null, arguments);\n      return true;\n    }\n\n    function inList(name, list) {\n      for (let v = list; v; v = v.next) {\n        if (v.name == name) return true;\n      }\n      return false;\n    }\n\n    function register(varname) {\n      const state = cx.state;\n      cx.marked = 'def';\n      if (state.context) {\n        if (\n          state.lexical.info == 'var' &&\n          state.context &&\n          state.context.block\n        ) {\n          // FIXME function decls are also not block scoped\n          const newContext = registerVarScoped(\n            varname,\n            state.context,\n          );\n          if (newContext != null) {\n            state.context = newContext;\n            return;\n          }\n        } else if (!inList(varname, state.localVars)) {\n          state.localVars = new Var(varname, state.localVars);\n          return;\n        }\n      }\n      // Fall through means this is global\n      if (\n        parserConfig.globalVars &&\n        !inList(varname, state.globalVars)\n      ) {\n        state.globalVars = new Var(varname, state.globalVars);\n      }\n    }\n\n    function registerVarScoped(varname, context) {\n      if (!context) {\n        return null;\n      }\n      if (context.block) {\n        const inner = registerVarScoped(varname, context.prev);\n        if (!inner) return null;\n        if (inner == context.prev) return context;\n        return new Context(inner, context.vars, true);\n      }\n      if (inList(varname, context.vars)) {\n        return context;\n      }\n      return new Context(\n        context.prev,\n        new Var(varname, context.vars),\n        false,\n      );\n    }\n\n    function isModifier(name) {\n      return (\n        name == 'public' ||\n        name == 'private' ||\n        name == 'protected' ||\n        name == 'abstract' ||\n        name == 'readonly'\n      );\n    }\n\n    // Combinators\n\n    function Context(prev, vars, block) {\n      this.prev = prev;\n      this.vars = vars;\n      this.block = block;\n    }\n\n    function Var(name, next) {\n      this.name = name;\n      this.next = next;\n    }\n\n    const defaultVars = new Var('this', new Var('arguments', null));\n\n    function pushcontext() {\n      cx.state.context = new Context(\n        cx.state.context,\n        cx.state.localVars,\n        false,\n      );\n      cx.state.localVars = defaultVars;\n    }\n\n    function pushblockcontext() {\n      cx.state.context = new Context(\n        cx.state.context,\n        cx.state.localVars,\n        true,\n      );\n      cx.state.localVars = null;\n    }\n\n    function popcontext() {\n      cx.state.localVars = cx.state.context.vars;\n      cx.state.context = cx.state.context.prev;\n    }\n    popcontext.lex = true;\n\n    function pushlex(type, info) {\n      const result = function () {\n        const state = cx.state;\n        let indent = state.indented;\n        if (state.lexical.type == 'stat')\n          indent = state.lexical.indented;\n        else {\n          for (\n            let outer = state.lexical;\n            outer && outer.type == ')' && outer.align;\n            outer = outer.prev\n          ) {\n            indent = outer.indented;\n          }\n        }\n        state.lexical = new JSLexical(\n          indent,\n          cx.stream.column(),\n          type,\n          null,\n          state.lexical,\n          info,\n        );\n      };\n      result.lex = true;\n      return result;\n    }\n\n    function poplex() {\n      const state = cx.state;\n      if (state.lexical.prev) {\n        if (state.lexical.type == ')') {\n          state.indented = state.lexical.indented;\n        }\n        state.lexical = state.lexical.prev;\n      }\n    }\n    poplex.lex = true;\n\n    function expect(wanted) {\n      function exp(type) {\n        if (type == wanted) return cont();\n        if (\n          wanted == ';' ||\n          type == '}' ||\n          type == ')' ||\n          type == ']'\n        )\n          return pass();\n        return cont(exp);\n      }\n      return exp;\n    }\n\n    function statement(type, value) {\n      if (type == 'var')\n        return cont(\n          pushlex('vardef', value),\n          vardef,\n          expect(';'),\n          poplex,\n        );\n      if (type == 'keyword a')\n        return cont(pushlex('form'), parenExpr, statement, poplex);\n      if (type == 'keyword b')\n        return cont(pushlex('form'), statement, poplex);\n      if (type == 'keyword d') {\n        return cx.stream.match(/^\\s*$/, false)\n          ? cont()\n          : cont(\n              pushlex('stat'),\n              maybeexpression,\n              expect(';'),\n              poplex,\n            );\n      }\n      if (type == 'debugger') return cont(expect(';'));\n      if (type == '{')\n        return cont(\n          pushlex('}'),\n          pushblockcontext,\n          block,\n          poplex,\n          popcontext,\n        );\n      if (type == ';') return cont();\n      if (type == 'if') {\n        if (\n          cx.state.lexical.info == 'else' &&\n          cx.state.cc[cx.state.cc.length - 1] == poplex\n        ) {\n          cx.state.cc.pop()();\n        }\n        return cont(\n          pushlex('form'),\n          parenExpr,\n          statement,\n          poplex,\n          maybeelse,\n        );\n      }\n      if (type == 'function') return cont(functiondef);\n      if (type == 'for')\n        return cont(pushlex('form'), forspec, statement, poplex);\n      if (type == 'class' || (isTS && value == 'interface')) {\n        cx.marked = 'keyword';\n        return cont(\n          pushlex('form', type == 'class' ? type : value),\n          className,\n          poplex,\n        );\n      }\n      if (type == 'variable') {\n        if (isTS && value == 'declare') {\n          cx.marked = 'keyword';\n          return cont(statement);\n        }\n        if (\n          isTS &&\n          (value == 'module' || value == 'enum' || value == 'type') &&\n          cx.stream.match(/^\\s*\\w/, false)\n        ) {\n          cx.marked = 'keyword';\n          if (value == 'enum') return cont(enumdef);\n          if (value == 'type')\n            return cont(\n              typename,\n              expect('operator'),\n              typeexpr,\n              expect(';'),\n            );\n          return cont(\n            pushlex('form'),\n            pattern,\n            expect('{'),\n            pushlex('}'),\n            block,\n            poplex,\n            poplex,\n          );\n        }\n        if (isTS && value == 'namespace') {\n          cx.marked = 'keyword';\n          return cont(pushlex('form'), expression, statement, poplex);\n        }\n        if (isTS && value == 'abstract') {\n          cx.marked = 'keyword';\n          return cont(statement);\n        }\n        return cont(pushlex('stat'), maybelabel);\n      }\n      if (type == 'switch') {\n        return cont(\n          pushlex('form'),\n          parenExpr,\n          expect('{'),\n          pushlex('}', 'switch'),\n          pushblockcontext,\n          block,\n          poplex,\n          poplex,\n          popcontext,\n        );\n      }\n      if (type == 'case') return cont(expression, expect(':'));\n      if (type == 'default') return cont(expect(':'));\n      if (type == 'catch') {\n        return cont(\n          pushlex('form'),\n          pushcontext,\n          maybeCatchBinding,\n          statement,\n          poplex,\n          popcontext,\n        );\n      }\n      if (type == 'export')\n        return cont(pushlex('stat'), afterExport, poplex);\n      if (type == 'import')\n        return cont(pushlex('stat'), afterImport, poplex);\n      if (type == 'async') return cont(statement);\n      if (value == '@') return cont(expression, statement);\n      return pass(pushlex('stat'), expression, expect(';'), poplex);\n    }\n\n    function maybeCatchBinding(type) {\n      if (type == '(') return cont(funarg, expect(')'));\n    }\n\n    function expression(type, value) {\n      return expressionInner(type, value, false);\n    }\n\n    function expressionNoComma(type, value) {\n      return expressionInner(type, value, true);\n    }\n\n    function parenExpr(type) {\n      if (type != '(') return pass();\n      return cont(pushlex(')'), expression, expect(')'), poplex);\n    }\n\n    function expressionInner(type, value, noComma) {\n      if (cx.state.fatArrowAt == cx.stream.start) {\n        const body = noComma ? arrowBodyNoComma : arrowBody;\n        if (type == '(') {\n          return cont(\n            pushcontext,\n            pushlex(')'),\n            commasep(funarg, ')'),\n            poplex,\n            expect('=>'),\n            body,\n            popcontext,\n          );\n        }\n        if (type == 'variable')\n          return pass(\n            pushcontext,\n            pattern,\n            expect('=>'),\n            body,\n            popcontext,\n          );\n      }\n\n      const maybeop = noComma\n        ? maybeoperatorNoComma\n        : maybeoperatorComma;\n      if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n      if (type == 'function') return cont(functiondef, maybeop);\n      if (type == 'class' || (isTS && value == 'interface')) {\n        cx.marked = 'keyword';\n        return cont(pushlex('form'), classExpression, poplex);\n      }\n      if (type == 'keyword c' || type == 'async')\n        return cont(noComma ? expressionNoComma : expression);\n      if (type == '(')\n        return cont(\n          pushlex(')'),\n          maybeexpression,\n          expect(')'),\n          poplex,\n          maybeop,\n        );\n      if (type == 'operator' || type == 'spread')\n        return cont(noComma ? expressionNoComma : expression);\n      if (type == '[')\n        return cont(pushlex(']'), arrayLiteral, poplex, maybeop);\n      if (type == '{')\n        return contCommasep(objprop, '}', null, maybeop);\n      if (type == 'quasi') return pass(quasi, maybeop);\n      if (type == 'new') return cont(maybeTarget(noComma));\n      if (type == 'import') return cont(expression);\n      return cont();\n    }\n\n    function maybeexpression(type) {\n      if (type.match(/[;\\}\\)\\],]/)) return pass();\n      return pass(expression);\n    }\n\n    function maybeoperatorComma(type, value) {\n      if (type == ',') return cont(expression);\n      return maybeoperatorNoComma(type, value, false);\n    }\n\n    function maybeoperatorNoComma(type, value, noComma) {\n      const me =\n        noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n      const expr = noComma == false ? expression : expressionNoComma;\n      if (type == '=>')\n        return cont(\n          pushcontext,\n          noComma ? arrowBodyNoComma : arrowBody,\n          popcontext,\n        );\n      if (type == 'operator') {\n        if (/\\+\\+|--/.test(value) || (isTS && value == '!'))\n          return cont(me);\n        if (\n          isTS &&\n          value == '<' &&\n          cx.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, false)\n        ) {\n          return cont(\n            pushlex('>'),\n            commasep(typeexpr, '>'),\n            poplex,\n            me,\n          );\n        }\n        if (value == '?') return cont(expression, expect(':'), expr);\n        return cont(expr);\n      }\n      if (type == 'quasi') {\n        return pass(quasi, me);\n      }\n      if (type == ';') return;\n      if (type == '(')\n        return contCommasep(expressionNoComma, ')', 'call', me);\n      if (type == '.') return cont(property, me);\n      if (type == '[')\n        return cont(\n          pushlex(']'),\n          maybeexpression,\n          expect(']'),\n          poplex,\n          me,\n        );\n      if (isTS && value == 'as') {\n        cx.marked = 'keyword';\n        return cont(typeexpr, me);\n      }\n      if (type == 'regexp') {\n        cx.state.lastType = cx.marked = 'operator';\n        cx.stream.backUp(cx.stream.pos - cx.stream.start - 1);\n        return cont(expr);\n      }\n    }\n\n    function quasi(type, value) {\n      if (type != 'quasi') return pass();\n      if (value.slice(value.length - 2) != '${') return cont(quasi);\n      return cont(expression, continueQuasi);\n    }\n\n    function continueQuasi(type) {\n      if (type == '}') {\n        cx.marked = 'string-2';\n        cx.state.tokenize = tokenQuasi;\n        return cont(quasi);\n      }\n    }\n\n    function arrowBody(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == '{' ? statement : expression);\n    }\n\n    function arrowBodyNoComma(type) {\n      findFatArrow(cx.stream, cx.state);\n      return pass(type == '{' ? statement : expressionNoComma);\n    }\n\n    function maybeTarget(noComma) {\n      return function (type) {\n        if (type == '.')\n          return cont(noComma ? targetNoComma : target);\n        if (type == 'variable' && isTS) {\n          return cont(\n            maybeTypeArgs,\n            noComma ? maybeoperatorNoComma : maybeoperatorComma,\n          );\n        }\n        return pass(noComma ? expressionNoComma : expression);\n      };\n    }\n\n    function target(_, value) {\n      if (value == 'target') {\n        cx.marked = 'keyword';\n        return cont(maybeoperatorComma);\n      }\n    }\n\n    function targetNoComma(_, value) {\n      if (value == 'target') {\n        cx.marked = 'keyword';\n        return cont(maybeoperatorNoComma);\n      }\n    }\n\n    function maybelabel(type) {\n      if (type == ':') return cont(poplex, statement);\n      return pass(maybeoperatorComma, expect(';'), poplex);\n    }\n\n    function property(type) {\n      if (type == 'variable') {\n        cx.marked = 'property';\n        return cont();\n      }\n    }\n\n    function objprop(type, value) {\n      if (type == 'async') {\n        cx.marked = 'property';\n        return cont(objprop);\n      }\n      if (type == 'variable' || cx.style == 'keyword') {\n        cx.marked = 'property';\n        if (value == 'get' || value == 'set')\n          return cont(getterSetter);\n        let m; // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n        if (\n          isTS &&\n          cx.state.fatArrowAt == cx.stream.start &&\n          (m = cx.stream.match(/^\\s*:\\s*/, false))\n        ) {\n          cx.state.fatArrowAt = cx.stream.pos + m[0].length;\n        }\n        return cont(afterprop);\n      }\n      if (type == 'number' || type == 'string') {\n        cx.marked = jsonldMode ? 'property' : `${cx.style} property`;\n        return cont(afterprop);\n      }\n      if (type == 'jsonld-keyword') {\n        return cont(afterprop);\n      }\n      if (isTS && isModifier(value)) {\n        cx.marked = 'keyword';\n        return cont(objprop);\n      }\n      if (type == '[') {\n        return cont(expression, maybetype, expect(']'), afterprop);\n      }\n      if (type == 'spread') {\n        return cont(expressionNoComma, afterprop);\n      }\n      if (value == '*') {\n        cx.marked = 'keyword';\n        return cont(objprop);\n      }\n      if (type == ':') {\n        return pass(afterprop);\n      }\n    }\n\n    function getterSetter(type) {\n      if (type != 'variable') return pass(afterprop);\n      cx.marked = 'property';\n      return cont(functiondef);\n    }\n\n    function afterprop(type) {\n      if (type == ':') return cont(expressionNoComma);\n      if (type == '(') return pass(functiondef);\n    }\n\n    function commasep(what, end, sep) {\n      function proceed(type, value) {\n        if (sep ? sep.indexOf(type) > -1 : type == ',') {\n          const lex = cx.state.lexical;\n          if (lex.info == 'call') lex.pos = (lex.pos || 0) + 1;\n          return cont((type, value) => {\n            if (type == end || value == end) return pass();\n            return pass(what);\n          }, proceed);\n        }\n        if (type == end || value == end) return cont();\n        if (sep && sep.indexOf(';') > -1) return pass(what);\n        return cont(expect(end));\n      }\n      return function (type, value) {\n        if (type == end || value == end) return cont();\n        return pass(what, proceed);\n      };\n    }\n\n    function contCommasep(what, end, info) {\n      for (let i = 3; i < arguments.length; i++) {\n        cx.cc.push(arguments[i]);\n      }\n      return cont(pushlex(end, info), commasep(what, end), poplex);\n    }\n\n    function block(type) {\n      if (type == '}') return cont();\n      return pass(statement, block);\n    }\n\n    function maybetype(type, value) {\n      if (isTS) {\n        if (type == ':') return cont(typeexpr);\n        if (value == '?') return cont(maybetype);\n      }\n    }\n\n    function maybetypeOrIn(type, value) {\n      if (isTS && (type == ':' || value == 'in'))\n        return cont(typeexpr);\n    }\n\n    function mayberettype(type) {\n      if (isTS && type == ':') {\n        if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false))\n          return cont(expression, isKW, typeexpr);\n        return cont(typeexpr);\n      }\n    }\n\n    function isKW(_, value) {\n      if (value == 'is') {\n        cx.marked = 'keyword';\n        return cont();\n      }\n    }\n\n    function typeexpr(type, value) {\n      if (value == 'keyof' || value == 'typeof' || value == 'infer') {\n        cx.marked = 'keyword';\n        return cont(value == 'typeof' ? expressionNoComma : typeexpr);\n      }\n      if (type == 'variable' || value == 'void') {\n        cx.marked = 'type';\n        return cont(afterType);\n      }\n      if (value == '|' || value == '&') return cont(typeexpr);\n      if (type == 'string' || type == 'number' || type == 'atom')\n        return cont(afterType);\n      if (type == '[')\n        return cont(\n          pushlex(']'),\n          commasep(typeexpr, ']', ','),\n          poplex,\n          afterType,\n        );\n      if (type == '{')\n        return cont(\n          pushlex('}'),\n          commasep(typeprop, '}', ',;'),\n          poplex,\n          afterType,\n        );\n      if (type == '(')\n        return cont(\n          commasep(typearg, ')'),\n          maybeReturnType,\n          afterType,\n        );\n      if (type == '<') return cont(commasep(typeexpr, '>'), typeexpr);\n    }\n\n    function maybeReturnType(type) {\n      if (type == '=>') return cont(typeexpr);\n    }\n\n    function typeprop(type, value) {\n      if (type == 'variable' || cx.style == 'keyword') {\n        cx.marked = 'property';\n        return cont(typeprop);\n      }\n      if (value == '?' || type == 'number' || type == 'string') {\n        return cont(typeprop);\n      }\n      if (type == ':') {\n        return cont(typeexpr);\n      }\n      if (type == '[') {\n        return cont(\n          expect('variable'),\n          maybetypeOrIn,\n          expect(']'),\n          typeprop,\n        );\n      }\n      if (type == '(') {\n        return pass(functiondecl, typeprop);\n      }\n    }\n\n    function typearg(type, value) {\n      if (\n        (type == 'variable' && cx.stream.match(/^\\s*[?:]/, false)) ||\n        value == '?'\n      )\n        return cont(typearg);\n      if (type == ':') return cont(typeexpr);\n      if (type == 'spread') return cont(typearg);\n      return pass(typeexpr);\n    }\n\n    function afterType(type, value) {\n      if (value == '<')\n        return cont(\n          pushlex('>'),\n          commasep(typeexpr, '>'),\n          poplex,\n          afterType,\n        );\n      if (value == '|' || type == '.' || value == '&')\n        return cont(typeexpr);\n      if (type == '[') return cont(typeexpr, expect(']'), afterType);\n      if (value == 'extends' || value == 'implements') {\n        cx.marked = 'keyword';\n        return cont(typeexpr);\n      }\n      if (value == '?') return cont(typeexpr, expect(':'), typeexpr);\n    }\n\n    function maybeTypeArgs(_, value) {\n      if (value == '<')\n        return cont(\n          pushlex('>'),\n          commasep(typeexpr, '>'),\n          poplex,\n          afterType,\n        );\n    }\n\n    function typeparam() {\n      return pass(typeexpr, maybeTypeDefault);\n    }\n\n    function maybeTypeDefault(_, value) {\n      if (value == '=') return cont(typeexpr);\n    }\n\n    function vardef(_, value) {\n      if (value == 'enum') {\n        cx.marked = 'keyword';\n        return cont(enumdef);\n      }\n      return pass(pattern, maybetype, maybeAssign, vardefCont);\n    }\n\n    function pattern(type, value) {\n      if (isTS && isModifier(value)) {\n        cx.marked = 'keyword';\n        return cont(pattern);\n      }\n      if (type == 'variable') {\n        register(value);\n        return cont();\n      }\n      if (type == 'spread') return cont(pattern);\n      if (type == '[') return contCommasep(eltpattern, ']');\n      if (type == '{') return contCommasep(proppattern, '}');\n    }\n\n    function proppattern(type, value) {\n      if (type == 'variable' && !cx.stream.match(/^\\s*:/, false)) {\n        register(value);\n        return cont(maybeAssign);\n      }\n      if (type == 'variable') cx.marked = 'property';\n      if (type == 'spread') return cont(pattern);\n      if (type == '}') return pass();\n      if (type == '[')\n        return cont(\n          expression,\n          expect(']'),\n          expect(':'),\n          proppattern,\n        );\n      return cont(expect(':'), pattern, maybeAssign);\n    }\n\n    function eltpattern() {\n      return pass(pattern, maybeAssign);\n    }\n\n    function maybeAssign(_type, value) {\n      if (value == '=') return cont(expressionNoComma);\n    }\n\n    function vardefCont(type) {\n      if (type == ',') return cont(vardef);\n    }\n\n    function maybeelse(type, value) {\n      if (type == 'keyword b' && value == 'else')\n        return cont(pushlex('form', 'else'), statement, poplex);\n    }\n\n    function forspec(type, value) {\n      if (value == 'await') return cont(forspec);\n      if (type == '(') return cont(pushlex(')'), forspec1, poplex);\n    }\n\n    function forspec1(type) {\n      if (type == 'var') return cont(vardef, forspec2);\n      if (type == 'variable') return cont(forspec2);\n      return pass(forspec2);\n    }\n\n    function forspec2(type, value) {\n      if (type == ')') return cont();\n      if (type == ';') return cont(forspec2);\n      if (value == 'in' || value == 'of') {\n        cx.marked = 'keyword';\n        return cont(expression, forspec2);\n      }\n      return pass(expression, forspec2);\n    }\n\n    function functiondef(type, value) {\n      if (value == '*') {\n        cx.marked = 'keyword';\n        return cont(functiondef);\n      }\n      if (type == 'variable') {\n        register(value);\n        return cont(functiondef);\n      }\n      if (type == '(') {\n        return cont(\n          pushcontext,\n          pushlex(')'),\n          commasep(funarg, ')'),\n          poplex,\n          mayberettype,\n          statement,\n          popcontext,\n        );\n      }\n      if (isTS && value == '<')\n        return cont(\n          pushlex('>'),\n          commasep(typeparam, '>'),\n          poplex,\n          functiondef,\n        );\n    }\n\n    function functiondecl(type, value) {\n      if (value == '*') {\n        cx.marked = 'keyword';\n        return cont(functiondecl);\n      }\n      if (type == 'variable') {\n        register(value);\n        return cont(functiondecl);\n      }\n      if (type == '(') {\n        return cont(\n          pushcontext,\n          pushlex(')'),\n          commasep(funarg, ')'),\n          poplex,\n          mayberettype,\n          popcontext,\n        );\n      }\n      if (isTS && value == '<')\n        return cont(\n          pushlex('>'),\n          commasep(typeparam, '>'),\n          poplex,\n          functiondecl,\n        );\n    }\n\n    function typename(type, value) {\n      if (type == 'keyword' || type == 'variable') {\n        cx.marked = 'type';\n        return cont(typename);\n      }\n      if (value == '<') {\n        return cont(pushlex('>'), commasep(typeparam, '>'), poplex);\n      }\n    }\n\n    function funarg(type, value) {\n      if (value == '@') cont(expression, funarg);\n      if (type == 'spread') return cont(funarg);\n      if (isTS && isModifier(value)) {\n        cx.marked = 'keyword';\n        return cont(funarg);\n      }\n      if (isTS && type == 'this') return cont(maybetype, maybeAssign);\n      return pass(pattern, maybetype, maybeAssign);\n    }\n\n    function classExpression(type, value) {\n      // Class expressions may have an optional name.\n      if (type == 'variable') return className(type, value);\n      return classNameAfter(type, value);\n    }\n\n    function className(type, value) {\n      if (type == 'variable') {\n        register(value);\n        return cont(classNameAfter);\n      }\n    }\n\n    function classNameAfter(type, value) {\n      if (value == '<')\n        return cont(\n          pushlex('>'),\n          commasep(typeparam, '>'),\n          poplex,\n          classNameAfter,\n        );\n      if (\n        value == 'extends' ||\n        value == 'implements' ||\n        (isTS && type == ',')\n      ) {\n        if (value == 'implements') cx.marked = 'keyword';\n        return cont(isTS ? typeexpr : expression, classNameAfter);\n      }\n      if (type == '{') return cont(pushlex('}'), classBody, poplex);\n    }\n\n    function classBody(type, value) {\n      if (\n        type == 'async' ||\n        (type == 'variable' &&\n          (value == 'static' ||\n            value == 'get' ||\n            value == 'set' ||\n            (isTS && isModifier(value))) &&\n          cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))\n      ) {\n        cx.marked = 'keyword';\n        return cont(classBody);\n      }\n      if (type == 'variable' || cx.style == 'keyword') {\n        cx.marked = 'property';\n        return cont(isTS ? classfield : functiondef, classBody);\n      }\n      if (type == 'number' || type == 'string')\n        return cont(isTS ? classfield : functiondef, classBody);\n      if (type == '[') {\n        return cont(\n          expression,\n          maybetype,\n          expect(']'),\n          isTS ? classfield : functiondef,\n          classBody,\n        );\n      }\n      if (value == '*') {\n        cx.marked = 'keyword';\n        return cont(classBody);\n      }\n      if (isTS && type == '(') return pass(functiondecl, classBody);\n      if (type == ';' || type == ',') return cont(classBody);\n      if (type == '}') return cont();\n      if (value == '@') return cont(expression, classBody);\n    }\n\n    function classfield(type, value) {\n      if (value == '?') return cont(classfield);\n      if (type == ':') return cont(typeexpr, maybeAssign);\n      if (value == '=') return cont(expressionNoComma);\n      const context = cx.state.lexical.prev;\n      const isInterface = context && context.info == 'interface';\n      return pass(isInterface ? functiondecl : functiondef);\n    }\n\n    function afterExport(type, value) {\n      if (value == '*') {\n        cx.marked = 'keyword';\n        return cont(maybeFrom, expect(';'));\n      }\n      if (value == 'default') {\n        cx.marked = 'keyword';\n        return cont(expression, expect(';'));\n      }\n      if (type == '{')\n        return cont(\n          commasep(exportField, '}'),\n          maybeFrom,\n          expect(';'),\n        );\n      return pass(statement);\n    }\n\n    function exportField(type, value) {\n      if (value == 'as') {\n        cx.marked = 'keyword';\n        return cont(expect('variable'));\n      }\n      if (type == 'variable')\n        return pass(expressionNoComma, exportField);\n    }\n\n    function afterImport(type) {\n      if (type == 'string') return cont();\n      if (type == '(') return pass(expression);\n      return pass(importSpec, maybeMoreImports, maybeFrom);\n    }\n\n    function importSpec(type, value) {\n      if (type == '{') return contCommasep(importSpec, '}');\n      if (type == 'variable') register(value);\n      if (value == '*') cx.marked = 'keyword';\n      return cont(maybeAs);\n    }\n\n    function maybeMoreImports(type) {\n      if (type == ',') return cont(importSpec, maybeMoreImports);\n    }\n\n    function maybeAs(_type, value) {\n      if (value == 'as') {\n        cx.marked = 'keyword';\n        return cont(importSpec);\n      }\n    }\n\n    function maybeFrom(_type, value) {\n      if (value == 'from') {\n        cx.marked = 'keyword';\n        return cont(expression);\n      }\n    }\n\n    function arrayLiteral(type) {\n      if (type == ']') return cont();\n      return pass(commasep(expressionNoComma, ']'));\n    }\n\n    function enumdef() {\n      return pass(\n        pushlex('form'),\n        pattern,\n        expect('{'),\n        pushlex('}'),\n        commasep(enummember, '}'),\n        poplex,\n        poplex,\n      );\n    }\n\n    function enummember() {\n      return pass(pattern, maybeAssign);\n    }\n\n    function isContinuedStatement(state, textAfter) {\n      return (\n        state.lastType == 'operator' ||\n        state.lastType == ',' ||\n        isOperatorChar.test(textAfter.charAt(0)) ||\n        /[,.]/.test(textAfter.charAt(0))\n      );\n    }\n\n    function expressionAllowed(stream, state, backUp) {\n      return (\n        (state.tokenize == tokenBase &&\n          /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(\n            state.lastType,\n          )) ||\n        (state.lastType == 'quasi' &&\n          /\\{\\s*$/.test(\n            stream.string.slice(0, stream.pos - (backUp || 0)),\n          ))\n      );\n    }\n\n    // Interface\n\n    return {\n      startState(basecolumn) {\n        const state = {\n          tokenize: tokenBase,\n          lastType: 'sof',\n          cc: [],\n          lexical: new JSLexical(\n            (basecolumn || 0) - indentUnit,\n            0,\n            'block',\n            false,\n          ),\n          localVars: parserConfig.localVars,\n          context:\n            parserConfig.localVars && new Context(null, null, false),\n          indented: basecolumn || 0,\n        };\n        if (\n          parserConfig.globalVars &&\n          typeof parserConfig.globalVars === 'object'\n        ) {\n          state.globalVars = parserConfig.globalVars;\n        }\n        return state;\n      },\n\n      token(stream, state) {\n        if (stream.sol()) {\n          if (!state.lexical.hasOwnProperty('align')) {\n            state.lexical.align = false;\n          }\n          state.indented = stream.indentation();\n          findFatArrow(stream, state);\n        }\n        if (state.tokenize != tokenComment && stream.eatSpace())\n          return null;\n        const style = state.tokenize(stream, state);\n        if (type == 'comment') return style;\n        state.lastType =\n          type == 'operator' && (content == '++' || content == '--')\n            ? 'incdec'\n            : type;\n        return parseJS(state, style, type, content, stream);\n      },\n\n      indent(state, textAfter) {\n        if (state.tokenize == tokenComment) return CodeMirror.Pass;\n        if (state.tokenize != tokenBase) return 0;\n        const firstChar = textAfter && textAfter.charAt(0);\n        let lexical = state.lexical;\n        let top;\n        // Kludge to prevent 'maybelse' from blocking lexical scope pops\n        if (!/^\\s*else\\b/.test(textAfter)) {\n          for (let i = state.cc.length - 1; i >= 0; --i) {\n            const c = state.cc[i];\n            if (c == poplex) lexical = lexical.prev;\n            else if (c != maybeelse) break;\n          }\n        }\n        while (\n          (lexical.type == 'stat' || lexical.type == 'form') &&\n          (firstChar == '}' ||\n            ((top = state.cc[state.cc.length - 1]) &&\n              (top == maybeoperatorComma ||\n                top == maybeoperatorNoComma) &&\n              !/^[,\\.=+\\-*:?[\\(]/.test(textAfter)))\n        ) {\n          lexical = lexical.prev;\n        }\n        if (\n          statementIndent &&\n          lexical.type == ')' &&\n          lexical.prev.type == 'stat'\n        ) {\n          lexical = lexical.prev;\n        }\n        const type = lexical.type;\n        const closing = firstChar == type;\n\n        if (type == 'vardef') {\n          return (\n            lexical.indented +\n            (state.lastType == 'operator' || state.lastType == ','\n              ? lexical.info.length + 1\n              : 0)\n          );\n        }\n        if (type == 'form' && firstChar == '{')\n          return lexical.indented;\n        if (type == 'form') return lexical.indented + indentUnit;\n        if (type == 'stat') {\n          return (\n            lexical.indented +\n            (isContinuedStatement(state, textAfter)\n              ? statementIndent || indentUnit\n              : 0)\n          );\n        }\n        if (\n          lexical.info == 'switch' &&\n          !closing &&\n          parserConfig.doubleIndentSwitch != false\n        ) {\n          return (\n            lexical.indented +\n            (/^(?:case|default)\\b/.test(textAfter)\n              ? indentUnit\n              : 2 * indentUnit)\n          );\n        }\n        if (lexical.align) return lexical.column + (closing ? 0 : 1);\n        return lexical.indented + (closing ? 0 : indentUnit);\n      },\n\n      electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n      blockCommentStart: jsonMode ? null : '/*',\n      blockCommentEnd: jsonMode ? null : '*/',\n      blockCommentContinue: jsonMode ? null : ' * ',\n      lineComment: jsonMode ? null : '//',\n      fold: 'brace',\n      closeBrackets: '()[]{}\\'\\'\"\"``',\n\n      helperType: jsonMode ? 'json' : 'javascript',\n      jsonldMode,\n      jsonMode,\n\n      expressionAllowed,\n\n      skipExpression(state) {\n        const top = state.cc[state.cc.length - 1];\n        if (top == expression || top == expressionNoComma)\n          state.cc.pop();\n      },\n    };\n  });\n\n  CodeMirror.registerHelper('wordChars', 'javascript', /[\\w$]/);\n\n  CodeMirror.defineMIME('text/javascript', 'javascript');\n  CodeMirror.defineMIME('text/ecmascript', 'javascript');\n  CodeMirror.defineMIME('application/javascript', 'javascript');\n  CodeMirror.defineMIME('application/x-javascript', 'javascript');\n  CodeMirror.defineMIME('application/ecmascript', 'javascript');\n  CodeMirror.defineMIME('application/json', {\n    name: 'javascript',\n    json: true,\n  });\n  CodeMirror.defineMIME('application/x-json', {\n    name: 'javascript',\n    json: true,\n  });\n  CodeMirror.defineMIME('application/ld+json', {\n    name: 'javascript',\n    jsonld: true,\n  });\n  CodeMirror.defineMIME('text/typescript', {\n    name: 'javascript',\n    typescript: true,\n  });\n  CodeMirror.defineMIME('application/typescript', {\n    name: 'javascript',\n    typescript: true,\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addComment(CodeMirror) {\n  const noOptions = {};\n  const nonWS = /[^\\s\\u00a0]/;\n  const Pos = CodeMirror.Pos;\n\n  function firstNonWS(str) {\n    const found = str.search(nonWS);\n    return found == -1 ? 0 : found;\n  }\n\n  CodeMirror.commands.toggleComment = function (cm) {\n    cm.toggleComment();\n  };\n\n  CodeMirror.defineExtension('toggleComment', function (options) {\n    if (!options) options = noOptions;\n    const cm = this;\n    let minLine = Infinity;\n    const ranges = this.listSelections();\n    let mode = null;\n    for (let i = ranges.length - 1; i >= 0; i--) {\n      const from = ranges[i].from();\n      let to = ranges[i].to();\n      if (from.line >= minLine) continue;\n      if (to.line >= minLine) to = Pos(minLine, 0);\n      minLine = from.line;\n      if (mode == null) {\n        if (cm.uncomment(from, to, options)) mode = 'un';\n        else {\n          cm.lineComment(from, to, options);\n          mode = 'line';\n        }\n      } else if (mode == 'un') {\n        cm.uncomment(from, to, options);\n      } else {\n        cm.lineComment(from, to, options);\n      }\n    }\n  });\n\n  // Rough heuristic to try and detect lines that are part of multi-line string\n  function probablyInsideString(cm, pos, line) {\n    return (\n      /\\bstring\\b/.test(cm.getTokenTypeAt(Pos(pos.line, 0))) &&\n      !/^[\\'\\\"\\`]/.test(line)\n    );\n  }\n\n  function getMode(cm, pos) {\n    const mode = cm.getMode();\n    return mode.useInnerComments === false || !mode.innerMode\n      ? mode\n      : cm.getModeAt(pos);\n  }\n\n  CodeMirror.defineExtension('lineComment', function (\n    from,\n    to,\n    options,\n  ) {\n    if (!options) options = noOptions;\n    const self = this;\n    const mode = getMode(self, from);\n    const firstLine = self.getLine(from.line);\n    if (\n      firstLine == null ||\n      probablyInsideString(self, from, firstLine)\n    )\n      return;\n\n    const commentString = options.lineComment || mode.lineComment;\n    if (!commentString) {\n      if (options.blockCommentStart || mode.blockCommentStart) {\n        options.fullLines = true;\n        self.blockComment(from, to, options);\n      }\n      return;\n    }\n\n    const end = Math.min(\n      to.ch != 0 || to.line == from.line ? to.line + 1 : to.line,\n      self.lastLine() + 1,\n    );\n    const pad = options.padding == null ? ' ' : options.padding;\n    const blankLines =\n      options.commentBlankLines || from.line == to.line;\n\n    self.operation(() => {\n      if (options.indent) {\n        let baseString = null;\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i);\n          const whitespace = line.slice(0, firstNonWS(line));\n          if (\n            baseString == null ||\n            baseString.length > whitespace.length\n          ) {\n            baseString = whitespace;\n          }\n        }\n        for (var i = from.line; i < end; ++i) {\n          var line = self.getLine(i);\n          let cut = baseString.length;\n          if (!blankLines && !nonWS.test(line)) continue;\n          if (line.slice(0, cut) != baseString)\n            cut = firstNonWS(line);\n          self.replaceRange(\n            baseString + commentString + pad,\n            Pos(i, 0),\n            Pos(i, cut),\n          );\n        }\n      } else {\n        for (var i = from.line; i < end; ++i) {\n          if (blankLines || nonWS.test(self.getLine(i))) {\n            self.replaceRange(commentString + pad, Pos(i, 0));\n          }\n        }\n      }\n    });\n  });\n\n  CodeMirror.defineExtension('blockComment', function (\n    from,\n    to,\n    options,\n  ) {\n    if (!options) options = noOptions;\n    const self = this;\n    const mode = getMode(self, from);\n    const startString =\n      options.blockCommentStart || mode.blockCommentStart;\n    const endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) {\n      if (\n        (options.lineComment || mode.lineComment) &&\n        options.fullLines != false\n      ) {\n        self.lineComment(from, to, options);\n      }\n      return;\n    }\n    if (/\\bcomment\\b/.test(self.getTokenTypeAt(Pos(from.line, 0))))\n      return;\n\n    let end = Math.min(to.line, self.lastLine());\n    if (\n      end != from.line &&\n      to.ch == 0 &&\n      nonWS.test(self.getLine(end))\n    )\n      --end;\n\n    const pad = options.padding == null ? ' ' : options.padding;\n    if (from.line > end) return;\n\n    self.operation(() => {\n      if (options.fullLines != false) {\n        const lastLineHasText = nonWS.test(self.getLine(end));\n        self.replaceRange(pad + endString, Pos(end));\n        self.replaceRange(startString + pad, Pos(from.line, 0));\n        const lead =\n          options.blockCommentLead || mode.blockCommentLead;\n        if (lead != null) {\n          for (let i = from.line + 1; i <= end; ++i) {\n            if (i != end || lastLineHasText) {\n              self.replaceRange(lead + pad, Pos(i, 0));\n            }\n          }\n        }\n      } else {\n        self.replaceRange(endString, to);\n        self.replaceRange(startString, from);\n      }\n    });\n  });\n\n  CodeMirror.defineExtension('uncomment', function (\n    from,\n    to,\n    options,\n  ) {\n    if (!options) options = noOptions;\n    const self = this;\n    const mode = getMode(self, from);\n    const end = Math.min(\n      to.ch != 0 || to.line == from.line ? to.line : to.line - 1,\n      self.lastLine(),\n    );\n    const start = Math.min(from.line, end);\n\n    // Try finding line comments\n    const lineString = options.lineComment || mode.lineComment;\n    const lines = [];\n    const pad = options.padding == null ? ' ' : options.padding;\n    let didSomething;\n    lineComment: {\n      if (!lineString) break lineComment;\n      for (let i = start; i <= end; ++i) {\n        const line = self.getLine(i);\n        let found = line.indexOf(lineString);\n        if (\n          found > -1 &&\n          !/comment/.test(self.getTokenTypeAt(Pos(i, found + 1)))\n        )\n          found = -1;\n        if (found == -1 && nonWS.test(line)) break lineComment;\n        if (found > -1 && nonWS.test(line.slice(0, found)))\n          break lineComment;\n        lines.push(line);\n      }\n      self.operation(() => {\n        for (let i = start; i <= end; ++i) {\n          const line = lines[i - start];\n          const pos = line.indexOf(lineString);\n          let endPos = pos + lineString.length;\n          if (pos < 0) continue;\n          if (line.slice(endPos, endPos + pad.length) == pad)\n            endPos += pad.length;\n          didSomething = true;\n          self.replaceRange('', Pos(i, pos), Pos(i, endPos));\n        }\n      });\n      if (didSomething) return true;\n    }\n\n    // Try block comments\n    const startString =\n      options.blockCommentStart || mode.blockCommentStart;\n    const endString = options.blockCommentEnd || mode.blockCommentEnd;\n    if (!startString || !endString) return false;\n    const lead = options.blockCommentLead || mode.blockCommentLead;\n    const startLine = self.getLine(start);\n    const open = startLine.indexOf(startString);\n    if (open == -1) return false;\n    const endLine = end == start ? startLine : self.getLine(end);\n    const close = endLine.indexOf(\n      endString,\n      end == start ? open + startString.length : 0,\n    );\n    const insideStart = Pos(start, open + 1);\n    const insideEnd = Pos(end, close + 1);\n    if (\n      close == -1 ||\n      !/comment/.test(self.getTokenTypeAt(insideStart)) ||\n      !/comment/.test(self.getTokenTypeAt(insideEnd)) ||\n      self.getRange(insideStart, insideEnd, '\\n').indexOf(endString) >\n      -1\n    ) {\n      return false;\n    }\n\n    // Avoid killing block comments completely outside the selection.\n    // Positions of the last startString before the start of the selection, and the first endString after it.\n    let lastStart = startLine.lastIndexOf(startString, from.ch);\n    let firstEnd =\n      lastStart == -1\n        ? -1\n        : startLine\n          .slice(0, from.ch)\n          .indexOf(endString, lastStart + startString.length);\n    if (\n      lastStart != -1 &&\n      firstEnd != -1 &&\n      firstEnd + endString.length != from.ch\n    )\n      return false;\n    // Positions of the first endString after the end of the selection, and the last startString before it.\n    firstEnd = endLine.indexOf(endString, to.ch);\n    const almostLastStart = endLine\n      .slice(to.ch)\n      .lastIndexOf(startString, firstEnd - to.ch);\n    lastStart =\n      firstEnd == -1 || almostLastStart == -1\n        ? -1\n        : to.ch + almostLastStart;\n    if (firstEnd != -1 && lastStart != -1 && lastStart != to.ch)\n      return false;\n\n    self.operation(() => {\n      self.replaceRange(\n        '',\n        Pos(\n          end,\n          close -\n          (pad && endLine.slice(close - pad.length, close) == pad\n            ? pad.length\n            : 0),\n        ),\n        Pos(end, close + endString.length),\n      );\n      let openEnd = open + startString.length;\n      if (\n        pad &&\n        startLine.slice(openEnd, openEnd + pad.length) == pad\n      )\n        openEnd += pad.length;\n      self.replaceRange('', Pos(start, open), Pos(start, openEnd));\n      if (lead) {\n        for (let i = start + 1; i <= end; ++i) {\n          const line = self.getLine(i);\n          const found = line.indexOf(lead);\n          if (found == -1 || nonWS.test(line.slice(0, found)))\n            continue;\n          let foundEnd = found + lead.length;\n          if (\n            pad &&\n            line.slice(foundEnd, foundEnd + pad.length) == pad\n          )\n            foundEnd += pad.length;\n          self.replaceRange('', Pos(i, found), Pos(i, foundEnd));\n        }\n      }\n    });\n    return true;\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addFullscreen(CodeMirror) {\n\n  CodeMirror.defineOption('fullScreen', false, (cm, val, old) => {\n    if (old == CodeMirror.Init) old = false;\n    if (!old == !val) return;\n    if (val) setFullscreen(cm);\n    else setNormal(cm);\n  });\n\n  function setFullscreen(cm) {\n    const wrap = cm.getWrapperElement();\n    cm.state.fullScreenRestore = {\n      scrollTop: window.pageYOffset,\n      scrollLeft: window.pageXOffset,\n      width: wrap.style.width,\n      height: wrap.style.height,\n    };\n    wrap.style.width = '';\n    wrap.style.height = 'auto';\n    wrap.className += ' CodeMirror-fullscreen';\n    document.documentElement.style.overflow = 'hidden';\n    cm.refresh();\n  }\n\n  function setNormal(cm) {\n    const wrap = cm.getWrapperElement();\n    wrap.className = wrap.className.replace(/\\s*CodeMirror-fullscreen\\b/, '');\n    document.documentElement.style.overflow = '';\n    const info = cm.state.fullScreenRestore;\n    wrap.style.width = info.width;\n    wrap.style.height = info.height;\n    window.scrollTo(info.scrollLeft, info.scrollTop);\n    cm.refresh();\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Defines jumpToLine command. Uses dialog.js if present.\n\nexport function addJumptoline(CodeMirror) {\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) {\n      cm.openDialog(text, f, {\n        value: deflt,\n        selectValueOnOpen: true,\n      });\n    } else f(prompt(shortText, deflt));\n  }\n\n  function getJumpDialog(cm) {\n    return cm.phrase('Jump to line:')\n      + ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">'\n      + cm.phrase('(Use line:column or scroll% syntax)') + '</span>';\n  }\n\n  function interpretLine(cm, string) {\n    const num = Number(string);\n    if (/^[-+]/.test(string)) {\n      return cm.getCursor()\n        .line + num;\n    }\n    return num - 1;\n  }\n\n  CodeMirror.commands.jumpToLine = function (cm) {\n    const cur = cm.getCursor();\n    dialog(cm, getJumpDialog(cm), cm.phrase('Jump to line:'), (cur.line + 1) + ':' + cur.ch, (posStr) => {\n      if (!posStr) return;\n\n      let match;\n      if (match = /^\\s*([\\+\\-]?\\d+)\\s*\\:\\s*(\\d+)\\s*$/.exec(posStr)) {\n        cm.setCursor(interpretLine(cm, match[1]), Number(match[2]));\n      } else if (match = /^\\s*([\\+\\-]?\\d+(\\.\\d+)?)\\%\\s*/.exec(posStr)) {\n        let line = Math.round(cm.lineCount() * Number(match[1]) / 100);\n        if (/^[-+]/.test(match[1])) line = cur.line + line + 1;\n        cm.setCursor(line - 1, cur.ch);\n      } else if (match = /^\\s*\\:?\\s*([\\+\\-]?\\d+)\\s*/.exec(posStr)) {\n        cm.setCursor(interpretLine(cm, match[1]), cur.ch);\n      }\n    });\n  };\n\n  CodeMirror.keyMap.default['Alt-G'] = 'jumpToLine';\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Highlighting text that matches the selection\n//\n// Defines an option highlightSelectionMatches, which, when enabled,\n// will style strings that match the selection throughout the\n// document.\n//\n// The option can be set to true to simply enable it, or to a\n// {minChars, style, wordsOnly, showToken, delay} object to explicitly\n// configure it. minChars is the minimum amount of characters that should be\n// selected for the behavior to occur, and style is the token style to\n// apply to the matches. This will be prefixed by \"cm-\" to create an\n// actual CSS class name. If wordsOnly is enabled, the matches will be\n// highlighted only if the selected text is a word. showToken, when enabled,\n// will cause the current token to be highlighted when nothing is selected.\n// delay is used to specify how much time to wait, in milliseconds, before\n// highlighting the matches. If annotateScrollbar is enabled, the occurences\n// will be highlighted on the scrollbar via the matchesonscrollbar addon.\n\nexport function addMatchhighlighter(CodeMirror) {\n\n  const defaults = {\n    style: 'matchhighlight',\n    minChars: 2,\n    delay: 100,\n    wordsOnly: false,\n    annotateScrollbar: false,\n    showToken: false,\n    trim: true,\n  };\n\n  function State(options) {\n    this.options = {};\n    for (const name in defaults) {\n      this.options[name] = (options && options.hasOwnProperty(name) ? options : defaults)[name];\n    }\n    this.overlay = this.timeout = null;\n    this.matchesonscroll = null;\n    this.active = false;\n  }\n\n  CodeMirror.defineOption('highlightSelectionMatches', false, (cm, val, old) => {\n    if (old && old != CodeMirror.Init) {\n      removeOverlay(cm);\n      clearTimeout(cm.state.matchHighlighter.timeout);\n      cm.state.matchHighlighter = null;\n      cm.off('cursorActivity', cursorActivity);\n      cm.off('focus', onFocus);\n    }\n    if (val) {\n      const state = cm.state.matchHighlighter = new State(val);\n      if (cm.hasFocus()) {\n        state.active = true;\n        highlightMatches(cm);\n      } else {\n        cm.on('focus', onFocus);\n      }\n      cm.on('cursorActivity', cursorActivity);\n    }\n  });\n\n  function cursorActivity(cm) {\n    const state = cm.state.matchHighlighter;\n    if (state.active || cm.hasFocus()) scheduleHighlight(cm, state);\n  }\n\n  function onFocus(cm) {\n    const state = cm.state.matchHighlighter;\n    if (!state.active) {\n      state.active = true;\n      scheduleHighlight(cm, state);\n    }\n  }\n\n  function scheduleHighlight(cm, state) {\n    clearTimeout(state.timeout);\n    state.timeout = setTimeout(() => {\n      highlightMatches(cm);\n    }, state.options.delay);\n  }\n\n  function addOverlay(cm, query, hasBoundary, style) {\n    const state = cm.state.matchHighlighter;\n    cm.addOverlay(state.overlay = makeOverlay(query, hasBoundary, style));\n    if (state.options.annotateScrollbar && cm.showMatchesOnScrollbar) {\n      const searchFor = hasBoundary ? new RegExp('\\\\b' + query.replace(/[\\\\\\[.+*?(){|^$]/g, '\\\\$&') + '\\\\b')\n        : query;\n      state.matchesonscroll = cm.showMatchesOnScrollbar(searchFor, false, {\n        className: 'CodeMirror-selection-highlight-scrollbar',\n      });\n    }\n  }\n\n  function removeOverlay(cm) {\n    const state = cm.state.matchHighlighter;\n    if (state.overlay) {\n      cm.removeOverlay(state.overlay);\n      state.overlay = null;\n      if (state.matchesonscroll) {\n        state.matchesonscroll.clear();\n        state.matchesonscroll = null;\n      }\n    }\n  }\n\n  function highlightMatches(cm) {\n    cm.operation(() => {\n      const state = cm.state.matchHighlighter;\n      removeOverlay(cm);\n      if (!cm.somethingSelected() && state.options.showToken) {\n        const re = state.options.showToken === true ? /[\\w$]/ : state.options.showToken;\n        const cur = cm.getCursor();\n        const line = cm.getLine(cur.line);\n        let start = cur.ch;\n        let end = start;\n        while (start && re.test(line.charAt(start - 1))) --start;\n        while (end < line.length && re.test(line.charAt(end))) ++end;\n        if (start < end) {\n          addOverlay(cm, line.slice(start, end), re, state.options.style);\n        }\n        return;\n      }\n      const from = cm.getCursor('from');\n      const to = cm.getCursor('to');\n      if (from.line != to.line) return;\n      if (state.options.wordsOnly && !isWord(cm, from, to)) return;\n      let selection = cm.getRange(from, to);\n      if (state.options.trim) selection = selection.replace(/^\\s+|\\s+$/g, '');\n      if (selection.length >= state.options.minChars) {\n        addOverlay(cm, selection, false, state.options.style);\n      }\n    });\n  }\n\n  function isWord(cm, from, to) {\n    const str = cm.getRange(from, to);\n    if (str.match(/^\\w+$/) !== null) {\n      if (from.ch > 0) {\n        var pos = {\n          line: from.line,\n          ch: from.ch - 1,\n        };\n        var chr = cm.getRange(pos, from);\n        if (chr.match(/\\W/) === null) return false;\n      }\n      if (to.ch < cm.getLine(from.line)\n        .length) {\n        var pos = {\n          line: to.line,\n          ch: to.ch + 1,\n        };\n        var chr = cm.getRange(to, pos);\n        if (chr.match(/\\W/) === null) return false;\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function boundariesAround(stream, re) {\n    return (!stream.start || !re.test(stream.string.charAt(stream.start - 1)))\n      && (stream.pos == stream.string.length || !re.test(stream.string.charAt(stream.pos)));\n  }\n\n  function makeOverlay(query, hasBoundary, style) {\n    return {\n      token(stream) {\n        if (stream.match(query)\n          && (!hasBoundary || boundariesAround(stream, hasBoundary))) {\n          return style;\n        }\n        stream.next();\n        stream.skipTo(query.charAt(0)) || stream.skipToEnd();\n      },\n    };\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Define search commands. Depends on dialog.js or another\n// implementation of the openDialog method.\n\n// Replace works a little oddly -- it will do the replace on the next\n// Ctrl-G (or whatever is bound to findNext) press. You prevent a\n// replace by making sure the match is no longer selected when hitting\n// Ctrl-G.\n\nexport function addSearch(CodeMirror) {\n\n  function searchOverlay(query, caseInsensitive) {\n    if (typeof query === 'string') {\n      query = new RegExp(query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&'), caseInsensitive ? 'gi'\n        : 'g');\n    } else if (!query.global) {\n      query = new RegExp(query.source, query.ignoreCase ? 'gi' : 'g');\n    }\n\n    return {\n      token(stream) {\n        query.lastIndex = stream.pos;\n        const match = query.exec(stream.string);\n        if (match && match.index == stream.pos) {\n          stream.pos += match[0].length || 1;\n          return 'searching';\n        }\n        if (match) {\n          stream.pos = match.index;\n        } else {\n          stream.skipToEnd();\n        }\n      },\n    };\n  }\n\n  function SearchState() {\n    this.posFrom = this.posTo = this.lastQuery = this.query = null;\n    this.overlay = null;\n  }\n\n  function getSearchState(cm) {\n    return cm.state.search || (cm.state.search = new SearchState());\n  }\n\n  function queryCaseInsensitive(query) {\n    return typeof query === 'string' && query == query.toLowerCase();\n  }\n\n  function getSearchCursor(cm, query, pos) {\n    // Heuristic: if the query string is all lowercase, do a case insensitive search.\n    return cm.getSearchCursor(query, pos, {\n      caseFold: queryCaseInsensitive(query),\n      multiline: true,\n    });\n  }\n\n  function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {\n    cm.openDialog(text, onEnter, {\n      value: deflt,\n      selectValueOnOpen: true,\n      closeOnEnter: false,\n      onClose() {\n        clearSearch(cm);\n      },\n      onKeyDown,\n    });\n  }\n\n  function dialog(cm, text, shortText, deflt, f) {\n    if (cm.openDialog) {\n      cm.openDialog(text, f, {\n        value: deflt,\n        selectValueOnOpen: true,\n      });\n    } else f(prompt(shortText, deflt));\n  }\n\n  function confirmDialog(cm, text, shortText, fs) {\n    if (cm.openConfirm) cm.openConfirm(text, fs);\n    else if (confirm(shortText)) fs[0]();\n  }\n\n  function parseString(string) {\n    return string.replace(/\\\\([nrt\\\\])/g, (match, ch) => {\n      if (ch == 'n') return '\\n';\n      if (ch == 'r') return '\\r';\n      if (ch == 't') return '\\t';\n      if (ch == '\\\\') return '\\\\';\n      return match;\n    });\n  }\n\n  function parseQuery(query) {\n    const isRE = query.match(/^\\/(.*)\\/([a-z]*)$/);\n    if (isRE) {\n      try {\n        query = new RegExp(isRE[1], isRE[2].indexOf('i') == -1 ? '' : 'i');\n      } catch (e) { } // Not a regular expression after all, do a string search\n    } else {\n      query = parseString(query);\n    }\n    if (typeof query === 'string' ? query == '' : query.test('')) {\n      query = /x^/;\n    }\n    return query;\n  }\n\n  function startSearch(cm, state, query) {\n    state.queryText = query;\n    state.query = parseQuery(query);\n    cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query));\n    state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query));\n    cm.addOverlay(state.overlay);\n    if (cm.showMatchesOnScrollbar) {\n      if (state.annotate) {\n        state.annotate.clear();\n        state.annotate = null;\n      }\n      state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query));\n    }\n  }\n\n  function doSearch(cm, rev, persistent, immediate) {\n    const state = getSearchState(cm);\n    if (state.query) return findNext(cm, rev);\n    let q = cm.getSelection() || state.lastQuery;\n    if (q instanceof RegExp && q.source == 'x^') q = null;\n    if (persistent && cm.openDialog) {\n      let hiding = null;\n      const searchNext = function (query, event) {\n        CodeMirror.e_stop(event);\n        if (!query) return;\n        if (query != state.queryText) {\n          startSearch(cm, state, query);\n          state.posFrom = state.posTo = cm.getCursor();\n        }\n        if (hiding) hiding.style.opacity = 1;\n        findNext(cm, event.shiftKey, (_, to) => {\n          let dialog;\n          if (to.line < 3 && document.querySelector\n            && (dialog = cm.display.wrapper.querySelector('.CodeMirror-dialog'))\n            && dialog.getBoundingClientRect()\n              .bottom - 4 > cm.cursorCoords(to, 'window')\n              .top) {\n            (hiding = dialog)\n              .style.opacity = 0.4;\n          }\n        });\n      };\n      persistentDialog(cm, getQueryDialog(cm), q, searchNext, (event, query) => {\n        const keyName = CodeMirror.keyName(event);\n        const extra = cm.getOption('extraKeys');\n        const cmd = (extra && extra[keyName]) || CodeMirror.keyMap[cm.getOption('keyMap')][keyName];\n        if (cmd == 'findNext' || cmd == 'findPrev'\n          || cmd == 'findPersistentNext' || cmd == 'findPersistentPrev') {\n          CodeMirror.e_stop(event);\n          startSearch(cm, getSearchState(cm), query);\n          cm.execCommand(cmd);\n        } else if (cmd == 'find' || cmd == 'findPersistent') {\n          CodeMirror.e_stop(event);\n          searchNext(query, event);\n        }\n      });\n      if (immediate && q) {\n        startSearch(cm, state, q);\n        findNext(cm, rev);\n      }\n    } else {\n      dialog(cm, getQueryDialog(cm), 'Search for:', q, (query) => {\n        if (query && !state.query) {\n          cm.operation(() => {\n            startSearch(cm, state, query);\n            state.posFrom = state.posTo = cm.getCursor();\n            findNext(cm, rev);\n          });\n        }\n      });\n    }\n  }\n\n  function findNext(cm, rev, callback) {\n    cm.operation(() => {\n      const state = getSearchState(cm);\n      let cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);\n      if (!cursor.find(rev)) {\n        cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm\n          .firstLine(), 0));\n        if (!cursor.find(rev)) return;\n      }\n      cm.setSelection(cursor.from(), cursor.to());\n      cm.scrollIntoView({\n        from: cursor.from(),\n        to: cursor.to(),\n      }, 20);\n      state.posFrom = cursor.from();\n      state.posTo = cursor.to();\n      if (callback) callback(cursor.from(), cursor.to());\n    });\n  }\n\n  function clearSearch(cm) {\n    cm.operation(() => {\n      const state = getSearchState(cm);\n      state.lastQuery = state.query;\n      if (!state.query) return;\n      state.query = state.queryText = null;\n      cm.removeOverlay(state.overlay);\n      if (state.annotate) {\n        state.annotate.clear();\n        state.annotate = null;\n      }\n    });\n  }\n\n  function getQueryDialog(cm) {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase('Search:')\n      + '</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">'\n      + cm.phrase('(Use /re/ syntax for regexp search)') + '</span>';\n  }\n\n  function getReplaceQueryDialog(cm) {\n    return ' <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/> <span style=\"color: #888\" class=\"CodeMirror-search-hint\">'\n      + cm.phrase('(Use /re/ syntax for regexp search)') + '</span>';\n  }\n\n  function getReplacementQueryDialog(cm) {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase('With:')\n      + '</span> <input type=\"text\" style=\"width: 10em\" class=\"CodeMirror-search-field\"/>';\n  }\n\n  function getDoReplaceConfirm(cm) {\n    return '<span class=\"CodeMirror-search-label\">' + cm.phrase('Replace?') + '</span> <button>' + cm.phrase(\n      'Yes',\n    ) + '</button> <button>' + cm.phrase('No') + '</button> <button>' + cm.phrase('All')\n      + '</button> <button>' + cm.phrase('Stop') + '</button> ';\n  }\n\n  function replaceAll(cm, query, text) {\n    cm.operation(() => {\n      for (let cursor = getSearchCursor(cm, query); cursor.findNext();) {\n        if (typeof query !== 'string') {\n          var match = cm.getRange(cursor.from(), cursor.to())\n            .match(query);\n          cursor.replace(text.replace(/\\$(\\d)/g, (_, i) => {\n            return match[i];\n          }));\n        } else cursor.replace(text);\n      }\n    });\n  }\n\n  function replace(cm, all) {\n    if (cm.getOption('readOnly')) return;\n    const query = cm.getSelection() || getSearchState(cm)\n      .lastQuery;\n    const dialogText = '<span class=\"CodeMirror-search-label\">' + (all ? cm.phrase('Replace all:') : cm.phrase(\n      'Replace:',\n    )) + '</span>';\n    dialog(cm, dialogText + getReplaceQueryDialog(cm), dialogText, query, (query) => {\n      if (!query) return;\n      query = parseQuery(query);\n      dialog(cm, getReplacementQueryDialog(cm), cm.phrase('Replace with:'), '', (text) => {\n        text = parseString(text);\n        if (all) {\n          replaceAll(cm, query, text);\n        } else {\n          clearSearch(cm);\n          let cursor = getSearchCursor(cm, query, cm.getCursor('from'));\n          var advance = function () {\n            const start = cursor.from();\n            let match;\n            if (!(match = cursor.findNext())) {\n              cursor = getSearchCursor(cm, query);\n              if (!(match = cursor.findNext())\n                || (start && cursor.from()\n                  .line == start.line && cursor.from()\n                    .ch == start.ch)) return;\n            }\n            cm.setSelection(cursor.from(), cursor.to());\n            cm.scrollIntoView({\n              from: cursor.from(),\n              to: cursor.to(),\n            });\n            confirmDialog(cm, getDoReplaceConfirm(cm), cm.phrase('Replace?'),\n              [function () {\n                doReplace(match);\n              }, advance,\n              function () {\n                replaceAll(cm, query, text);\n              }]);\n          };\n          var doReplace = function (match) {\n            cursor.replace(typeof query === 'string' ? text\n              : text.replace(/\\$(\\d)/g, (_, i) => {\n                return match[i];\n              }));\n            advance();\n          };\n          advance();\n        }\n      });\n    });\n  }\n\n  CodeMirror.commands.find = function (cm) {\n    clearSearch(cm);\n    doSearch(cm);\n  };\n  CodeMirror.commands.findPersistent = function (cm) {\n    clearSearch(cm);\n    doSearch(cm, false, true);\n  };\n  CodeMirror.commands.findPersistentNext = function (cm) {\n    doSearch(cm, false, true, true);\n  };\n  CodeMirror.commands.findPersistentPrev = function (cm) {\n    doSearch(cm, true, true, true);\n  };\n  CodeMirror.commands.findNext = doSearch;\n  CodeMirror.commands.findPrev = function (cm) {\n    doSearch(cm, true);\n  };\n  CodeMirror.commands.clearSearch = clearSearch;\n  CodeMirror.commands.replace = replace;\n  CodeMirror.commands.replaceAll = function (cm) {\n    replace(cm, true);\n  };\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addSearchcursor(CodeMirror) {\n\n  let Pos = CodeMirror.Pos;\n\n  function regexpFlags(regexp) {\n    let flags = regexp.flags;\n    return flags != null ? flags : (regexp.ignoreCase ? 'i' : '') +\n      (regexp.global ? 'g' : '') +\n      (regexp.multiline ? 'm' : '');\n  }\n\n  function ensureFlags(regexp, flags) {\n    let current = regexpFlags(regexp);\n    var target = current;\n    for (let i = 0; i < flags.length; i++) {\n      if (target.indexOf(flags.charAt(i)) == -1)\n        target += flags.charAt(i)\n    };\n    return current == target ? regexp : new RegExp(regexp.source, target);\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source);\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, 'g');\n    for (let line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch;\n      let string = doc.getLine(line);\n      var match = regexp.exec(string);\n      if (match) {\n        return {\n          from: Pos(line, match.index),\n          to: Pos(line, match.index + match[0].length),\n          match: match\n        }\n      };\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start);\n\n    regexp = ensureFlags(regexp, 'gm');\n    let string;\n    var chunk = 1;\n    for (let line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (let i = 0; i < chunk; i++) {\n        if (line > last) break;\n        let curLine = doc.getLine(line++);\n        string = string == null ? curLine : string + '\\n' + curLine;\n      }\n      chunk *= 2;\n      regexp.lastIndex = start.ch;\n      let match = regexp.exec(string);\n      if (match) {\n        let before = string.slice(0, match.index)\n          .split('\\n');\n        var inside = match[0].split('\\n');\n        let startLine = start.line + before.length - 1;\n        var startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1,\n            inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match,\n        };\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp) {\n    let cutOff = 0;\n    var match;\n    for (; ;) {\n      regexp.lastIndex = cutOff;\n      let newMatch = regexp.exec(string);\n      if (!newMatch) return match;\n      match = newMatch;\n      cutOff = match.index + (match[0].length || 1);\n      if (cutOff == string.length) return match;\n    }\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, 'g');\n    for (let line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      let string = doc.getLine(line);\n      if (ch > -1) string = string.slice(0, ch);\n      let match = lastMatchIn(string, regexp);\n      if (match) {\n        return {\n          from: Pos(line, match.index),\n          to: Pos(line, match.index + match[0].length),\n          match: match\n        }\n      };\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    regexp = ensureFlags(regexp, 'gm');\n    let string;\n    var chunk = 1;\n    for (let line = start.line, first = doc.firstLine(); line >= first;) {\n      for (let i = 0; i < chunk; i++) {\n        let curLine = doc.getLine(line--);\n        string = string == null ? curLine.slice(0, start.ch) : curLine + '\\n' + string;\n      }\n      chunk *= 2;\n\n      let match = lastMatchIn(string, regexp);\n      if (match) {\n        let before = string.slice(0, match.index)\n          .split('\\n');\n        var inside = match[0].split('\\n');\n        let startLine = line + before.length;\n        var startCh = before[before.length - 1].length;\n        return {\n          from: Pos(startLine, startCh),\n          to: Pos(startLine + inside.length - 1,\n            inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n          match,\n        };\n      }\n    }\n  }\n\n  let doFold;\n  var noFold;\n  if (String.prototype.normalize) {\n    doFold = function (str) {\n      return str.normalize('NFD')\n        .toLowerCase();\n    };\n    noFold = function (str) {\n      return str.normalize('NFD');\n    };\n  } else {\n    doFold = function (str) {\n      return str.toLowerCase();\n    };\n    noFold = function (str) {\n      return str;\n    };\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length); ;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid))\n        .length\n      if (len == pos) return mid\n      if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query)\n      .split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <=\n      last; line++, ch = 0) {\n      var orig = doc.getLine(line)\n        .slice(ch),\n        string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)\n        }\n      }\n      var cutFrom = string.length - lines[0].length\n      if (string.slice(cutFrom) != lines[0]) continue search\n      for (var i = 1; i < lines.length - 1; i++)\n        if (fold(doc.getLine(line + i)) != lines[i]) continue search\n      var end = doc.getLine(line + lines.length - 1),\n        endString = fold(end),\n        lastLine = lines[lines.length - 1]\n      if (endString.slice(0, lastLine.length) != lastLine) continue search\n      return {\n        from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n        to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))\n      }\n\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query)\n      .split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >=\n      first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {\n          from: Pos(line, adjustPos(orig, string, found, fold)),\n          to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))\n        }\n      }\n      var lastLine = lines[lines.length - 1]\n      if (string.slice(0, lastLine.length) != lastLine) continue search\n      for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n        if (fold(doc.getLine(start + i)) != lines[i]) continue search\n      var top = doc.getLine(line + 1 - lines.length),\n        topString = fold(top)\n      if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n      return {\n        from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n        to: Pos(line, adjustPos(orig, string, lastLine.length, fold))\n      }\n\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false;\n    this.doc = doc;\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0);\n    this.pos = {\n      from: pos,\n      to: pos,\n    };\n\n    let caseFold;\n    if (typeof options === 'object') {\n      caseFold = options.caseFold;\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options;\n      options = null;\n    }\n\n    if (typeof query === 'string') {\n      if (caseFold == null) caseFold = false;\n      this.matches = function (reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold);\n      };\n    } else {\n      query = ensureFlags(query, 'gm');\n      if (!options || options.multiline !== false) {\n        this.matches = function (reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      }\n      else {\n        this.matches = function (reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n      };\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext() {\n      return this.find(false)\n    },\n    findPrevious() {\n      return this.find(true)\n    },\n\n    find(reverse) {\n      var result = this.matches(reverse, this.doc.clipPos(reverse ? this.pos.from : this.pos.to))\n\n      // Implements weird auto-growing behavior on null-matches for\n      // backwards-compatiblity with the vim code (unfortunately)\n      while (result && CodeMirror.cmpPos(result.from, result.to) == 0) {\n        if (reverse) {\n          if (result.from.ch) result.from = Pos(result.from.line, result.from.ch - 1)\n          else if (result.from.line == this.doc.firstLine()) result = null\n          else result = this.matches(reverse, this.doc.clipPos(Pos(result.from.line - 1)))\n        } else {\n          if (result.to.ch < this.doc.getLine(result.to.line)\n            .length) result.to = Pos(result.to.line, result.to.ch + 1)\n          else if (result.to.line == this.doc.lastLine()) result = null\n          else result = this.matches(reverse, Pos(result.to.line + 1, 0))\n        }\n      }\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {\n          from: end,\n          to: end\n        }\n        return this.atOccurrence = false\n      }\n    },\n\n    from() {\n      if (this.atOccurrence) return this.pos.from\n    },\n    to() {\n      if (this.atOccurrence) return this.pos.to\n    },\n\n    replace(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    },\n  };\n\n  CodeMirror.defineExtension('getSearchCursor', function (query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold);\n  });\n  CodeMirror.defineDocExtension('getSearchCursor', function (query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold);\n  });\n\n  CodeMirror.defineExtension('selectMatches', function (query, caseFold) {\n    let ranges = [];\n    let cur = this.getSearchCursor(query, this.getCursor('from'), caseFold);\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor('to')) > 0) break;\n      ranges.push({\n        anchor: cur.from(),\n        head: cur.to(),\n      });\n    }\n    if (ranges.length) {\n      this.setSelections(ranges, 0)\n    };\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addFoldcode(CodeMirror) {\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, 'rangeFinder');\n    }\n    if (typeof pos === 'number') pos = CodeMirror.Pos(pos, 0);\n    const minSize = getOption(cm, options, 'minFoldSize');\n\n    function getRange(allowFolded) {\n      const range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      const marks = cm.findMarksAt(range.from);\n      for (let i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold && force !== 'fold') {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    let range = getRange(true);\n    if (getOption(cm, options, 'scanUp')) {\n      while (!range && pos.line > cm.firstLine()) {\n        pos = CodeMirror.Pos(pos.line - 1, 0);\n        range = getRange(false);\n      }\n    }\n    if (!range || range.cleared || force === 'unfold') return;\n\n    const myWidget = makeWidget(cm, options);\n    CodeMirror.on(myWidget, 'mousedown', (e) => {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, 'clearOnEnter'),\n      __isFold: true,\n    });\n    myRange.on('clear', (from, to) => {\n      CodeMirror.signal(cm, 'unfold', cm, from, to);\n    });\n    CodeMirror.signal(cm, 'fold', cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options) {\n    let widget = getOption(cm, options, 'widget');\n    if (typeof widget === 'string') {\n      const text = document.createTextNode(widget);\n      widget = document.createElement('span');\n      widget.appendChild(text);\n      widget.className = 'CodeMirror-foldmarker';\n    } else if (widget) {\n      widget = widget.cloneNode(true);\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function (rangeFinder, widget) {\n    return function (cm, pos) {\n      doFold(cm, pos, {\n        rangeFinder,\n        widget,\n      });\n    };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension('foldCode', function (pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension('isFolded', function (pos) {\n    const marks = this.findMarksAt(pos);\n    for (let i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) return true;\n    }\n  });\n\n  CodeMirror.commands.toggleFold = function (cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function (cm) {\n    cm.foldCode(cm.getCursor(), null, 'fold');\n  };\n  CodeMirror.commands.unfold = function (cm) {\n    cm.foldCode(cm.getCursor(), null, 'unfold');\n  };\n  CodeMirror.commands.foldAll = function (cm) {\n    cm.operation(() => {\n      for (let i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {\n        cm.foldCode(CodeMirror.Pos(i, 0), null, 'fold');\n      }\n    });\n  };\n  CodeMirror.commands.unfoldAll = function (cm) {\n    cm.operation(() => {\n      for (let i = cm.firstLine(), e = cm.lastLine(); i <= e; i++) {\n        cm.foldCode(CodeMirror.Pos(i, 0), null, 'unfold');\n      }\n    });\n  };\n\n  CodeMirror.registerHelper('fold', 'combine', function () {\n    const funcs = Array.prototype.slice.call(arguments, 0);\n    return function (cm, start) {\n      for (let i = 0; i < funcs.length; ++i) {\n        const found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper('fold', 'auto', (cm, start) => {\n    const helpers = cm.getHelpers(start, 'fold');\n    for (let i = 0; i < helpers.length; i++) {\n      const cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  const defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: '\\u2194',\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true,\n  };\n\n  CodeMirror.defineOption('foldOptions', null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined) {\n      return options[name];\n    }\n    const editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined) {\n      return editorOptions[name];\n    }\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension('foldOption', function (options, name) {\n    return getOption(this, options, name);\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addClosebrackets(CodeMirror) {\n\n  const defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    closeBefore: \")]}'\\\":;>\",\n    triples: '',\n    explode: '[]{}',\n  };\n\n  const Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption('autoCloseBrackets', false, (cm, val, old) => {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, 'pairs'));\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == 'pairs' && typeof conf === 'string') return conf;\n    if (typeof conf === 'object' && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {\n    Backspace: handleBackspace,\n    Enter: handleEnter,\n  };\n\n  function ensureBound(chars) {\n    for (let i = 0; i < chars.length; i++) {\n      const ch = chars.charAt(i);\n      const key = \"'\" + ch + \"'\";\n      if (!keyMap[key]) keyMap[key] = handler(ch);\n    }\n  }\n  ensureBound(defaults.pairs + '`');\n\n  function handler(ch) {\n    return function (cm) {\n      return handleChar(cm, ch);\n    };\n  }\n\n  function getConfig(cm) {\n    const deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    const mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    const conf = getConfig(cm);\n    if (!conf || cm.getOption('disableInput')) return CodeMirror.Pass;\n\n    const pairs = getOption(conf, 'pairs');\n    const ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      const around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      const cur = ranges[i].head;\n      cm.replaceRange('', Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), '+delete');\n    }\n  }\n\n  function handleEnter(cm) {\n    const conf = getConfig(cm);\n    const explode = conf && getOption(conf, 'explode');\n    if (!explode || cm.getOption('disableInput')) return CodeMirror.Pass;\n\n    let ranges = cm.listSelections();\n    for (let i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      const around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(() => {\n      const linesep = cm.lineSeparator() || '\\n';\n      cm.replaceSelection(linesep + linesep, null);\n      cm.execCommand('goCharLeft');\n      ranges = cm.listSelections();\n      for (let i = 0; i < ranges.length; i++) {\n        const line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    const inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {\n      anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n      head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1)),\n    };\n  }\n\n  function handleChar(cm, ch) {\n    const conf = getConfig(cm);\n    if (!conf || cm.getOption('disableInput')) return CodeMirror.Pass;\n\n    const pairs = getOption(conf, 'pairs');\n    const pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n\n    const closeBefore = getOption(conf, 'closeBefore');\n\n    const triples = getOption(conf, 'triples');\n\n    const identical = pairs.charAt(pos + 1) == ch;\n    const ranges = cm.listSelections();\n    const opening = pos % 2 == 0;\n\n    let type;\n    for (let i = 0; i < ranges.length; i++) {\n      const range = ranges[i];\n      const cur = range.head;\n      var curType;\n      const next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = 'surround';\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur)) {\n          curType = 'both';\n        } else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch) {\n          curType = 'skipThree';\n        } else {\n          curType = 'skip';\n        }\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0\n        && cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch) {\n        if (cur.ch > 2 && /\\bstring/.test(cm.getTokenTypeAt(Pos(cur.line, cur.ch - 2)))) return CodeMirror.Pass;\n        curType = 'addFour';\n      } else if (identical) {\n        const prev = cur.ch == 0 ? ' ' : cm.getRange(Pos(cur.line, cur.ch - 1), cur);\n        if (!CodeMirror.isWordChar(next) && prev != ch && !CodeMirror.isWordChar(prev)) curType = 'both';\n        else return CodeMirror.Pass;\n      } else if (opening && (next.length === 0 || /\\s/.test(next) || closeBefore.indexOf(next) > -1)) {\n        curType = 'both';\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    const left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    const right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(() => {\n      if (type == 'skip') {\n        cm.execCommand('goCharRight');\n      } else if (type == 'skipThree') {\n        for (var i = 0; i < 3; i++) {\n          cm.execCommand('goCharRight');\n        }\n      } else if (type == 'surround') {\n        let sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++) {\n          sels[i] = left + sels[i] + right;\n        }\n        cm.replaceSelections(sels, 'around');\n        sels = cm.listSelections()\n          .slice();\n        for (var i = 0; i < sels.length; i++) {\n          sels[i] = contractSelection(sels[i]);\n        }\n        cm.setSelections(sels);\n      } else if (type == 'both') {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand('goCharLeft');\n      } else if (type == 'addFour') {\n        cm.replaceSelection(left + left + left + left, 'before');\n        cm.execCommand('goCharRight');\n      }\n    });\n  }\n\n  function charsAround(cm, pos) {\n    const str = cm.getRange(Pos(pos.line, pos.ch - 1),\n      Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  function stringStartsAfter(cm, pos) {\n    const token = cm.getTokenAt(Pos(pos.line, pos.ch + 1));\n    return /\\bstring/.test(token.type) && token.start == pos.ch\n      && (pos.ch == 0 || !/\\bstring/.test(cm.getTokenTypeAt(pos)));\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n/**\n * Tag-closer extension for CodeMirror.\n *\n * This extension adds an \"autoCloseTags\" option that can be set to\n * either true to get the default behavior, or an object to further\n * configure its behavior.\n *\n * These are supported options:\n *\n * `whenClosing` (default true)\n *   Whether to autoclose when the '/' of a closing tag is typed.\n * `whenOpening` (default true)\n *   Whether to autoclose the tag when the final '>' of an opening\n *   tag is typed.\n * `dontCloseTags` (default is empty tags for HTML, none for XML)\n *   An array of tag names that should not be autoclosed.\n * `indentTags` (default is block tags for HTML, none for XML)\n *   An array of tag names that should, when opened, cause a\n *   blank line to be added inside the tag, and the blank line and\n *   closing line to be indented.\n * `emptyTags` (default is none)\n *   An array of XML tag names that should be autoclosed with '/>'.\n *\n * See demos/closetag.html for a usage example.\n */\n\nexport function addClosetag(CodeMirror) {\n\n  CodeMirror.defineOption('autoCloseTags', false, (cm, val, old) => {\n    if (old != CodeMirror.Init && old) {\n      cm.removeKeyMap('autoCloseTags');\n    }\n    if (!val) return;\n    const map = {\n      name: 'autoCloseTags',\n    };\n    if (typeof val !== 'object' || val.whenClosing) {\n      map[\"'/'\"] = function (cm) {\n        return autoCloseSlash(cm);\n      };\n    }\n    if (typeof val !== 'object' || val.whenOpening) {\n      map[\"'>'\"] = function (cm) {\n        return autoCloseGT(cm);\n      };\n    }\n    cm.addKeyMap(map);\n  });\n\n  const htmlDontClose = ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input', 'keygen', 'link',\n    'meta', 'param',\n    'source', 'track', 'wbr'];\n  const htmlIndent = ['applet', 'blockquote', 'body', 'button', 'div', 'dl', 'fieldset', 'form', 'frameset', 'h1',\n    'h2', 'h3', 'h4',\n    'h5', 'h6', 'head', 'html', 'iframe', 'layer', 'legend', 'object', 'ol', 'p', 'select', 'table', 'ul'];\n\n  function autoCloseGT(cm) {\n    if (cm.getOption('disableInput')) return CodeMirror.Pass;\n    const ranges = cm.listSelections();\n    const replacements = [];\n    const opt = cm.getOption('autoCloseTags');\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      const pos = ranges[i].head;\n      const tok = cm.getTokenAt(pos);\n      const inner = CodeMirror.innerMode(cm.getMode(), tok.state);\n      const state = inner.state;\n      if (inner.mode.name != 'xml' || !state.tagName) return CodeMirror.Pass;\n\n      const html = inner.mode.configuration == 'html';\n      const dontCloseTags = (typeof opt === 'object' && opt.dontCloseTags) || (html && htmlDontClose);\n      const indentTags = (typeof opt === 'object' && opt.indentTags) || (html && htmlIndent);\n\n      let tagName = state.tagName;\n      if (tok.end > pos.ch) tagName = tagName.slice(0, tagName.length - tok.end + pos.ch);\n      const lowerTagName = tagName.toLowerCase();\n      // Don't process the '>' at the end of an end-tag or self-closing tag\n      if (!tagName ||\n        tok.type == 'string' && (tok.end != pos.ch || !/[\\\"\\']/.test(tok.string.charAt(tok.string.length - 1)) ||\n          tok.string.length == 1) ||\n        tok.type == 'tag' && state.type == 'closeTag' ||\n        tok.string.indexOf('/') == (tok.string.length - 1) // match something like <someTagName />\n        ||\n        dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 ||\n        closingTagExists(cm, tagName, pos, state, true)) {\n        return CodeMirror.Pass;\n      }\n\n      const emptyTags = typeof opt === 'object' && opt.emptyTags;\n      if (emptyTags && indexOf(emptyTags, tagName) > -1) {\n        replacements[i] = {\n          text: '/>',\n          newPos: CodeMirror.Pos(pos.line, pos.ch + 2),\n        };\n        continue;\n      }\n\n      const indent = indentTags && indexOf(indentTags, lowerTagName) > -1;\n      replacements[i] = {\n        indent,\n        text: '>' + (indent ? '\\n\\n' : '') + '</' + tagName + '>',\n        newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1),\n      };\n    }\n\n    const dontIndentOnAutoClose = (typeof opt === 'object' && opt.dontIndentOnAutoClose);\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      const info = replacements[i];\n      cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, '+insert');\n      const sel = cm.listSelections()\n        .slice(0);\n      sel[i] = {\n        head: info.newPos,\n        anchor: info.newPos,\n      };\n      cm.setSelections(sel);\n      if (!dontIndentOnAutoClose && info.indent) {\n        cm.indentLine(info.newPos.line, null, true);\n        cm.indentLine(info.newPos.line + 1, null, true);\n      }\n    }\n  }\n\n  function autoCloseCurrent(cm, typingSlash) {\n    let ranges = cm.listSelections();\n    const replacements = [];\n    const head = typingSlash ? '/' : '</';\n    const opt = cm.getOption('autoCloseTags');\n    const dontIndentOnAutoClose = (typeof opt === 'object' && opt.dontIndentOnSlash);\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      const pos = ranges[i].head;\n      const tok = cm.getTokenAt(pos);\n      const inner = CodeMirror.innerMode(cm.getMode(), tok.state);\n      const state = inner.state;\n      if (typingSlash && (tok.type == 'string' || tok.string.charAt(0) != '<' ||\n        tok.start != pos.ch - 1)) {\n        return CodeMirror.Pass;\n      }\n      // Kludge to get around the fact that we are not in XML mode\n      // when completing in JS/CSS snippet in htmlmixed mode. Does not\n      // work for other XML embedded languages (there is no general\n      // way to go from a mixed mode to its current XML state).\n      var replacement;\n      if (inner.mode.name != 'xml') {\n        if (cm.getMode()\n          .name == 'htmlmixed' && inner.mode.name == 'javascript') {\n          replacement = head + 'script';\n        } else if (cm.getMode()\n          .name == 'htmlmixed' && inner.mode.name == 'css') {\n          replacement = head + 'style';\n        } else {\n          return CodeMirror.Pass;\n        }\n      } else {\n        if (!state.context || !state.context.tagName ||\n          closingTagExists(cm, state.context.tagName, pos, state)) {\n          return CodeMirror.Pass;\n        }\n        replacement = head + state.context.tagName;\n      }\n      if (cm.getLine(pos.line)\n        .charAt(tok.end) != '>') replacement += '>';\n      replacements[i] = replacement;\n    }\n    cm.replaceSelections(replacements);\n    ranges = cm.listSelections();\n    if (!dontIndentOnAutoClose) {\n      for (var i = 0; i < ranges.length; i++) {\n        if (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) {\n          cm.indentLine(ranges[i].head.line);\n        }\n      }\n    }\n  }\n\n  function autoCloseSlash(cm) {\n    if (cm.getOption('disableInput')) return CodeMirror.Pass;\n    return autoCloseCurrent(cm, true);\n  }\n\n  CodeMirror.commands.closeTag = function (cm) {\n    return autoCloseCurrent(cm);\n  };\n\n  function indexOf(collection, elt) {\n    if (collection.indexOf) return collection.indexOf(elt);\n    for (let i = 0, e = collection.length; i < e; ++i) {\n      if (collection[i] == elt) return i;\n    }\n    return -1;\n  }\n\n  // If xml-fold is loaded, we use its functionality to try and verify\n  // whether a given tag is actually unclosed.\n  function closingTagExists(cm, tagName, pos, state, newTag) {\n    if (!CodeMirror.scanForClosingTag) return false;\n    const end = Math.min(cm.lastLine() + 1, pos.line + 500);\n    const nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);\n    if (!nextClose || nextClose.tag != tagName) return false;\n    let cx = state.context;\n    // If the immediate wrapping context contains onCx instances of\n    // the same tag, a closing tag only exists if there are at least\n    // that many closing tags of that type following.\n    for (var onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) ++onCx;\n    pos = nextClose.to;\n    for (let i = 1; i < onCx; i++) {\n      const next = CodeMirror.scanForClosingTag(cm, pos, null, end);\n      if (!next || next.tag != tagName) return false;\n      pos = next.to;\n    }\n    return true;\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addShowhint(CodeMirror) {\n\n  const HINT_ELEMENT_CLASS = 'CodeMirror-hint';\n  const ACTIVE_HINT_ELEMENT_CLASS = 'CodeMirror-hint-active';\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function (cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    const newOpts = {\n      hint: getHints,\n    };\n    if (options) {\n      for (const prop in options) newOpts[prop] = options[prop];\n    }\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension('showHint', function (options) {\n    options = parseOptions(this, this.getCursor('start'), options);\n    const selections = this.listSelections();\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (let i = 0; i < selections.length; i++) {\n        if (selections[i].head.line != selections[i].anchor.line) return;\n      }\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    const completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, 'startCompletion', this);\n    completion.update(true);\n  });\n\n  CodeMirror.defineExtension('closeHint', function () {\n    if (this.state.completionActive) this.state.completionActive.close();\n  });\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor('start');\n    this.startLen = this.cm.getLine(this.startPos.line)\n      .length - this.cm.getSelection()\n        .length;\n\n    const self = this;\n    cm.on('cursorActivity', this.activityFunc = function () {\n      self.cursorActivity();\n    });\n  }\n\n  const requestAnimationFrame = window.requestAnimationFrame || function (fn) {\n    return setTimeout(fn, 1000 / 60);\n  };\n  const cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      this.cm.off('cursorActivity', this.activityFunc);\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, 'close');\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, 'endCompletion', this.cm);\n    },\n\n    active() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick(data, i) {\n      const completion = data.list[i];\n      if (completion.hint) completion.hint(this.cm, data, completion);\n      else {\n        this.cm.replaceRange(getText(completion), completion.from || data.from,\n          completion.to || data.to, 'complete');\n      }\n      CodeMirror.signal(data, 'pick', completion);\n      this.close();\n    },\n\n    cursorActivity() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      const pos = this.cm.getCursor();\n      const line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch\n        || pos.ch < this.startPos.ch || this.cm.somethingSelected()\n        || (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        const self = this;\n        this.debounce = requestAnimationFrame(() => {\n          self.update();\n        });\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update(first) {\n      if (this.tick == null) return;\n      const self = this;\n      const myTick = ++this.tick;\n      fetchHints(this.options.hint, this.cm, this.options, (data) => {\n        if (self.tick == myTick) self.finishUpdate(data, first);\n      });\n    },\n\n    finishUpdate(data, first) {\n      if (this.data) CodeMirror.signal(this.data, 'update');\n\n      const picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, 'shown');\n        }\n      }\n    },\n  };\n\n  function parseOptions(cm, pos, options) {\n    const editor = cm.options.hintOptions;\n    const out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) {\n      for (var prop in editor) {\n        if (editor[prop] !== undefined) out[prop] = editor[prop];\n      }\n    }\n    if (options) {\n      for (var prop in options) {\n        if (options[prop] !== undefined) out[prop] = options[prop];\n      }\n    }\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos);\n    return out;\n  }\n\n  function getText(completion) {\n    if (typeof completion === 'string') return completion;\n    return completion.text;\n  }\n\n  function buildKeyMap(completion, handle) {\n    const baseMap = {\n      Up() {\n        handle.moveFocus(-1);\n      },\n      Down() {\n        handle.moveFocus(1);\n      },\n      PageUp() {\n        handle.moveFocus(-handle.menuSize() + 1, true);\n      },\n      PageDown() {\n        handle.moveFocus(handle.menuSize() - 1, true);\n      },\n      Home() {\n        handle.setFocus(0);\n      },\n      End() {\n        handle.setFocus(handle.length - 1);\n      },\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close,\n    };\n\n    const mac = /Mac/.test(navigator.platform);\n\n    if (mac) {\n      baseMap['Ctrl-P'] = function () {\n        handle.moveFocus(-1);\n      };\n      baseMap['Ctrl-N'] = function () {\n        handle.moveFocus(1);\n      };\n    }\n\n    const custom = completion.options.customKeys;\n    const ourMap = custom ? {} : baseMap;\n\n    function addBinding(key, val) {\n      let bound;\n      if (typeof val !== 'string') {\n        bound = function (cm) {\n          return val(cm, handle);\n        };\n      }\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val)) {\n        bound = baseMap[val];\n      } else {\n        bound = val;\n      }\n      ourMap[key] = bound;\n    }\n    if (custom) {\n      for (var key in custom) {\n        if (custom.hasOwnProperty(key)) {\n          addBinding(key, custom[key]);\n        }\n      }\n    }\n    const extra = completion.options.extraKeys;\n    if (extra) {\n      for (var key in extra) {\n        if (extra.hasOwnProperty(key)) {\n          addBinding(key, extra[key]);\n        }\n      }\n    }\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === 'LI' && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function Widget(completion, data) {\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    const widget = this;\n    const cm = completion.cm;\n    const ownerDocument = cm.getInputField()\n      .ownerDocument;\n    const parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;\n\n    const hints = this.hints = ownerDocument.createElement('ul');\n    const theme = completion.cm.options.theme;\n    hints.className = 'CodeMirror-hints ' + theme;\n    this.selectedHint = data.selectedHint || 0;\n\n    const completions = data.list;\n    for (let i = 0; i < completions.length; ++i) {\n      const elt = hints.appendChild(ownerDocument.createElement('li'));\n      const cur = completions[i];\n      let className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? '' : ' ' + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + ' ' + className;\n      elt.className = className;\n      if (cur.render) cur.render(elt, data, cur);\n      else elt.appendChild(ownerDocument.createTextNode(cur.displayText || getText(cur)));\n      elt.hintId = i;\n    }\n\n    const container = completion.options.container || ownerDocument.body;\n    let pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    let left = pos.left;\n    let top = pos.bottom;\n    let below = true;\n    let offsetLeft = 0;\n    let offsetTop = 0;\n    if (container !== ownerDocument.body) {\n      // We offset the cursor position because left and top are relative to the offsetParent's top left corner.\n      const isContainerPositioned = ['absolute', 'relative', 'fixed'].indexOf(parentWindow.getComputedStyle(\n        container,\n      )\n        .position) !== -1;\n      const offsetParent = isContainerPositioned ? container : container.offsetParent;\n      const offsetParentPosition = offsetParent.getBoundingClientRect();\n      const bodyPosition = ownerDocument.body.getBoundingClientRect();\n      offsetLeft = (offsetParentPosition.left - bodyPosition.left - offsetParent.scrollLeft);\n      offsetTop = (offsetParentPosition.top - bodyPosition.top - offsetParent.scrollTop);\n    }\n    hints.style.left = (left - offsetLeft) + 'px';\n    hints.style.top = (top - offsetTop) + 'px';\n\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    const winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement\n      .offsetWidth);\n    const winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement\n      .offsetHeight);\n    container.appendChild(hints);\n    let box = hints.getBoundingClientRect();\n    const overlapY = box.bottom - winH;\n    const scrolls = hints.scrollHeight > hints.clientHeight + 1;\n    const startScroll = cm.getScrollInfo();\n\n    if (overlapY > 0) {\n      const height = box.bottom - box.top;\n      const curTop = pos.top - (pos.bottom - box.top);\n      if (curTop - height > 0) { // Fits above cursor\n        hints.style.top = (top = pos.top - height - offsetTop) + 'px';\n        below = false;\n      } else if (height > winH) {\n        hints.style.height = (winH - 5) + 'px';\n        hints.style.top = (top = pos.bottom - box.top - offsetTop) + 'px';\n        const cursor = cm.getCursor();\n        if (data.from.ch != cursor.ch) {\n          pos = cm.cursorCoords(cursor);\n          hints.style.left = (left = pos.left - offsetLeft) + 'px';\n          box = hints.getBoundingClientRect();\n        }\n      }\n    }\n    let overlapX = box.right - winW;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + 'px';\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = pos.left - overlapX - offsetLeft) + 'px';\n    }\n    if (scrolls) {\n      for (let node = hints.firstChild; node; node = node.nextSibling) {\n        node.style.paddingRight = cm.display.nativeBarWidth + 'px';\n      }\n    }\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus(n, avoidWrap) {\n        widget.changeActive(widget.selectedHint + n, avoidWrap);\n      },\n      setFocus(n) {\n        widget.changeActive(n);\n      },\n      menuSize() {\n        return widget.screenAmount();\n      },\n      length: completions.length,\n      close() {\n        completion.close();\n      },\n      pick() {\n        widget.pick();\n      },\n      data,\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      let closingOnBlur;\n      cm.on('blur', this.onBlur = function () {\n        closingOnBlur = setTimeout(() => {\n          completion.close();\n        }, 100);\n      });\n      cm.on('focus', this.onFocus = function () {\n        clearTimeout(closingOnBlur);\n      });\n    }\n\n    cm.on('scroll', this.onScroll = function () {\n      const curScroll = cm.getScrollInfo();\n      const editor = cm.getWrapperElement()\n        .getBoundingClientRect();\n      const newTop = top + startScroll.top - curScroll.top;\n      let point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body)\n        .scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + 'px';\n      hints.style.left = (left + startScroll.left - curScroll.left) + 'px';\n    });\n\n    CodeMirror.on(hints, 'dblclick', (e) => {\n      const t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, 'click', (e) => {\n      const t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, 'mousedown', () => {\n      setTimeout(() => {\n        cm.focus();\n      }, 20);\n    });\n\n    CodeMirror.signal(data, 'select', completions[this.selectedHint], hints.childNodes[this.selectedHint]);\n    return true;\n  }\n\n  Widget.prototype = {\n    close() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n\n      const cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off('blur', this.onBlur);\n        cm.off('focus', this.onFocus);\n      }\n      cm.off('scroll', this.onScroll);\n    },\n\n    disable() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      const widget = this;\n      this.keyMap = {\n        Enter() {\n          widget.picked = true;\n        },\n      };\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive(i, avoidWrap) {\n      if (i >= this.data.list.length) {\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      } else if (i < 0) {\n        i = avoidWrap ? 0 : this.data.list.length - 1;\n      }\n      if (this.selectedHint == i) return;\n      let node = this.hints.childNodes[this.selectedHint];\n      if (node) node.className = node.className.replace(' ' + ACTIVE_HINT_ELEMENT_CLASS, '');\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += ' ' + ACTIVE_HINT_ELEMENT_CLASS;\n      if (node.offsetTop < this.hints.scrollTop) {\n        this.hints.scrollTop = node.offsetTop - 3;\n      } else if (node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight) {\n        this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3;\n      }\n      CodeMirror.signal(this.data, 'select', this.data.list[this.selectedHint], node);\n    },\n\n    screenAmount() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    },\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers;\n    const result = [];\n    for (let i = 0; i < helpers.length; i++) {\n      if (helpers[i].supportsSelection) result.push(helpers[i]);\n    }\n    return result;\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options);\n    } else {\n      const result = hint(cm, options);\n      if (result && result.then) result.then(callback);\n      else callback(result);\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    const helpers = cm.getHelpers(pos, 'hint');\n    let words;\n    if (helpers.length) {\n      const resolved = function (cm, callback, options) {\n        const app = applicableHelpers(cm, helpers);\n\n        function run(i) {\n          if (i == app.length) return callback(null);\n          fetchHints(app[i], cm, options, (result) => {\n            if (result && result.list.length > 0) callback(result);\n            else run(i + 1);\n          });\n        }\n        run(0);\n      };\n      resolved.async = true;\n      resolved.supportsSelection = true;\n      return resolved;\n    }\n    if (words = cm.getHelper(cm.getCursor(), 'hintWords')) {\n      return function (cm) {\n        return CodeMirror.hint.fromList(cm, {\n          words,\n        });\n      };\n    }\n    if (CodeMirror.hint.anyword) {\n      return function (cm, options) {\n        return CodeMirror.hint.anyword(cm, options);\n      };\n    }\n    return function () { };\n\n  }\n\n  CodeMirror.registerHelper('hint', 'auto', {\n    resolve: resolveAutoHints,\n  });\n\n  CodeMirror.registerHelper('hint', 'fromList', (cm, options) => {\n    const cur = cm.getCursor();\n    const token = cm.getTokenAt(cur);\n    let term;\n    let from = CodeMirror.Pos(cur.line, token.start);\n    const to = cur;\n    if (token.start < cur.ch && /\\w/.test(token.string.charAt(cur.ch - token.start - 1))) {\n      term = token.string.substr(0, cur.ch - token.start);\n    } else {\n      term = '';\n      from = cur;\n    }\n    const found = [];\n    for (let i = 0; i < options.words.length; i++) {\n      const word = options.words[i];\n      if (word.slice(0, term.length) == term) {\n        found.push(word);\n      }\n    }\n\n    if (found.length) {\n      return {\n        list: found,\n        from,\n        to,\n      };\n    }\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnUnfocus: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null,\n  };\n\n  CodeMirror.defineOption('hintOptions', null);\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addJShint(CodeMirror) {\n\n  const Pos = CodeMirror.Pos;\n\n  function forEach(arr, f) {\n    for (let i = 0, e = arr.length; i < e; ++i) f(arr[i]);\n  }\n\n  function arrayContains(arr, item) {\n    if (!Array.prototype.indexOf) {\n      let i = arr.length;\n      while (i--) {\n        if (arr[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return arr.indexOf(item) != -1;\n  }\n\n  function scriptHint(editor, keywords, getToken, options) {\n    // Find the token at the cursor\n    const cur = editor.getCursor();\n    let token = getToken(editor, cur);\n    if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n    const innerMode = CodeMirror.innerMode(editor.getMode(), token.state);\n    if (innerMode.mode.helperType === 'json') return;\n    token.state = innerMode.state;\n\n    // If it's not a 'word-style' token, ignore the token.\n    if (!/^[\\w$_]*$/.test(token.string)) {\n      token = {\n        start: cur.ch,\n        end: cur.ch,\n        string: '',\n        state: token.state,\n        type: token.string == '.' ? 'property' : null,\n      };\n    } else if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n\n    let tprop = token;\n    // If it is a property, find out what it is a property of.\n    while (tprop.type == 'property') {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string != '.') return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (!context) var context = [];\n      context.push(tprop);\n    }\n    return {\n      list: getCompletions(token, context, keywords, options),\n      from: Pos(cur.line, token.start),\n      to: Pos(cur.line, token.end),\n    };\n  }\n\n  function javascriptHint(editor, options) {\n    return scriptHint(editor, javascriptKeywords,\n      (e, cur) => {\n        return e.getTokenAt(cur);\n      },\n      options);\n  }\n  CodeMirror.registerHelper('hint', 'javascript', javascriptHint);\n\n  function getCoffeeScriptToken(editor, cur) {\n    // This getToken, it is for coffeescript, imitates the behavior of\n    // getTokenAt method in javascript.js, that is, returning \"property\"\n    // type and treat \".\" as indepenent token.\n    const token = editor.getTokenAt(cur);\n    if (cur.ch == token.start + 1 && token.string.charAt(0) == '.') {\n      token.end = token.start;\n      token.string = '.';\n      token.type = 'property';\n    } else if (/^\\.[\\w$_]*$/.test(token.string)) {\n      token.type = 'property';\n      token.start++;\n      token.string = token.string.replace(/\\./, '');\n    }\n    return token;\n  }\n\n  function coffeescriptHint(editor, options) {\n    return scriptHint(editor, coffeescriptKeywords, getCoffeeScriptToken, options);\n  }\n  CodeMirror.registerHelper('hint', 'coffeescript', coffeescriptHint);\n\n  const stringProps = ('charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight '\n    + 'toUpperCase toLowerCase split concat match replace search')\n    .split(' ');\n  const arrayProps = ('length concat join splice push pop shift unshift slice reverse sort indexOf '\n    + 'lastIndexOf every some filter forEach map reduce reduceRight ')\n    .split(' ');\n  const funcProps = 'prototype apply call bind'.split(' ');\n  var javascriptKeywords = (\n    'break case catch class const continue debugger default delete do else export extends false finally for function '\n    + 'if in import instanceof new null return super switch this throw true try typeof var void while with yield')\n    .split(' ');\n  var coffeescriptKeywords = ('and break catch class continue delete do else extends false finally for '\n    + 'if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes'\n  )\n    .split(' ');\n\n  function forAllProps(obj, callback) {\n    if (!Object.getOwnPropertyNames || !Object.getPrototypeOf) {\n      for (const name in obj) callback(name);\n    } else {\n      for (let o = obj; o; o = Object.getPrototypeOf(o)) {\n        Object.getOwnPropertyNames(o)\n          .forEach(callback);\n\n      }\n    }\n  }\n\n  function getCompletions(token, context, keywords, options) {\n    const found = [];\n    const start = token.string;\n    const global = options && options.globalScope || window;\n\n    function maybeAdd(str) {\n      if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str)) found.push(str);\n    }\n\n    function gatherCompletions(obj) {\n      if (typeof obj === 'string') forEach(stringProps, maybeAdd);\n      else if (obj instanceof Array) forEach(arrayProps, maybeAdd);\n      else if (obj instanceof Function) forEach(funcProps, maybeAdd);\n      forAllProps(obj, maybeAdd);\n    }\n\n    if (context && context.length) {\n      // If this is a property, see if it belongs to some object we can\n      // find in the current environment.\n      const obj = context.pop();\n      let base;\n      if (obj.type && obj.type.indexOf('variable') === 0) {\n        if (options && options.additionalContext) { base = options.additionalContext[obj.string]; }\n        if (!options || options.useGlobalScope !== false) { base = base || global[obj.string]; }\n      } else if (obj.type == 'string') {\n        base = '';\n      } else if (obj.type == 'atom') {\n        base = 1;\n      } else if (obj.type == 'function') {\n        if (global.jQuery != null && (obj.string == '$' || obj.string == 'jQuery')\n          && (typeof global.jQuery === 'function')) { base = global.jQuery(); } else if (global._ != null && (obj.string == '_') && (typeof global._ === 'function')) { base = global._(); }\n      }\n      while (base != null && context.length) {\n        base = base[context.pop()\n          .string];\n      }\n      if (base != null) gatherCompletions(base);\n    } else {\n      // If not, just look in the global object and any local scope\n      // (reading into JS mode internals to get at the local and global variables)\n      for (var v = token.state.localVars; v; v = v.next) maybeAdd(v.name);\n      for (var v = token.state.globalVars; v; v = v.next) maybeAdd(v.name);\n      if (!options || options.useGlobalScope !== false) { gatherCompletions(global); }\n      forEach(keywords, maybeAdd);\n    }\n    return found;\n  }\n}\n","import CodeMirror from 'codemirror';\r\n// import CodeMirror from '../vendor/codemirror/codemirror.js';\r\n\r\n// import { addMetaMode } from '../vendor/custom/CodeMirrorES6/modes/meta.js';\r\nimport { addHTMLMixedMode } from '../vendor/custom/CodeMirrorES6/modes/htmlmixed/htmlmixed.js';\r\nimport { addCSSMode } from '../vendor/custom/CodeMirrorES6/modes/css/css.js';\r\nimport { addXMLMode } from '../vendor/custom/CodeMirrorES6/modes/xml/xml.js';\r\nimport { addJavaScriptMode } from '../vendor/custom/CodeMirrorES6/modes/javascript/javascript.js';\r\n\r\n// import { addSimpleScrollbar } from '../vendor/custom/CodeMirrorES6/addons/scroll/simplescrollbars.js';\r\nimport { addAnnotateScrollbar } from '../vendor/custom/CodeMirrorES6/addons/scroll/annotatescrollbar.js';\r\n\r\nimport { addComment } from '../vendor/custom/CodeMirrorES6/addons/comment/comment.js';\r\nimport { addFullscreen } from '../vendor/custom/CodeMirrorES6/addons/display/fullscreen.js';\r\n// import { addAutorefresh } from '../vendor/custom/CodeMirrorES6/addons/display/autorefresh.js';\r\n\r\nimport { addActiveLine } from '../vendor/custom/CodeMirrorES6/addons/selection/active-line.js';\r\n\r\nimport { addDialog } from '../vendor/custom/CodeMirrorES6/addons/dialog/dialog.js';\r\nimport { addJumptoline } from '../vendor/custom/CodeMirrorES6/addons/search/jump-to-line.js';\r\nimport { addMatchhighlighter } from '../vendor/custom/CodeMirrorES6/addons/search/match-highlighter.js';\r\nimport { addMatchesonscroll } from '../vendor/custom/CodeMirrorES6/addons/search/matchesonscrollbar.js';\r\nimport { addSearch } from '../vendor/custom/CodeMirrorES6/addons/search/search.js';\r\nimport { addSearchcursor } from '../vendor/custom/CodeMirrorES6/addons/search/searchcursor.js';\r\n\r\nimport { addFoldcode } from '../vendor/custom/CodeMirrorES6/addons/fold/foldcode.js';\r\nimport { addBracefold } from '../vendor/custom/CodeMirrorES6/addons/fold/brace-fold.js';\r\nimport { addCommentfold } from '../vendor/custom/CodeMirrorES6/addons/fold/comment-fold.js';\r\nimport { addFoldgutter } from '../vendor/custom/CodeMirrorES6/addons/fold/foldgutter.js';\r\nimport { addIndentfold } from '../vendor/custom/CodeMirrorES6/addons/fold/indent-fold.js';\r\nimport { addXmlfold } from '../vendor/custom/CodeMirrorES6/addons/fold/xml-fold.js';\r\n\r\nimport { addClosebrackets } from '../vendor/custom/CodeMirrorES6/addons/edit/closebrackets.js';\r\nimport { addClosetag } from '../vendor/custom/CodeMirrorES6/addons/edit/closetag.js';\r\n\r\nimport { addShowhint } from '../vendor/custom/CodeMirrorES6/addons/hint/show-hint.js';\r\nimport { addAnywordhint } from '../vendor/custom/CodeMirrorES6/addons/hint/anyword-hint.js';\r\nimport { addXMLhint } from '../vendor/custom/CodeMirrorES6/addons/hint/xml-hint.js';\r\nimport { addCSSHint } from '../vendor/custom/CodeMirrorES6/addons/hint/css-hint.js';\r\nimport { addHTMLhint } from '../vendor/custom/CodeMirrorES6/addons/hint/html-hint.js';\r\nimport { addJShint } from '../vendor/custom/CodeMirrorES6/addons/hint/javascript-hint.js';\r\n\r\n// import { addRunmode } from '../vendor/custom/CodeMirrorES6/addons/runmode/runmode.js';\r\n\r\nfunction addFunctionsToCodeMirror() {\r\n  // addMetaMode(CodeMirror);\r\n  addXMLMode(CodeMirror);\r\n  addCSSMode(CodeMirror);\r\n  addJavaScriptMode(CodeMirror);\r\n  addHTMLMixedMode(CodeMirror);\r\n\r\n  // addSimpleScrollbar(CodeMirror);\r\n  addAnnotateScrollbar(CodeMirror);\r\n\r\n  addComment(CodeMirror);\r\n  addFullscreen(CodeMirror);\r\n  // addAutorefresh(CodeMirror);\r\n  addActiveLine(CodeMirror);\r\n\r\n  addDialog(CodeMirror);\r\n  addJumptoline(CodeMirror);\r\n  addMatchhighlighter(CodeMirror);\r\n  addMatchesonscroll(CodeMirror);\r\n  addSearch(CodeMirror);\r\n  addSearchcursor(CodeMirror);\r\n\r\n  addFoldcode(CodeMirror);\r\n  addBracefold(CodeMirror);\r\n  addCommentfold(CodeMirror);\r\n  addFoldgutter(CodeMirror);\r\n  addIndentfold(CodeMirror);\r\n  addXmlfold(CodeMirror);\r\n\r\n  addClosebrackets(CodeMirror);\r\n  addClosetag(CodeMirror);\r\n\r\n  addShowhint(CodeMirror);\r\n  addAnywordhint(CodeMirror);\r\n  addXMLhint(CodeMirror);\r\n  addCSSHint(CodeMirror);\r\n  addHTMLhint(CodeMirror);\r\n  addJShint(CodeMirror);\r\n\r\n  // addRunmode(CodeMirror);\r\n}\r\n\r\nexport { addFunctionsToCodeMirror };\r\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addBracefold(CodeMirror) {\n\n  CodeMirror.registerHelper('fold', 'brace', (cm, start) => {\n    const line = start.line;\n    const lineText = cm.getLine(line);\n    let tokenType;\n\n    function findOpening(openCh) {\n      for (let at = start.ch, pass = 0; ;) {\n        const found = at <= 0 ? -1 : lineText.lastIndexOf(openCh, at - 1);\n        if (found == -1) {\n          if (pass == 1) break;\n          pass = 1;\n          at = lineText.length;\n          continue;\n        }\n        if (pass == 1 && found < start.ch) break;\n        tokenType = cm.getTokenTypeAt(CodeMirror.Pos(line, found + 1));\n        if (!/^(comment|string)/.test(tokenType)) return found + 1;\n        at = found - 1;\n      }\n    }\n\n    let startToken = '{';\n    let endToken = '}';\n    let startCh = findOpening('{');\n    if (startCh == null) {\n      startToken = '[', endToken = ']';\n      startCh = findOpening('[');\n    }\n\n    if (startCh == null) return;\n    let count = 1;\n    const lastLine = cm.lastLine();\n    let end;\n    let endCh;\n    outer: for (let i = line; i <= lastLine; ++i) {\n      const text = cm.getLine(i);\n      let pos = i == line ? startCh : 0;\n      for (; ;) {\n        let nextOpen = text.indexOf(startToken, pos);\n        let nextClose = text.indexOf(endToken, pos);\n        if (nextOpen < 0) nextOpen = text.length;\n        if (nextClose < 0) nextClose = text.length;\n        pos = Math.min(nextOpen, nextClose);\n        if (pos == text.length) break;\n        if (cm.getTokenTypeAt(CodeMirror.Pos(i, pos + 1)) == tokenType) {\n          if (pos == nextOpen) ++count;\n          else if (!--count) {\n            end = i;\n            endCh = pos;\n            break outer;\n          }\n        }\n        ++pos;\n      }\n    }\n    if (end == null || line == end) return;\n    return {\n      from: CodeMirror.Pos(line, startCh),\n      to: CodeMirror.Pos(end, endCh),\n    };\n  });\n\n  CodeMirror.registerHelper('fold', 'import', (cm, start) => {\n    function hasImport(line) {\n      if (line < cm.firstLine() || line > cm.lastLine()) return null;\n      let start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n      if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n      if (start.type != 'keyword' || start.string != 'import') return null;\n      // Now find closing semicolon, return its position\n      for (let i = line, e = Math.min(cm.lastLine(), line + 10); i <= e; ++i) {\n        const text = cm.getLine(i);\n        const semi = text.indexOf(';');\n        if (semi != -1) {\n          return {\n            startCh: start.end,\n            end: CodeMirror.Pos(i, semi),\n          };\n        }\n      }\n    }\n\n    const startLine = start.line;\n    const has = hasImport(startLine);\n    let prev;\n    if (!has || hasImport(startLine - 1) || ((prev = hasImport(startLine - 2)) && prev.end.line\n      == startLine - 1)) {\n      return null;\n    }\n    for (var end = has.end; ;) {\n      const next = hasImport(end.line + 1);\n      if (next == null) break;\n      end = next.end;\n    }\n    return {\n      from: cm.clipPos(CodeMirror.Pos(startLine, has.startCh + 1)),\n      to: end,\n    };\n  });\n\n  CodeMirror.registerHelper('fold', 'include', (cm, start) => {\n    function hasInclude(line) {\n      if (line < cm.firstLine() || line > cm.lastLine()) return null;\n      let start = cm.getTokenAt(CodeMirror.Pos(line, 1));\n      if (!/\\S/.test(start.string)) start = cm.getTokenAt(CodeMirror.Pos(line, start.end + 1));\n      if (start.type == 'meta' && start.string.slice(0, 8) == '#include') return start.start + 8;\n    }\n\n    const startLine = start.line;\n    const has = hasInclude(startLine);\n    if (has == null || hasInclude(startLine - 1) != null) return null;\n    for (var end = startLine; ;) {\n      const next = hasInclude(end + 1);\n      if (next == null) break;\n      ++end;\n    }\n    return {\n      from: CodeMirror.Pos(startLine, has + 1),\n      to: cm.clipPos(CodeMirror.Pos(end)),\n    };\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addAnnotateScrollbar(CodeMirror) {\n\n  CodeMirror.defineExtension('annotateScrollbar', function (options) {\n    if (typeof options === 'string') {\n      options = {\n        className: options,\n      };\n    }\n    return new Annotation(this, options);\n  });\n\n  CodeMirror.defineOption('scrollButtonHeight', 0);\n\n  function Annotation(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.buttonHeight = options.scrollButtonHeight || cm.getOption('scrollButtonHeight');\n    this.annotations = [];\n    this.doRedraw = this.doUpdate = null;\n    this.div = cm.getWrapperElement()\n      .appendChild(document.createElement('div'));\n    this.div.style.cssText = 'position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none';\n    this.computeScale();\n\n    function scheduleRedraw(delay) {\n      clearTimeout(self.doRedraw);\n      self.doRedraw = setTimeout(() => {\n        self.redraw();\n      }, delay);\n    }\n\n    var self = this;\n    cm.on('refresh', this.resizeHandler = function () {\n      clearTimeout(self.doUpdate);\n      self.doUpdate = setTimeout(() => {\n        if (self.computeScale()) scheduleRedraw(20);\n      }, 100);\n    });\n    cm.on('markerAdded', this.resizeHandler);\n    cm.on('markerCleared', this.resizeHandler);\n    if (options.listenForChanges !== false) {\n      cm.on('change', this.changeHandler = function () {\n        scheduleRedraw(250);\n      });\n    }\n  }\n\n  Annotation.prototype.computeScale = function () {\n    const cm = this.cm;\n    const hScale = (cm.getWrapperElement()\n      .clientHeight - cm.display.barHeight - this.buttonHeight * 2)\n      / cm.getScrollerElement()\n        .scrollHeight;\n    if (hScale != this.hScale) {\n      this.hScale = hScale;\n      return true;\n    }\n  };\n\n  Annotation.prototype.update = function (annotations) {\n    this.annotations = annotations;\n    this.redraw();\n  };\n\n  Annotation.prototype.redraw = function (compute) {\n    if (compute !== false) this.computeScale();\n    const cm = this.cm;\n    const hScale = this.hScale;\n\n    const frag = document.createDocumentFragment();\n    const anns = this.annotations;\n\n    const wrapping = cm.getOption('lineWrapping');\n    const singleLineH = wrapping && cm.defaultTextHeight() * 1.5;\n    let curLine = null;\n    let curLineObj = null;\n\n    function getY(pos, top) {\n      if (curLine != pos.line) {\n        curLine = pos.line;\n        curLineObj = cm.getLineHandle(curLine);\n      }\n      if ((curLineObj.widgets && curLineObj.widgets.length)\n        || (wrapping && curLineObj.height > singleLineH)) {\n        return cm.charCoords(pos, 'local')[top ? 'top' : 'bottom'];\n      }\n      const topY = cm.heightAtLine(curLineObj, 'local');\n      return topY + (top ? 0 : curLineObj.height);\n    }\n\n    const lastLine = cm.lastLine();\n    if (cm.display.barWidth) {\n      for (var i = 0, nextTop; i < anns.length; i++) {\n        let ann = anns[i];\n        if (ann.to.line > lastLine) continue;\n        const top = nextTop || getY(ann.from, true) * hScale;\n        let bottom = getY(ann.to, false) * hScale;\n        while (i < anns.length - 1) {\n          if (anns[i + 1].to.line > lastLine) break;\n          nextTop = getY(anns[i + 1].from, true) * hScale;\n          if (nextTop > bottom + 0.9) break;\n          ann = anns[++i];\n          bottom = getY(ann.to, false) * hScale;\n        }\n        if (bottom == top) continue;\n        const height = Math.max(bottom - top, 3);\n\n        const elt = frag.appendChild(document.createElement('div'));\n        elt.style.cssText = 'position: absolute; right: 0px; width: ' + Math.max(cm.display.barWidth - 1, 2)\n          + 'px; top: '\n          + (top + this.buttonHeight) + 'px; height: ' + height + 'px';\n        elt.className = this.options.className;\n        if (ann.id) {\n          elt.setAttribute('annotation-id', ann.id);\n        }\n      }\n    }\n    this.div.textContent = '';\n    this.div.appendChild(frag);\n  };\n\n  Annotation.prototype.clear = function () {\n    this.cm.off('refresh', this.resizeHandler);\n    this.cm.off('markerAdded', this.resizeHandler);\n    this.cm.off('markerCleared', this.resizeHandler);\n    if (this.changeHandler) this.cm.off('change', this.changeHandler);\n    this.div.parentNode.removeChild(this.div);\n  };\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addActiveLine(CodeMirror) {\n\n  const WRAP_CLASS = 'CodeMirror-activeline';\n  const BACK_CLASS = 'CodeMirror-activeline-background';\n  const GUTT_CLASS = 'CodeMirror-activeline-gutter';\n\n  CodeMirror.defineOption('styleActiveLine', false, (cm, val, old) => {\n    const prev = old == CodeMirror.Init ? false : old;\n    if (val == prev) return;\n    if (prev) {\n      cm.off('beforeSelectionChange', selectionChange);\n      clearActiveLines(cm);\n      delete cm.state.activeLines;\n    }\n    if (val) {\n      cm.state.activeLines = [];\n      updateActiveLines(cm, cm.listSelections());\n      cm.on('beforeSelectionChange', selectionChange);\n    }\n  });\n\n  function clearActiveLines(cm) {\n    for (let i = 0; i < cm.state.activeLines.length; i++) {\n      cm.removeLineClass(cm.state.activeLines[i], 'wrap', WRAP_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], 'background', BACK_CLASS);\n      cm.removeLineClass(cm.state.activeLines[i], 'gutter', GUTT_CLASS);\n    }\n  }\n\n  function sameArray(a, b) {\n    if (a.length != b.length) return false;\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] != b[i]) return false;\n    }\n    return true;\n  }\n\n  function updateActiveLines(cm, ranges) {\n    const active = [];\n    for (let i = 0; i < ranges.length; i++) {\n      const range = ranges[i];\n      const option = cm.getOption('styleActiveLine');\n      if (typeof option === 'object' && option.nonEmpty ? range.anchor.line != range.head.line : !range.empty()) {\n        continue;\n      }\n      const line = cm.getLineHandleVisualStart(range.head.line);\n      if (active[active.length - 1] != line) active.push(line);\n    }\n    if (sameArray(cm.state.activeLines, active)) return;\n    cm.operation(() => {\n      clearActiveLines(cm);\n      for (let i = 0; i < active.length; i++) {\n        cm.addLineClass(active[i], 'wrap', WRAP_CLASS);\n        cm.addLineClass(active[i], 'background', BACK_CLASS);\n        cm.addLineClass(active[i], 'gutter', GUTT_CLASS);\n      }\n      cm.state.activeLines = active;\n    });\n  }\n\n  function selectionChange(cm, sel) {\n    updateActiveLines(cm, sel.ranges);\n  }\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\nexport function addDialog(CodeMirror) {\n\n  function dialogDiv(cm, template, bottom) {\n    const wrap = cm.getWrapperElement();\n    let dialog;\n    dialog = wrap.appendChild(document.createElement('div'));\n    if (bottom) { dialog.className = 'CodeMirror-dialog CodeMirror-dialog-bottom'; } else { dialog.className = 'CodeMirror-dialog CodeMirror-dialog-top'; }\n\n    if (typeof template === 'string') {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    CodeMirror.addClass(wrap, 'dialog-opened');\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose) { cm.state.currentNotificationClose(); }\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension('openDialog', function (template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    const dialog = dialogDiv(this, template, options.bottom);\n    let closed = false; const me = this;\n    function close(newVal) {\n      if (typeof newVal === 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName('input')[0]; let button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput) { CodeMirror.on(inp, 'input', (e) => { options.onInput(e, inp.value, close); }); }\n      if (options.onKeyUp) { CodeMirror.on(inp, 'keyup', (e) => { options.onKeyUp(e, inp.value, close); }); }\n\n      CodeMirror.on(inp, 'keydown', (e) => {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(inp, 'blur', close);\n    } else if (button = dialog.getElementsByTagName('button')[0]) {\n      CodeMirror.on(button, 'click', () => {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, 'blur', close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension('openConfirm', function (template, callbacks, options) {\n    closeNotification(this, null);\n    const dialog = dialogDiv(this, template, options && options.bottom);\n    const buttons = dialog.getElementsByTagName('button');\n    let closed = false; const me = this; let blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (let i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function (callback) {\n        CodeMirror.on(b, 'click', (e) => {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      }(callbacks[i]));\n      CodeMirror.on(b, 'blur', () => {\n        --blurring;\n        setTimeout(() => { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, 'focus', () => { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension('openNotification', function (template, options) {\n    closeNotification(this, close);\n    const dialog = dialogDiv(this, template, options && options.bottom);\n    let closed = false; let doneTimer;\n    const duration = options && typeof options.duration !== 'undefined' ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', (e) => {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration) { doneTimer = setTimeout(close, duration); }\n\n    return close;\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addMatchesonscroll(CodeMirror) {\n\n  CodeMirror.defineExtension('showMatchesOnScrollbar', function (query, caseFold, options) {\n    if (typeof options === 'string') {\n      options = {\n        className: options,\n      };\n    }\n    if (!options) options = {};\n    return new SearchAnnotation(this, query, caseFold, options);\n  });\n\n  function SearchAnnotation(cm, query, caseFold, options) {\n    this.cm = cm;\n    this.options = options;\n    const annotateOptions = {\n      listenForChanges: false,\n    };\n    for (const prop in options) annotateOptions[prop] = options[prop];\n    if (!annotateOptions.className) annotateOptions.className = 'CodeMirror-search-match';\n    this.annotation = cm.annotateScrollbar(annotateOptions);\n    this.query = query;\n    this.caseFold = caseFold;\n    this.gap = {\n      from: cm.firstLine(),\n      to: cm.lastLine() + 1,\n    };\n    this.matches = [];\n    this.update = null;\n\n    this.findMatches();\n    this.annotation.update(this.matches);\n\n    const self = this;\n    cm.on('change', this.changeHandler = function (_cm, change) {\n      self.onChange(change);\n    });\n  }\n\n  const MAX_MATCHES = 1000;\n\n  SearchAnnotation.prototype.findMatches = function () {\n    if (!this.gap) return;\n    for (var i = 0; i < this.matches.length; i++) {\n      var match = this.matches[i];\n      if (match.from.line >= this.gap.to) break;\n      if (match.to.line >= this.gap.from) this.matches.splice(i--, 1);\n    }\n    const cursor = this.cm.getSearchCursor(this.query, CodeMirror.Pos(this.gap.from, 0), {\n      caseFold: this.caseFold,\n      multiline: this.options.multiline,\n    });\n    const maxMatches = this.options && this.options.maxMatches || MAX_MATCHES;\n    while (cursor.findNext()) {\n      var match = {\n        from: cursor.from(),\n        to: cursor.to(),\n      };\n      if (match.from.line >= this.gap.to) break;\n      this.matches.splice(i++, 0, match);\n      if (this.matches.length > maxMatches) break;\n    }\n    this.gap = null;\n  };\n\n  function offsetLine(line, changeStart, sizeChange) {\n    if (line <= changeStart) return line;\n    return Math.max(changeStart, line + sizeChange);\n  }\n\n  SearchAnnotation.prototype.onChange = function (change) {\n    const startLine = change.from.line;\n    const endLine = CodeMirror.changeEnd(change)\n      .line;\n    const sizeChange = endLine - change.to.line;\n    if (this.gap) {\n      this.gap.from = Math.min(offsetLine(this.gap.from, startLine, sizeChange), change.from.line);\n      this.gap.to = Math.max(offsetLine(this.gap.to, startLine, sizeChange), change.from.line);\n    } else {\n      this.gap = {\n        from: change.from.line,\n        to: endLine + 1,\n      };\n    }\n\n    if (sizeChange) {\n      for (let i = 0; i < this.matches.length; i++) {\n        const match = this.matches[i];\n        const newFrom = offsetLine(match.from.line, startLine, sizeChange);\n        if (newFrom != match.from.line) match.from = CodeMirror.Pos(newFrom, match.from.ch);\n        const newTo = offsetLine(match.to.line, startLine, sizeChange);\n        if (newTo != match.to.line) match.to = CodeMirror.Pos(newTo, match.to.ch);\n      }\n    }\n    clearTimeout(this.update);\n    const self = this;\n    this.update = setTimeout(() => {\n      self.updateAfterChange();\n    }, 250);\n  };\n\n  SearchAnnotation.prototype.updateAfterChange = function () {\n    this.findMatches();\n    this.annotation.update(this.matches);\n  };\n\n  SearchAnnotation.prototype.clear = function () {\n    this.cm.off('change', this.changeHandler);\n    this.annotation.clear();\n  };\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addCommentfold(CodeMirror) {\n\n  CodeMirror.registerGlobalHelper('fold', 'comment', (mode) => {\n    return mode.blockCommentStart && mode.blockCommentEnd;\n  }, (cm, start) => {\n    const mode = cm.getModeAt(start);\n    const startToken = mode.blockCommentStart;\n    const endToken = mode.blockCommentEnd;\n    if (!startToken || !endToken) return;\n    const line = start.line;\n    const lineText = cm.getLine(line);\n\n    let startCh;\n    for (let at = start.ch, pass = 0; ;) {\n      const found = at <= 0 ? -1 : lineText.lastIndexOf(startToken, at - 1);\n      if (found == -1) {\n        if (pass == 1) return;\n        pass = 1;\n        at = lineText.length;\n        continue;\n      }\n      if (pass == 1 && found < start.ch) return;\n      if (/comment/.test(cm.getTokenTypeAt(CodeMirror.Pos(line, found + 1)))\n        && (found == 0 || lineText.slice(found - endToken.length, found) == endToken\n          || !/comment/.test(cm.getTokenTypeAt(CodeMirror.Pos(line, found))))) {\n        startCh = found + startToken.length;\n        break;\n      }\n      at = found - 1;\n    }\n\n    let depth = 1;\n    const lastLine = cm.lastLine();\n    let end;\n    let endCh;\n    outer: for (let i = line; i <= lastLine; ++i) {\n      const text = cm.getLine(i);\n      let pos = i == line ? startCh : 0;\n      for (; ;) {\n        let nextOpen = text.indexOf(startToken, pos);\n        let nextClose = text.indexOf(endToken, pos);\n        if (nextOpen < 0) nextOpen = text.length;\n        if (nextClose < 0) nextClose = text.length;\n        pos = Math.min(nextOpen, nextClose);\n        if (pos == text.length) break;\n        if (pos == nextOpen) ++depth;\n        else if (!--depth) {\n          end = i;\n          endCh = pos;\n          break outer;\n        }\n        ++pos;\n      }\n    }\n    if (end == null || line == end && endCh == startCh) return;\n    return {\n      from: CodeMirror.Pos(line, startCh),\n      to: CodeMirror.Pos(end, endCh),\n    };\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addFoldgutter(CodeMirror) {\n\n  CodeMirror.defineOption('foldGutter', false, (cm, val, old) => {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off('gutterClick', onGutterClick);\n      cm.off('change', onChange);\n      cm.off('viewportChange', onViewportChange);\n      cm.off('fold', onFold);\n      cm.off('unfold', onFold);\n      cm.off('swapDoc', onChange);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on('gutterClick', onGutterClick);\n      cm.on('change', onChange);\n      cm.on('viewportChange', onViewportChange);\n      cm.on('fold', onFold);\n      cm.on('unfold', onFold);\n      cm.on('swapDoc', onChange);\n    }\n  });\n\n  const Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = 'CodeMirror-foldgutter';\n    if (opts.indicatorOpen == null) opts.indicatorOpen = 'CodeMirror-foldgutter-open';\n    if (opts.indicatorFolded == null) opts.indicatorFolded = 'CodeMirror-foldgutter-folded';\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    const marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));\n    for (let i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) {\n        const fromPos = marks[i].find(-1);\n        if (fromPos && fromPos.line === line) {\n          return marks[i];\n        }\n      }\n    }\n  }\n\n  function marker(spec) {\n    if (typeof spec === 'string') {\n      const elt = document.createElement('div');\n      elt.className = spec + ' CodeMirror-guttermarker-subtle';\n      return elt;\n    }\n    return spec.cloneNode(true);\n\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    const opts = cm.state.foldGutter.options;\n    let cur = from;\n    const minSize = cm.foldOption(opts, 'minFoldSize');\n    const func = cm.foldOption(opts, 'rangeFinder');\n    cm.eachLine(from, to, (line) => {\n      let mark = null;\n      if (isFolded(cm, cur)) {\n        mark = marker(opts.indicatorFolded);\n      } else {\n        const pos = Pos(cur, 0);\n        const range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize) {\n          mark = marker(opts.indicatorOpen);\n        }\n      }\n      cm.setGutterMarker(line, opts.gutter, mark);\n      ++cur;\n    });\n  }\n\n  function updateInViewport(cm) {\n    const vp = cm.getViewport();\n    const state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(() => {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from;\n    state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    const state = cm.state.foldGutter;\n    if (!state) return;\n    const opts = state.options;\n    if (gutter != opts.gutter) return;\n    const folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts);\n  }\n\n  function onChange(cm) {\n    const state = cm.state.foldGutter;\n    if (!state) return;\n    const opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(() => {\n      updateInViewport(cm);\n    }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    const state = cm.state.foldGutter;\n    if (!state) return;\n    const opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(() => {\n      const vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(() => {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    const state = cm.state.foldGutter;\n    if (!state) return;\n    const line = from.line;\n    if (line >= state.from && line < state.to) {\n      updateFoldInfo(cm, line, line + 1);\n    }\n  }\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addIndentfold(CodeMirror) {\n\n  function lineIndent(cm, lineNo) {\n    const text = cm.getLine(lineNo);\n    const spaceTo = text.search(/\\S/);\n    if (spaceTo == -1 || /\\bcomment\\b/.test(cm.getTokenTypeAt(CodeMirror.Pos(lineNo, spaceTo + 1)))) {\n      return -1;\n    }\n    return CodeMirror.countColumn(text, null, cm.getOption('tabSize'));\n  }\n\n  CodeMirror.registerHelper('fold', 'indent', (cm, start) => {\n    const myIndent = lineIndent(cm, start.line);\n    if (myIndent < 0) return;\n    let lastLineInFold = null;\n\n    // Go through lines until we find a line that definitely doesn't belong in\n    // the block we're folding, or to the end.\n    for (let i = start.line + 1, end = cm.lastLine(); i <= end; ++i) {\n      const indent = lineIndent(cm, i);\n      if (indent == -1) { } else if (indent > myIndent) {\n        // Lines with a greater indent are considered part of the block.\n        lastLineInFold = i;\n      } else {\n        // If this line has non-space, non-comment content, and is\n        // indented less or equal to the start line, it is the start of\n        // another block.\n        break;\n      }\n    }\n    if (lastLineInFold) {\n      return {\n        from: CodeMirror.Pos(start.line, cm.getLine(start.line)\n          .length),\n        to: CodeMirror.Pos(lastLineInFold, cm.getLine(lastLineInFold)\n          .length),\n      };\n    }\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addXmlfold(CodeMirror) {\n\n  const Pos = CodeMirror.Pos;\n\n  function cmp(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  }\n\n  const nameStartChar = 'A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\n  const nameChar = nameStartChar + '\\-\\:\\.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\n  const xmlTagStart = new RegExp('<(/?)([' + nameStartChar + '][' + nameChar + ']*)', 'g');\n\n  function Iter(cm, line, ch, range) {\n    this.line = line;\n    this.ch = ch;\n    this.cm = cm;\n    this.text = cm.getLine(line);\n    this.min = range ? Math.max(range.from, cm.firstLine()) : cm.firstLine();\n    this.max = range ? Math.min(range.to - 1, cm.lastLine()) : cm.lastLine();\n  }\n\n  function tagAt(iter, ch) {\n    const type = iter.cm.getTokenTypeAt(Pos(iter.line, ch));\n    return type && /\\btag\\b/.test(type);\n  }\n\n  function nextLine(iter) {\n    if (iter.line >= iter.max) return;\n    iter.ch = 0;\n    iter.text = iter.cm.getLine(++iter.line);\n    return true;\n  }\n\n  function prevLine(iter) {\n    if (iter.line <= iter.min) return;\n    iter.text = iter.cm.getLine(--iter.line);\n    iter.ch = iter.text.length;\n    return true;\n  }\n\n  function toTagEnd(iter) {\n    for (; ;) {\n      const gt = iter.text.indexOf('>', iter.ch);\n      if (gt == -1) {\n        if (nextLine(iter)) continue;\n        else return;\n      }\n      if (!tagAt(iter, gt + 1)) {\n        iter.ch = gt + 1;\n        continue;\n      }\n      const lastSlash = iter.text.lastIndexOf('/', gt);\n      const selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? 'selfClose' : 'regular';\n    }\n  }\n\n  function toTagStart(iter) {\n    for (; ;) {\n      const lt = iter.ch ? iter.text.lastIndexOf('<', iter.ch - 1) : -1;\n      if (lt == -1) {\n        if (prevLine(iter)) continue;\n        else return;\n      }\n      if (!tagAt(iter, lt + 1)) {\n        iter.ch = lt;\n        continue;\n      }\n      xmlTagStart.lastIndex = lt;\n      iter.ch = lt;\n      const match = xmlTagStart.exec(iter.text);\n      if (match && match.index == lt) return match;\n    }\n  }\n\n  function toNextTag(iter) {\n    for (; ;) {\n      xmlTagStart.lastIndex = iter.ch;\n      const found = xmlTagStart.exec(iter.text);\n      if (!found) {\n        if (nextLine(iter)) continue;\n        else return;\n      }\n      if (!tagAt(iter, found.index + 1)) {\n        iter.ch = found.index + 1;\n        continue;\n      }\n      iter.ch = found.index + found[0].length;\n      return found;\n    }\n  }\n\n  function toPrevTag(iter) {\n    for (; ;) {\n      const gt = iter.ch ? iter.text.lastIndexOf('>', iter.ch - 1) : -1;\n      if (gt == -1) {\n        if (prevLine(iter)) continue;\n        else return;\n      }\n      if (!tagAt(iter, gt + 1)) {\n        iter.ch = gt;\n        continue;\n      }\n      const lastSlash = iter.text.lastIndexOf('/', gt);\n      const selfClose = lastSlash > -1 && !/\\S/.test(iter.text.slice(lastSlash + 1, gt));\n      iter.ch = gt + 1;\n      return selfClose ? 'selfClose' : 'regular';\n    }\n  }\n\n  function findMatchingClose(iter, tag) {\n    const stack = [];\n    for (; ;) {\n      const next = toNextTag(iter);\n      var end;\n      const startLine = iter.line;\n      const startCh = iter.ch - (next ? next[0].length : 0);\n      if (!next || !(end = toTagEnd(iter))) return;\n      if (end == 'selfClose') continue;\n      if (next[1]) { // closing tag\n        for (var i = stack.length - 1; i >= 0; --i) {\n          if (stack[i] == next[2]) {\n            stack.length = i;\n            break;\n          }\n        }\n        if (i < 0 && (!tag || tag == next[2])) {\n          return {\n            tag: next[2],\n            from: Pos(startLine, startCh),\n            to: Pos(iter.line, iter.ch),\n          };\n        }\n      } else { // opening tag\n        stack.push(next[2]);\n      }\n    }\n  }\n\n  function findMatchingOpen(iter, tag) {\n    const stack = [];\n    for (; ;) {\n      const prev = toPrevTag(iter);\n      if (!prev) return;\n      if (prev == 'selfClose') {\n        toTagStart(iter);\n        continue;\n      }\n      const endLine = iter.line;\n      const endCh = iter.ch;\n      const start = toTagStart(iter);\n      if (!start) return;\n      if (start[1]) { // closing tag\n        stack.push(start[2]);\n      } else { // opening tag\n        for (var i = stack.length - 1; i >= 0; --i) {\n          if (stack[i] == start[2]) {\n            stack.length = i;\n            break;\n          }\n        }\n        if (i < 0 && (!tag || tag == start[2])) {\n          return {\n            tag: start[2],\n            from: Pos(iter.line, iter.ch),\n            to: Pos(endLine, endCh),\n          };\n        }\n      }\n    }\n  }\n\n  CodeMirror.registerHelper('fold', 'xml', (cm, start) => {\n    const iter = new Iter(cm, start.line, 0);\n    for (; ;) {\n      const openTag = toNextTag(iter);\n      if (!openTag || iter.line != start.line) return;\n      const end = toTagEnd(iter);\n      if (!end) return;\n      if (!openTag[1] && end != 'selfClose') {\n        const startPos = Pos(iter.line, iter.ch);\n        const endPos = findMatchingClose(iter, openTag[2]);\n        return endPos && cmp(endPos.from, startPos) > 0 ? {\n          from: startPos,\n          to: endPos.from,\n        } : null;\n      }\n    }\n  });\n  CodeMirror.findMatchingTag = function (cm, pos, range) {\n    let iter = new Iter(cm, pos.line, pos.ch, range);\n    if (iter.text.indexOf('>') == -1 && iter.text.indexOf('<') == -1) return;\n    const end = toTagEnd(iter);\n    const to = end && Pos(iter.line, iter.ch);\n    const start = end && toTagStart(iter);\n    if (!end || !start || cmp(iter, pos) > 0) return;\n    const here = {\n      from: Pos(iter.line, iter.ch),\n      to,\n      tag: start[2],\n    };\n    if (end == 'selfClose') {\n      return {\n        open: here,\n        close: null,\n        at: 'open',\n      };\n    }\n\n    if (start[1]) { // closing tag\n      return {\n        open: findMatchingOpen(iter, start[2]),\n        close: here,\n        at: 'close',\n      };\n    } // opening tag\n    iter = new Iter(cm, to.line, to.ch, range);\n    return {\n      open: here,\n      close: findMatchingClose(iter, start[2]),\n      at: 'open',\n    };\n\n  };\n\n  CodeMirror.findEnclosingTag = function (cm, pos, range, tag) {\n    const iter = new Iter(cm, pos.line, pos.ch, range);\n    for (; ;) {\n      const open = findMatchingOpen(iter, tag);\n      if (!open) break;\n      const forward = new Iter(cm, pos.line, pos.ch, range);\n      const close = findMatchingClose(forward, open.tag);\n      if (close) {\n        return {\n          open,\n          close,\n        };\n      }\n    }\n  };\n\n  // Used by addon/edit/closetag.js\n  CodeMirror.scanForClosingTag = function (cm, pos, name, end) {\n    const iter = new Iter(cm, pos.line, pos.ch, end ? {\n      from: 0,\n      to: end,\n    } : null);\n    return findMatchingClose(iter, name);\n  };\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addAnywordhint(CodeMirror) {\n\n  const WORD = /[\\w$]+/;\n  const RANGE = 500;\n\n  CodeMirror.registerHelper('hint', 'anyword', (editor, options) => {\n    const word = options && options.word || WORD;\n    const range = options && options.range || RANGE;\n    const cur = editor.getCursor();\n    const curLine = editor.getLine(cur.line);\n    const end = cur.ch;\n    let start = end;\n    while (start && word.test(curLine.charAt(start - 1))) --start;\n    const curWord = start != end && curLine.slice(start, end);\n\n    const list = options && options.list || [];\n    const seen = {};\n    const re = new RegExp(word.source, 'g');\n    for (let dir = -1; dir <= 1; dir += 2) {\n      let line = cur.line;\n      const endLine = Math.min(Math.max(line + dir * range, editor.firstLine()), editor.lastLine()) + dir;\n      for (; line != endLine; line += dir) {\n        const text = editor.getLine(line);\n        var m;\n        while (m = re.exec(text)) {\n          if (line == cur.line && m[0] === curWord) continue;\n          if ((!curWord || m[0].lastIndexOf(curWord, 0) == 0) && !Object.prototype.hasOwnProperty.call(seen,\n            m[0])) {\n            seen[m[0]] = true;\n            list.push(m[0]);\n          }\n        }\n      }\n    }\n    return {\n      list,\n      from: CodeMirror.Pos(cur.line, start),\n      to: CodeMirror.Pos(cur.line, end),\n    };\n  });\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addXMLhint(CodeMirror) {\n\n  const Pos = CodeMirror.Pos;\n\n  function matches(hint, typed, matchInMiddle) {\n    if (matchInMiddle) return hint.indexOf(typed) >= 0;\n    return hint.lastIndexOf(typed, 0) == 0;\n  }\n\n  function getHints(cm, options) {\n    const tags = options && options.schemaInfo;\n    let quote = (options && options.quoteChar) || '\"';\n    const matchInMiddle = options && options.matchInMiddle;\n    if (!tags) return;\n    const cur = cm.getCursor();\n    const token = cm.getTokenAt(cur);\n    if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n    const inner = CodeMirror.innerMode(cm.getMode(), token.state);\n    if (inner.mode.name != 'xml') return;\n    const result = [];\n    let replaceToken = false;\n    let prefix;\n    const tag = /\\btag\\b/.test(token.type) && !/>$/.test(token.string);\n    const tagName = tag && /^\\w/.test(token.string);\n    let tagStart;\n\n    if (tagName) {\n      var before = cm.getLine(cur.line)\n        .slice(Math.max(0, token.start - 2), token.start);\n      var tagType = /<\\/$/.test(before) ? 'close' : /<$/.test(before) ? 'open' : null;\n      if (tagType) tagStart = token.start - (tagType == 'close' ? 2 : 1);\n    } else if (tag && token.string == '<') {\n      tagType = 'open';\n    } else if (tag && token.string == '</') {\n      tagType = 'close';\n    }\n\n    if (!tag && !inner.state.tagName || tagType) {\n      if (tagName) { prefix = token.string; }\n      replaceToken = tagType;\n      const cx = inner.state.context;\n      var curTag = cx && tags[cx.tagName];\n      const childList = cx ? curTag && curTag.children : tags['!top'];\n      if (childList && tagType != 'close') {\n        for (var i = 0; i < childList.length; ++i) {\n          if (!prefix || matches(childList[i], prefix, matchInMiddle)) { result.push('<' + childList[i]); }\n        }\n      } else if (tagType != 'close') {\n        for (const name in tags) {\n          if (tags.hasOwnProperty(name) && name != '!top' && name != '!attrs' && (!prefix || matches(name, prefix,\n            matchInMiddle))) { result.push('<' + name); }\n        }\n      }\n      if (cx && (!prefix || tagType == 'close' && matches(cx.tagName, prefix, matchInMiddle))) { result.push('</' + cx.tagName + '>'); }\n    } else {\n      // Attribute completion\n      var curTag = tags[inner.state.tagName];\n      let attrs = curTag && curTag.attrs;\n      const globalAttrs = tags['!attrs'];\n      if (!attrs && !globalAttrs) return;\n      if (!attrs) {\n        attrs = globalAttrs;\n      } else if (globalAttrs) { // Combine tag-local and global attributes\n        const set = {};\n        for (var nm in globalAttrs) { if (globalAttrs.hasOwnProperty(nm)) set[nm] = globalAttrs[nm]; }\n        for (var nm in attrs) { if (attrs.hasOwnProperty(nm)) set[nm] = attrs[nm]; }\n        attrs = set;\n      }\n      if (token.type == 'string' || token.string == '=') { // A value\n        var before = cm.getRange(Pos(cur.line, Math.max(0, cur.ch - 60)),\n          Pos(cur.line, token.type == 'string' ? token.start : token.end));\n        const atName = before.match(/([^\\s\\u00a0=<>\\\"\\']+)=$/);\n        let atValues;\n        if (!atName || !attrs.hasOwnProperty(atName[1]) || !(atValues = attrs[atName[1]])) return;\n        if (typeof atValues === 'function') {\n          atValues = atValues.call(this,\n            cm);\n        } // Functions can be used to supply values for autocomplete widget\n        if (token.type == 'string') {\n          prefix = token.string;\n          let n = 0;\n          if (/['\"]/.test(token.string.charAt(0))) {\n            quote = token.string.charAt(0);\n            prefix = token.string.slice(1);\n            n++;\n          }\n          const len = token.string.length;\n          if (/['\"]/.test(token.string.charAt(len - 1))) {\n            quote = token.string.charAt(len - 1);\n            prefix = token.string.substr(n, len - 2);\n          }\n          if (n) { // an opening quote\n            const line = cm.getLine(cur.line);\n            if (line.length > token.end && line.charAt(token.end) == quote) token.end++; // include a closing quote\n          }\n          replaceToken = true;\n        }\n        for (var i = 0; i < atValues.length; ++i) {\n          if (!prefix || matches(atValues[i], prefix, matchInMiddle)) { result.push(quote + atValues[i] + quote); }\n        }\n      } else { // An attribute name\n        if (token.type == 'attribute') {\n          prefix = token.string;\n          replaceToken = true;\n        }\n        for (const attr in attrs) {\n          if (attrs.hasOwnProperty(attr) && (!prefix || matches(attr, prefix, matchInMiddle))) { result.push(attr); }\n        }\n      }\n    }\n    return {\n      list: result,\n      from: replaceToken ? Pos(cur.line, tagStart == null ? token.start : tagStart) : cur,\n      to: replaceToken ? Pos(cur.line, token.end) : cur,\n    };\n  }\n\n  CodeMirror.registerHelper('hint', 'xml', getHints);\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addCSSHint(CodeMirror) {\n\n  const pseudoClasses = {\n    link: 1,\n    visited: 1,\n    active: 1,\n    hover: 1,\n    focus: 1,\n    'first-letter': 1,\n    'first-line': 1,\n    'first-child': 1,\n    before: 1,\n    after: 1,\n    lang: 1,\n  };\n\n  CodeMirror.registerHelper('hint', 'css', (cm) => {\n    const cur = cm.getCursor();\n    const token = cm.getTokenAt(cur);\n    const inner = CodeMirror.innerMode(cm.getMode(), token.state);\n    if (inner.mode.name != 'css') return;\n\n    if (token.type == 'keyword' && '!important'.indexOf(token.string) == 0) {\n      return {\n        list: ['!important'],\n        from: CodeMirror.Pos(cur.line, token.start),\n        to: CodeMirror.Pos(cur.line, token.end),\n      };\n    }\n\n    let start = token.start;\n    let end = cur.ch;\n    let word = token.string.slice(0, end - start);\n    if (/[^\\w$_-]/.test(word)) {\n      word = '';\n      start = end = cur.ch;\n    }\n\n    const spec = CodeMirror.resolveMode('text/css');\n\n    const result = [];\n\n    function add(keywords) {\n      for (const name in keywords) {\n        if (!word || name.lastIndexOf(word, 0) == 0) { result.push(name); }\n      }\n    }\n\n    const st = inner.state.state;\n    if (st == 'pseudo' || token.type == 'variable-3') {\n      add(pseudoClasses);\n    } else if (st == 'block' || st == 'maybeprop') {\n      add(spec.propertyKeywords);\n    } else if (st == 'prop' || st == 'parens' || st == 'at' || st == 'params') {\n      add(spec.valueKeywords);\n      add(spec.colorKeywords);\n    } else if (st == 'media' || st == 'media_parens') {\n      add(spec.mediaTypes);\n      add(spec.mediaFeatures);\n    }\n\n    if (result.length) {\n      return {\n        list: result,\n        from: CodeMirror.Pos(cur.line, start),\n        to: CodeMirror.Pos(cur.line, end),\n      };\n    }\n  });\n\n}\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\nexport function addHTMLhint(CodeMirror) {\n\n  const langs = 'ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu'\n    .split(' ');\n  const targets = ['_blank', '_self', '_top', '_parent'];\n  const charsets = ['ascii', 'utf-8', 'utf-16', 'latin1', 'latin1'];\n  const methods = ['get', 'post', 'put', 'delete'];\n  const encs = ['application/x-www-form-urlencoded', 'multipart/form-data', 'text/plain'];\n  const media = ['all', 'screen', 'print', 'embossed', 'braille', 'handheld', 'print', 'projection', 'screen', 'tty',\n    'tv', 'speech',\n    '3d-glasses', 'resolution [>][<][=] [X]', 'device-aspect-ratio: X/Y', 'orientation:portrait',\n    'orientation:landscape', 'device-height: [X]', 'device-width: [X]'];\n  const s = {\n    attrs: {},\n  }; // Simple tag, reused for a whole lot of tags\n\n  const data = {\n    a: {\n      attrs: {\n        href: null,\n        ping: null,\n        type: null,\n        media,\n        target: targets,\n        hreflang: langs,\n      },\n    },\n    abbr: s,\n    acronym: s,\n    address: s,\n    applet: s,\n    area: {\n      attrs: {\n        alt: null,\n        coords: null,\n        href: null,\n        target: null,\n        ping: null,\n        media,\n        hreflang: langs,\n        type: null,\n        shape: ['default', 'rect', 'circle', 'poly'],\n      },\n    },\n    article: s,\n    aside: s,\n    audio: {\n      attrs: {\n        src: null,\n        mediagroup: null,\n        crossorigin: ['anonymous', 'use-credentials'],\n        preload: ['none', 'metadata', 'auto'],\n        autoplay: ['', 'autoplay'],\n        loop: ['', 'loop'],\n        controls: ['', 'controls'],\n      },\n    },\n    b: s,\n    base: {\n      attrs: {\n        href: null,\n        target: targets,\n      },\n    },\n    basefont: s,\n    bdi: s,\n    bdo: s,\n    big: s,\n    blockquote: {\n      attrs: {\n        cite: null,\n      },\n    },\n    body: s,\n    br: s,\n    button: {\n      attrs: {\n        form: null,\n        formaction: null,\n        name: null,\n        value: null,\n        autofocus: ['', 'autofocus'],\n        disabled: ['', 'autofocus'],\n        formenctype: encs,\n        formmethod: methods,\n        formnovalidate: ['', 'novalidate'],\n        formtarget: targets,\n        type: ['submit', 'reset', 'button'],\n      },\n    },\n    canvas: {\n      attrs: {\n        width: null,\n        height: null,\n      },\n    },\n    caption: s,\n    center: s,\n    cite: s,\n    code: s,\n    col: {\n      attrs: {\n        span: null,\n      },\n    },\n    colgroup: {\n      attrs: {\n        span: null,\n      },\n    },\n    command: {\n      attrs: {\n        type: ['command', 'checkbox', 'radio'],\n        label: null,\n        icon: null,\n        radiogroup: null,\n        command: null,\n        title: null,\n        disabled: ['', 'disabled'],\n        checked: ['', 'checked'],\n      },\n    },\n    data: {\n      attrs: {\n        value: null,\n      },\n    },\n    datagrid: {\n      attrs: {\n        disabled: ['', 'disabled'],\n        multiple: ['', 'multiple'],\n      },\n    },\n    datalist: {\n      attrs: {\n        data: null,\n      },\n    },\n    dd: s,\n    del: {\n      attrs: {\n        cite: null,\n        datetime: null,\n      },\n    },\n    details: {\n      attrs: {\n        open: ['', 'open'],\n      },\n    },\n    dfn: s,\n    dir: s,\n    div: s,\n    dl: s,\n    dt: s,\n    em: s,\n    embed: {\n      attrs: {\n        src: null,\n        type: null,\n        width: null,\n        height: null,\n      },\n    },\n    eventsource: {\n      attrs: {\n        src: null,\n      },\n    },\n    fieldset: {\n      attrs: {\n        disabled: ['', 'disabled'],\n        form: null,\n        name: null,\n      },\n    },\n    figcaption: s,\n    figure: s,\n    font: s,\n    footer: s,\n    form: {\n      attrs: {\n        action: null,\n        name: null,\n        'accept-charset': charsets,\n        autocomplete: ['on', 'off'],\n        enctype: encs,\n        method: methods,\n        novalidate: ['', 'novalidate'],\n        target: targets,\n      },\n    },\n    frame: s,\n    frameset: s,\n    h1: s,\n    h2: s,\n    h3: s,\n    h4: s,\n    h5: s,\n    h6: s,\n    head: {\n      attrs: {},\n      children: ['title', 'base', 'link', 'style', 'meta', 'script', 'noscript', 'command'],\n    },\n    header: s,\n    hgroup: s,\n    hr: s,\n    html: {\n      attrs: {\n        manifest: null,\n      },\n      children: ['head', 'body'],\n    },\n    i: s,\n    iframe: {\n      attrs: {\n        src: null,\n        srcdoc: null,\n        name: null,\n        width: null,\n        height: null,\n        sandbox: ['allow-top-navigation', 'allow-same-origin', 'allow-forms', 'allow-scripts'],\n        seamless: ['', 'seamless'],\n      },\n    },\n    img: {\n      attrs: {\n        alt: null,\n        src: null,\n        ismap: null,\n        usemap: null,\n        width: null,\n        height: null,\n        crossorigin: ['anonymous', 'use-credentials'],\n      },\n    },\n    input: {\n      attrs: {\n        alt: null,\n        dirname: null,\n        form: null,\n        formaction: null,\n        height: null,\n        list: null,\n        max: null,\n        maxlength: null,\n        min: null,\n        name: null,\n        pattern: null,\n        placeholder: null,\n        size: null,\n        src: null,\n        step: null,\n        value: null,\n        width: null,\n        accept: ['audio/*', 'video/*', 'image/*'],\n        autocomplete: ['on', 'off'],\n        autofocus: ['', 'autofocus'],\n        checked: ['', 'checked'],\n        disabled: ['', 'disabled'],\n        formenctype: encs,\n        formmethod: methods,\n        formnovalidate: ['', 'novalidate'],\n        formtarget: targets,\n        multiple: ['', 'multiple'],\n        readonly: ['', 'readonly'],\n        required: ['', 'required'],\n        type: ['hidden', 'text', 'search', 'tel', 'url', 'email', 'password', 'datetime', 'date', 'month',\n          'week', 'time', 'datetime-local', 'number', 'range', 'color', 'checkbox', 'radio',\n          'file', 'submit', 'image', 'reset', 'button'],\n      },\n    },\n    ins: {\n      attrs: {\n        cite: null,\n        datetime: null,\n      },\n    },\n    kbd: s,\n    keygen: {\n      attrs: {\n        challenge: null,\n        form: null,\n        name: null,\n        autofocus: ['', 'autofocus'],\n        disabled: ['', 'disabled'],\n        keytype: ['RSA'],\n      },\n    },\n    label: {\n      attrs: {\n        for: null,\n        form: null,\n      },\n    },\n    legend: s,\n    li: {\n      attrs: {\n        value: null,\n      },\n    },\n    link: {\n      attrs: {\n        href: null,\n        type: null,\n        hreflang: langs,\n        media,\n        sizes: ['all', '16x16', '16x16 32x32', '16x16 32x32 64x64'],\n      },\n    },\n    map: {\n      attrs: {\n        name: null,\n      },\n    },\n    mark: s,\n    menu: {\n      attrs: {\n        label: null,\n        type: ['list', 'context', 'toolbar'],\n      },\n    },\n    meta: {\n      attrs: {\n        content: null,\n        charset: charsets,\n        name: ['viewport', 'application-name', 'author', 'description', 'generator', 'keywords'],\n        'http-equiv': ['content-language', 'content-type', 'default-style', 'refresh'],\n      },\n    },\n    meter: {\n      attrs: {\n        value: null,\n        min: null,\n        low: null,\n        high: null,\n        max: null,\n        optimum: null,\n      },\n    },\n    nav: s,\n    noframes: s,\n    noscript: s,\n    object: {\n      attrs: {\n        data: null,\n        type: null,\n        name: null,\n        usemap: null,\n        form: null,\n        width: null,\n        height: null,\n        typemustmatch: ['', 'typemustmatch'],\n      },\n    },\n    ol: {\n      attrs: {\n        reversed: ['', 'reversed'],\n        start: null,\n        type: ['1', 'a', 'A', 'i', 'I'],\n      },\n    },\n    optgroup: {\n      attrs: {\n        disabled: ['', 'disabled'],\n        label: null,\n      },\n    },\n    option: {\n      attrs: {\n        disabled: ['', 'disabled'],\n        label: null,\n        selected: ['', 'selected'],\n        value: null,\n      },\n    },\n    output: {\n      attrs: {\n        for: null,\n        form: null,\n        name: null,\n      },\n    },\n    p: s,\n    param: {\n      attrs: {\n        name: null,\n        value: null,\n      },\n    },\n    pre: s,\n    progress: {\n      attrs: {\n        value: null,\n        max: null,\n      },\n    },\n    q: {\n      attrs: {\n        cite: null,\n      },\n    },\n    rp: s,\n    rt: s,\n    ruby: s,\n    s,\n    samp: s,\n    script: {\n      attrs: {\n        type: ['text/javascript'],\n        src: null,\n        async: ['', 'async'],\n        defer: ['', 'defer'],\n        charset: charsets,\n      },\n    },\n    section: s,\n    select: {\n      attrs: {\n        form: null,\n        name: null,\n        size: null,\n        autofocus: ['', 'autofocus'],\n        disabled: ['', 'disabled'],\n        multiple: ['', 'multiple'],\n      },\n    },\n    small: s,\n    source: {\n      attrs: {\n        src: null,\n        type: null,\n        media: null,\n      },\n    },\n    span: s,\n    strike: s,\n    strong: s,\n    style: {\n      attrs: {\n        type: ['text/css'],\n        media,\n        scoped: null,\n      },\n    },\n    sub: s,\n    summary: s,\n    sup: s,\n    table: s,\n    tbody: s,\n    td: {\n      attrs: {\n        colspan: null,\n        rowspan: null,\n        headers: null,\n      },\n    },\n    textarea: {\n      attrs: {\n        dirname: null,\n        form: null,\n        maxlength: null,\n        name: null,\n        placeholder: null,\n        rows: null,\n        cols: null,\n        autofocus: ['', 'autofocus'],\n        disabled: ['', 'disabled'],\n        readonly: ['', 'readonly'],\n        required: ['', 'required'],\n        wrap: ['soft', 'hard'],\n      },\n    },\n    tfoot: s,\n    th: {\n      attrs: {\n        colspan: null,\n        rowspan: null,\n        headers: null,\n        scope: ['row', 'col', 'rowgroup', 'colgroup'],\n      },\n    },\n    thead: s,\n    time: {\n      attrs: {\n        datetime: null,\n      },\n    },\n    title: s,\n    tr: s,\n    track: {\n      attrs: {\n        src: null,\n        label: null,\n        default: null,\n        kind: ['subtitles', 'captions', 'descriptions', 'chapters', 'metadata'],\n        srclang: langs,\n      },\n    },\n    tt: s,\n    u: s,\n    ul: s,\n    var: s,\n    video: {\n      attrs: {\n        src: null,\n        poster: null,\n        width: null,\n        height: null,\n        crossorigin: ['anonymous', 'use-credentials'],\n        preload: ['auto', 'metadata', 'none'],\n        autoplay: ['', 'autoplay'],\n        mediagroup: ['movie'],\n        muted: ['', 'muted'],\n        controls: ['', 'controls'],\n      },\n    },\n    wbr: s,\n  };\n\n  const globalAttrs = {\n    accesskey: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n      'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    class: null,\n    contenteditable: ['true', 'false'],\n    contextmenu: null,\n    dir: ['ltr', 'rtl', 'auto'],\n    draggable: ['true', 'false', 'auto'],\n    dropzone: ['copy', 'move', 'link', 'string:', 'file:'],\n    hidden: ['hidden'],\n    id: null,\n    inert: ['inert'],\n    itemid: null,\n    itemprop: null,\n    itemref: null,\n    itemscope: ['itemscope'],\n    itemtype: null,\n    lang: ['en', 'es'],\n    spellcheck: ['true', 'false'],\n    autocorrect: ['true', 'false'],\n    autocapitalize: ['true', 'false'],\n    style: null,\n    tabindex: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    title: null,\n    translate: ['yes', 'no'],\n    onclick: null,\n    rel: ['stylesheet', 'alternate', 'author', 'bookmark', 'help', 'license', 'next', 'nofollow', 'noreferrer',\n      'prefetch', 'prev', 'search', 'tag'],\n  };\n\n  function populate(obj) {\n    for (const attr in globalAttrs) {\n      if (globalAttrs.hasOwnProperty(attr)) { obj.attrs[attr] = globalAttrs[attr]; }\n    }\n  }\n\n  populate(s);\n  for (const tag in data) {\n    if (data.hasOwnProperty(tag) && data[tag] != s) { populate(data[tag]); }\n  }\n\n  CodeMirror.htmlSchema = data;\n\n  function htmlHint(cm, options) {\n    const local = {\n      schemaInfo: data,\n    };\n    if (options) { for (const opt in options) local[opt] = options[opt]; }\n    return CodeMirror.hint.xml(cm, local);\n  }\n  CodeMirror.registerHelper('hint', 'html', htmlHint);\n\n  CodeMirror.htmlHint = htmlHint;\n}\n","class HTMLBuilder {\r\n  static buildEditor() {\r\n    const container = document.querySelector('#editor');\r\n\r\n    const textArea = document.createElement('textarea');\r\n    textArea.name = 'editor-textarea';\r\n    textArea.classList.add('editor-textarea');\r\n\r\n    container.appendChild(textArea);\r\n\r\n    return textArea;\r\n  }\r\n\r\n  static buildPreviewFrame() {\r\n    const container = document.querySelector('#preview');\r\n\r\n    const frame = document.createElement('iframe');\r\n    frame.title = 'Preview Window';\r\n    frame.name = 'preview-frame';\r\n    frame.classList.add('preview-frame');\r\n\r\n    container.appendChild(frame);\r\n\r\n    return frame;\r\n  }\r\n}\r\n\r\nexport { HTMLBuilder };\r\n","import { setupCodeMirror } from './setupCodeMirror.js';\r\n\r\n// import { getMimetype } from '../File/utils/getMimetype';\r\nimport { HTMLBuilder } from '../HTML/HTMLBuilder.js';\r\n\r\nclass Editor {\r\n  constructor(files) {\r\n    this.files = files;\r\n    this.activeFile = null;\r\n    this.fileDirty = false;\r\n\r\n    const textArea = HTMLBuilder.buildEditor();\r\n\r\n    this.cm = setupCodeMirror(textArea);\r\n    this.container = document.querySelector('.CodeMirror');\r\n  }\r\n\r\n  get isDirty() {\r\n    return Object.values(this.files).some((file) => {\r\n      return file.isDirty;\r\n    });\r\n  }\r\n\r\n  setActiveDocument(file) {\r\n    this.activeFile = file;\r\n\r\n    if (file === null) {\r\n      // NOTE: there doesn't seem to be any CodeMirror commands to delete a doc\r\n      // this is the only approach possible. Hopefully no memory leaks!\r\n      this.cm.setValue('');\r\n      this.cm.clearHistory();\r\n      this.setReadOnly(true);\r\n      this.cm.display.input.blur();\r\n    } else if (file.document) {\r\n      this.cm.swapDoc(file.document);\r\n      this.cm.refresh();\r\n      this.setReadOnly(file.readOnly);\r\n      this.focus();\r\n    } else {\r\n      console.warn(`Editor could not open file: ${file}`);\r\n    }\r\n  }\r\n\r\n  setEventCallback(eventType, callback) {\r\n    this.cm.on(eventType, callback);\r\n  }\r\n\r\n  resetActiveFile() {\r\n    if (this.activeFile) {\r\n      this.activeFile.reset();\r\n    }\r\n  }\r\n\r\n  resetAllFiles() {\r\n    Object.values(this.files).forEach((file) => {\r\n      file.reset();\r\n    });\r\n  }\r\n\r\n  refresh() {\r\n    if (this.cm) {\r\n      this.cm.refresh();\r\n    }\r\n  }\r\n\r\n  focus() {\r\n    if (this.cm) this.cm.focus();\r\n  }\r\n\r\n  setReadOnly(bool) {\r\n    this.cm.setOption('readOnly', bool);\r\n    if (bool) {\r\n      this.container.classList.add('read-only');\r\n    } else {\r\n      this.container.classList.remove('read-only');\r\n    }\r\n  }\r\n\r\n  setComparisonState(state) {\r\n    for (const file of Object.values(this.files)) {\r\n      if (file.comparisonEnabled) {\r\n        file.setState(state);\r\n      }\r\n    }\r\n    this.setActiveDocument(this.activeFile);\r\n  }\r\n}\r\n\r\nexport { Editor };\r\n","import CodeMirror from 'codemirror';\r\n\r\nimport { addFunctionsToCodeMirror } from './utils/addFunctionToCodeMirror.js';\r\n\r\nfunction setupCodeMirror(textArea) {\r\n  addFunctionsToCodeMirror();\r\n\r\n  return CodeMirror.fromTextArea(textArea, {\r\n    // autoRefresh: true, // doesn't work\r\n    // scrollbarStyle: 'native',\r\n    // scrollbarStyle: 'simple',\r\n    // scrollbarStyle: 'null',\r\n    // theme: 'ambiance',\r\n    autoCloseBrackets: true,\r\n    autoCloseTags: true,\r\n    autoFocus: true,\r\n    autoCorrect: true,\r\n    flattenSpans: true,\r\n    foldGutter: true,\r\n    lineNumbers: true,\r\n    lint: true,\r\n    matchBrackets: true,\r\n    mode: 'text/html',\r\n    pollInterval: 200,\r\n    resetSelectionOnContextMenu: false,\r\n    screenReaderLabel: 'Inline Code Editor Text Area',\r\n    showCursorWhenSelecting: false,\r\n    smartIndent: true,\r\n    spellcheck: true,\r\n    styleActiveLine: true,\r\n    tabIndex: 2,\r\n    tabSize: 2,\r\n    // lineWrapping: true,\r\n    extraKeys: {\r\n      'Ctrl-Space': 'autocomplete',\r\n      'Cmd-Space': 'autocomplete',\r\n      'Ctrl-Q': (cm) => {\r\n        cm.foldCode(cm.getCursor());\r\n      },\r\n      'Cmd-Q': (cm) => {\r\n        cm.foldCode(cm.getCursor());\r\n      },\r\n      'Cmd-/': 'toggleComment',\r\n      'Ctrl-/': 'toggleComment',\r\n      F11(cm) {\r\n        cm.setOption('fullScreen', !cm.getOption('fullScreen'));\r\n      },\r\n      Esc(cm) {\r\n        if (cm.getOption('fullScreen'))\r\n          cm.setOption('fullScreen', false);\r\n      },\r\n    },\r\n    gutters: [\r\n      'CodeMirror-linenumbers',\r\n      'CodeMirror-foldgutter',\r\n      'CodeMirror-lint-markers',\r\n    ],\r\n  });\r\n}\r\n\r\nexport { setupCodeMirror };\r\n","const textURLS = ['css', 'html', 'js', 'json'];\r\nconst imageURLS = ['jpg', 'png'];\r\nconst modelsURLS = ['glb'];\r\n\r\nfunction classifyURL(url) {\r\n  const ext = url.split('.').pop();\r\n\r\n  if (textURLS.includes(ext)) {\r\n    return 'text';\r\n  } else if (imageURLS.includes(ext)) {\r\n    return 'image';\r\n  } else if (modelsURLS.includes(ext)) {\r\n    return 'model';\r\n  }\r\n  return 'text';\r\n}\r\n\r\nexport { classifyURL };\r\n","async function fetchFiles(urls, as = 'text', serverDirectory) {\r\n  const filePromises = [];\r\n\r\n  for (const url of urls) {\r\n    const serverURL = url.replace(/assets\\//g, serverDirectory);\r\n\r\n    filePromises.push(fetch(serverURL));\r\n  }\r\n\r\n  const responses = await Promise.all(filePromises);\r\n  return await Promise.all(\r\n    responses.map((response) => {\r\n      switch (as) {\r\n        case 'text':\r\n          return response.text();\r\n        case 'blob':\r\n          return response.blob();\r\n      }\r\n    }),\r\n  );\r\n}\r\n\r\nexport { fetchFiles };\r\n","// Possible imports:\r\n\r\n// import { Camera } from 'three';\r\n// import { Camera } from '../../../vendor/three/build/three.module.js'; // Hard! How many  ../../?\r\n// import { Camera } from 'https://unpkg.com/three@0.116.0/build/three.module.js';\r\n\r\n// import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\n// import { OrbitControls } from '../../../vendor/three/examples/jsm/controls/OrbitControls.js';\r\n// import { OrbitControls } from 'https://unpkg.com/three@0.116.0/examples/jsm/controls/OrbitControls.js';\r\n\r\nimport { REVISION } from 'three/src/constants.js';\r\n\r\nfunction convertImportsInText(text, oldStyle, newStyle) {\r\n  if (!text) return;\r\n  let convertedText = text;\r\n\r\n  const npmBuildImport = \"from 'three'\";\r\n  const npmExampleImport = \"from 'three/examples\";\r\n\r\n  // const relativeBuildImport =\r\n  //   \"from '../../../vendor/three/build/three.module.js'\";\r\n  // const relativeExampleImport =\r\n  //   \"from '../../../vendor/three/examples\";\r\n\r\n  const cdnBuildImport = `from 'https://unpkg.com/three@0.${REVISION}.0/build/three.module.js'`;\r\n  const cdnExampleImport = `from 'https://unpkg.com/three@0.${REVISION}.0/examples`;\r\n\r\n  let newBuildURl = npmBuildImport;\r\n  let newExampleURl = npmExampleImport;\r\n\r\n  if (newStyle === 'cdn') {\r\n    newBuildURl = cdnBuildImport;\r\n    newExampleURl = cdnExampleImport;\r\n  }\r\n  // else if (newStyle === 'relative') {\r\n  //   newBuildURl = relativeBuildImport;\r\n  //   newExampleURl = relativeExampleImport; // TODO proper number of ../../\r\n  // }\r\n\r\n  switch (oldStyle) {\r\n    case 'npm':\r\n      convertedText = convertedText.replace(\r\n        new RegExp(npmBuildImport, 'g'),\r\n        newBuildURl,\r\n      );\r\n      convertedText = convertedText.replace(\r\n        new RegExp(npmExampleImport, 'g'),\r\n        newExampleURl,\r\n      );\r\n      break;\r\n    // case 'relative':\r\n    //   convertedText = convertedText.replace(\r\n    //     new RegExp(relativeBuildImport, 'g'),\r\n    //     newBuildURl,\r\n    //   );\r\n    //   convertedText = convertedText.replace(\r\n    //     new RegExp(relativeExampleImport, 'g'),\r\n    //     newExampleURl,\r\n    //   );\r\n    //   break;\r\n    case 'cdn':\r\n      convertedText = convertedText.replace(\r\n        new RegExp(cdnBuildImport, 'g'),\r\n        newBuildURl,\r\n      );\r\n      convertedText = convertedText.replace(\r\n        new RegExp(cdnExampleImport, 'g'),\r\n        newExampleURl,\r\n      );\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return convertedText;\r\n}\r\n\r\nexport { convertImportsInText };\r\n","export const REVISION = '117';\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport const TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const FrontFaceDirectionCW = 0;\nexport const FrontFaceDirectionCCW = 1;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const VSMShadowMap = 3;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const Uncharted2ToneMapping = 3;\nexport const CineonToneMapping = 4;\nexport const ACESFilmicToneMapping = 5;\n\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const SphericalReflectionMapping = 305;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipmapNearestFilter = 1004;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipmapLinearFilter = 1005;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipmapNearestFilter = 1007;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipmapLinearFilter = 1008;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RedFormat = 1028;\nexport const RedIntegerFormat = 1029;\nexport const RGFormat = 1030;\nexport const RGIntegerFormat = 1031;\nexport const RGBIntegerFormat = 1032;\nexport const RGBAIntegerFormat = 1033;\n\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGB_ETC2_Format = 37492;\nexport const RGBA_ETC2_EAC_Format = 37496;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const RGBA_BPTC_Format = 36492;\nexport const SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport const SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport const SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport const SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport const SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport const SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport const SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport const SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport const SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport const SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport const SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport const SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport const SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport const SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const NormalAnimationBlendMode = 2500;\nexport const AdditiveAnimationBlendMode = 2501;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const LogLuvEncoding = 3003;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\nexport const TangentSpaceNormalMap = 0;\nexport const ObjectSpaceNormalMap = 1;\n\nexport const ZeroStencilOp = 0;\nexport const KeepStencilOp = 7680;\nexport const ReplaceStencilOp = 7681;\nexport const IncrementStencilOp = 7682;\nexport const DecrementStencilOp = 7683;\nexport const IncrementWrapStencilOp = 34055;\nexport const DecrementWrapStencilOp = 34056;\nexport const InvertStencilOp = 5386;\n\nexport const NeverStencilFunc = 512;\nexport const LessStencilFunc = 513;\nexport const EqualStencilFunc = 514;\nexport const LessEqualStencilFunc = 515;\nexport const GreaterStencilFunc = 516;\nexport const NotEqualStencilFunc = 517;\nexport const GreaterEqualStencilFunc = 518;\nexport const AlwaysStencilFunc = 519;\n\nexport const StaticDrawUsage = 35044;\nexport const DynamicDrawUsage = 35048;\nexport const StreamDrawUsage = 35040;\nexport const StaticReadUsage = 35045;\nexport const DynamicReadUsage = 35049;\nexport const StreamReadUsage = 35041;\nexport const StaticCopyUsage = 35046;\nexport const DynamicCopyUsage = 35050;\nexport const StreamCopyUsage = 35042;\n","import CodeMirror from 'codemirror';\r\nimport { getMimetype } from './utils/getMimetype.js';\r\nimport { classifyURL } from '../utils/classifyURL.js';\r\nimport { convertImportsInText } from './utils/convertImportsInText.js';\r\nimport { getNameFromURL } from './utils/getNameFromURL.js';\r\n\r\nclass File {\r\n  constructor(data) {\r\n    this.comparisonEnabled = data.comparisonsEnabled;\r\n    this.deletable = data.deletable || false;\r\n    this.name = getNameFromURL(data.url);\r\n\r\n    this.url = data.url;\r\n    this.type = data.url.split('.').pop();\r\n    this.dataType = classifyURL(this.url);\r\n    this.mimeType = getMimetype(this.type);\r\n\r\n    if (this.dataType === 'text') {\r\n      this.setupText(data.text);\r\n    }\r\n\r\n    this.serverURL = this.setServerURL(data.serverDirectory);\r\n\r\n    this.importStyle = this.type === 'js' ? 'npm' : null;\r\n\r\n    this.readOnly = !!this.url.includes('vendor');\r\n\r\n    this.cmDoc = null;\r\n\r\n    this.setState('start');\r\n    this.inactiveStateHistory = null;\r\n  }\r\n\r\n  setupText(text) {\r\n    if (this.readOnly || !this.comparisonEnabled) {\r\n      // case one: comparison disabled, single text field OR readonly\r\n      this.originalText = text || '';\r\n      this.workingText = this.originalText;\r\n    } else if (this.comparisonEnabled && !text.start) {\r\n      // case two: comparison enabled, start and final texts are identical\r\n      this.originalStartText = text || '';\r\n      this.workingStartText = this.originalStartText;\r\n      this.originalFinalText = text || '';\r\n      this.workingFinalText = this.originalFinalText;\r\n    } else {\r\n      // case three: comparison enabled, start and final texts are different\r\n      this.originalStartText = text.start || '';\r\n      this.workingStartText = this.originalStartText;\r\n      this.originalFinalText = text.final || '';\r\n      this.workingFinalText = this.originalFinalText;\r\n    }\r\n  }\r\n\r\n  // state = 'start' / 'final'\r\n  setState(state) {\r\n    this.state = state;\r\n\r\n    if (!this.cmDoc) return;\r\n\r\n    if (this.isDirty) {\r\n      if (state === 'start') {\r\n        this.workingFinalText = this.contents;\r\n      } else {\r\n        this.workingStartText = this.contents;\r\n      }\r\n    }\r\n\r\n    const history = this.cmDoc.getHistory();\r\n    const cursorPos = this.cmDoc.getCursor();\r\n\r\n    this.cmDoc.setValue(this.activeText);\r\n    this.cmDoc.clearHistory();\r\n\r\n    this.cmDoc.setCursor(cursorPos);\r\n    if (this.inactiveStateHistory) {\r\n      this.cmDoc.setHistory(this.inactiveStateHistory);\r\n    }\r\n\r\n    this.inactiveStateHistory = history;\r\n\r\n    if (state === 'start') {\r\n      if (this.workingStartText === this.originalStartText) {\r\n        this.cmDoc.markClean();\r\n      }\r\n    }\r\n\r\n    if (state === 'final') {\r\n      if (this.workingFinalText === this.originalFinalText) {\r\n        this.cmDoc.markClean();\r\n      }\r\n    }\r\n  }\r\n\r\n  setServerURL(serverDirectory) {\r\n    return `/${serverDirectory}/${this.url}`.replace(/\\/\\//g, '/');\r\n  }\r\n\r\n  get activeText() {\r\n    if (!this.comparisonEnabled) {\r\n      return this.workingText;\r\n    } else if (this.state === 'start') {\r\n      return this.workingStartText;\r\n    }\r\n    return this.workingFinalText;\r\n  }\r\n\r\n  get folder() {\r\n    const res = this.url.split('/');\r\n    res.pop();\r\n    return res.join('/');\r\n  }\r\n\r\n  get document() {\r\n    if (!this.cmDoc) {\r\n      this.cmDoc = CodeMirror.Doc(this.activeText, this.mimeType);\r\n    }\r\n    return this.cmDoc;\r\n  }\r\n\r\n  get contents() {\r\n    if (!this.cmDoc) {\r\n      return this.activeText;\r\n    }\r\n    return this.document.getValue();\r\n  }\r\n\r\n  set contents(text) {\r\n    this.document.setValue(text);\r\n  }\r\n\r\n  get isDirty() {\r\n    if (!this.cmDoc) return false;\r\n    else return !this.cmDoc.isClean();\r\n  }\r\n\r\n  reset() {\r\n    if (!this.comparisonEnabled) {\r\n      this.workingText = this.originalText;\r\n    } else if (this.state === 'start') {\r\n      this.workingStartText = this.originalStartText;\r\n    } else {\r\n      this.workingFinalText = this.originalFinalText;\r\n    }\r\n    if (this.cmDoc) {\r\n      this.contents = this.activeText;\r\n      this.cmDoc.markClean();\r\n    }\r\n  }\r\n\r\n  getContentsWithImportStyle(style) {\r\n    if (\r\n      this.importStyle === style ||\r\n      this.type !== 'js' ||\r\n      this.url.indexOf('src') !== 0\r\n    ) {\r\n      return this.contents;\r\n    }\r\n\r\n    return convertImportsInText(\r\n      this.contents,\r\n      this.importStyle,\r\n      style,\r\n    );\r\n  }\r\n\r\n  setImportStyle(style) {\r\n    if (\r\n      this.type !== 'js' ||\r\n      this.url.includes('vendor') ||\r\n      this.importStyle === style\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.workingText = convertImportsInText(\r\n      this.workingText,\r\n      this.importStyle,\r\n      style,\r\n    );\r\n    this.workingStartText = convertImportsInText(\r\n      this.workingStartText,\r\n      this.importStyle,\r\n      style,\r\n    );\r\n    this.workingFinalText = convertImportsInText(\r\n      this.workingFinalText,\r\n      this.importStyle,\r\n      style,\r\n    );\r\n\r\n    if (this.cmDoc) {\r\n      this.contents = convertImportsInText(\r\n        this.contents,\r\n        this.importStyle,\r\n        style,\r\n      );\r\n    }\r\n\r\n    this.importStyle = style;\r\n  }\r\n}\r\n\r\nexport { File };\r\n","function getNameFromURL(url) {\r\n  const list = url.split('/');\r\n\r\n  return list[list.length - 1];\r\n}\r\n\r\nexport { getNameFromURL };\r\n","function getMimetype(type) {\r\n  switch (type) {\r\n    case 'html':\r\n      return 'text/html';\r\n    case 'css':\r\n      return 'text/css';\r\n    case 'js':\r\n      return 'text/javascript';\r\n    case 'jpg':\r\n    case 'jpeg':\r\n      return 'image/jpeg';\r\n    case 'png':\r\n      return 'image/png';\r\n    case 'glb':\r\n      return 'model/gltf-binary';\r\n    default:\r\n      return 'text/plain';\r\n  }\r\n}\r\n\r\nexport { getMimetype };\r\n","// Process array of URLS and return File objects\r\n\r\nimport { classifyURL } from '../utils/classifyURL.js';\r\nimport { fetchFiles } from './utils/fetchFiles.js';\r\nimport { File } from '../File/File.js';\r\n\r\nclass Fetcher {\r\n  static async fetchFiles(\r\n    urls,\r\n    startURLS,\r\n    finalURLS,\r\n    serverDirectory,\r\n    stripDirectory,\r\n    comparisonsEnabled,\r\n  ) {\r\n    this.urls = urls;\r\n\r\n    this.serverDirectory = serverDirectory;\r\n    this.stripDirectory = stripDirectory;\r\n\r\n    // fetch these\r\n    const textURLs = [];\r\n\r\n    // don't fetch these\r\n    const assetURLs = [];\r\n\r\n    for (const url of this.urls) {\r\n      if (classifyURL(url) === 'text') {\r\n        textURLs.push(url);\r\n      } else {\r\n        assetURLs.push(url);\r\n      }\r\n    }\r\n\r\n    const textFiles = await this.fetchTextURLs(\r\n      textURLs,\r\n      comparisonsEnabled,\r\n    );\r\n    const assetFiles = this.processAssetsURLs(assetURLs);\r\n\r\n    return { ...textFiles, ...assetFiles };\r\n  }\r\n\r\n  static async fetchTextURLs(urls, comparisonsEnabled) {\r\n    const serverURLs = urls.map((url) =>\r\n      `/${this.serverDirectory}/${url}`.replace(/\\/\\//g, '/'),\r\n    );\r\n    const textData = await fetchFiles(\r\n      serverURLs,\r\n      'text',\r\n      this.serverDirectory,\r\n    );\r\n\r\n    const fileData = {};\r\n    for (const [index, text] of textData.entries()) {\r\n      fileData[urls[index].replace(this.stripDirectory, '')] = text;\r\n    }\r\n\r\n    const fileDataPaired = {};\r\n    for (const [key, value] of Object.entries(fileData)) {\r\n      if (key.includes('.start.js')) {\r\n        fileDataPaired[key.replace('.start.js', '.js')] = {\r\n          start: value,\r\n          final: fileData[key.replace('.start.js', '.final.js')],\r\n        };\r\n      } else if (!key.includes('.final.js')) {\r\n        fileDataPaired[key] = value;\r\n      }\r\n    }\r\n\r\n    const results = {};\r\n    for (const [key, text] of Object.entries(fileDataPaired)) {\r\n      const url = key.replace(this.stripDirectory, ''); // maybe not required?\r\n      results[url] = new File({\r\n        url,\r\n        text,\r\n        serverDirectory: this.serverDirectory,\r\n        comparisonsEnabled,\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n\r\n  static processAssetsURLs(urls) {\r\n    const results = {};\r\n    for (const url of urls) {\r\n      results[url.replace(this.stripDirectory, '')] = new File({\r\n        url,\r\n        serverDirectory: this.serverDirectory,\r\n      });\r\n    }\r\n    return results;\r\n  }\r\n}\r\n\r\nexport { Fetcher };\r\n","// path data: https://www.materialui.co/icon/flag\r\n\r\n// folderOpen: 'icon far fa-folder-open open-icon',\r\n// folderClosed: 'icon far fa-folder closed-icon',,\r\n// glb: 'icon fas fa-cube',\r\n\r\nconst paths = {\r\n  folderOpen:\r\n    'M527.9 224H480v-48c0-26.5-21.5-48-48-48H272l-64-64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h400c16.5 0 31.9-8.5 40.7-22.6l79.9-128c20-31.9-3-73.4-40.7-73.4zM48 118c0-3.3 2.7-6 6-6h134.1l64 64H426c3.3 0 6 2.7 6 6v42H152c-16.8 0-32.4 8.8-41.1 23.2L48 351.4zm400 282H72l77.2-128H528z',\r\n  folderClosed:\r\n    'M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z',\r\n  html:\r\n    'M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z',\r\n  css:\r\n    'M480 32l-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82H480z',\r\n  js:\r\n    'M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM243.8 381.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1v143.7zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6z',\r\n  image:\r\n    'M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z',\r\n  cube:\r\n    'M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z',\r\n};\r\n\r\nfunction createIcon(name, classes) {\r\n  const svg = document.createElementNS(\r\n    'http://www.w3.org/2000/svg',\r\n    'svg',\r\n  );\r\n\r\n  svg.classList.add('icon');\r\n\r\n  if (classes) svg.classList.add(...classes.split(' '));\r\n\r\n  svg.setAttribute('aria-hidden', 'true');\r\n  svg.setAttribute('viewBox', '0 0 512 512');\r\n  svg.setAttribute('role', 'img');\r\n  svg.setAttribute('width', '1em');\r\n  svg.setAttribute('height', '1em');\r\n\r\n  const path = document.createElementNS(\r\n    'http://www.w3.org/2000/svg',\r\n    'path',\r\n  );\r\n  path.setAttribute('fill', 'currentColor');\r\n  path.setAttribute('d', paths[name]);\r\n\r\n  svg.append(path);\r\n\r\n  return svg;\r\n}\r\n\r\nexport { createIcon };\r\n","// https://github.com/atlemagnussen/es6-tree#readme\n\nimport { createIcon } from '../../utils/createIcon.js';\n\n// note: \"node\" refers to custom data object, \"elem\" refers to HTML element\nclass EzTree {\n  constructor(parentId, config, data) {\n    this.selectedId = null;\n    this.parentId = parentId;\n    this.parentEl = document.getElementById(parentId);\n    if (!this.parentEl) {\n      throw new Error(`Can't find element with id ${parentId}`);\n    }\n    this.parentEl.classList.add('es6-tree');\n    this.config = config || {};\n    this.data = data;\n    this.handleInternalSelect();\n    this.append(this.parentEl, this.data);\n  }\n\n  append(elem, data) {\n    data.forEach((node) => {\n      const details = document.createElement('details');\n      if (node.expanded) {\n        details.open = true;\n      }\n      elem.appendChild(details);\n      const summary = document.createElement('summary');\n      const span = document.createElement('span');\n      if (node.id) {\n        summary.dataset.id = node.id;\n        span.dataset.id = node.id;\n      }\n      if (node.href) {\n        const a = document.createElement('a');\n        a.innerText = node.name;\n        a.dataset.id = node.id;\n        a.setAttribute('href', node.href);\n        span.appendChild(a);\n      } else {\n        span.innerText = node.name;\n      }\n      span.classList.add('node-text');\n      summary.appendChild(span);\n      this.handleType(node, span);\n      details.appendChild(summary);\n\n      if (\n        node.children &&\n        Array.isArray(node.children) &&\n        node.children.length > 0\n      ) {\n        this.append(details, node.folders);\n        this.append(details, node.files);\n        details.classList.add('folder');\n      } else {\n        details.classList.add('file');\n      }\n    });\n  }\n\n  handleType(node, elem) {\n    if (node.type === 'folder') elem.classList.add('folder');\n    else elem.classList.add('file');\n\n    if (node.type && this.config.classes) {\n      if (this.config.classes[node.type]) {\n        const classes = this.config.classes[node.type].split(' ');\n        elem.classList.add(...classes);\n      }\n    }\n\n    if (node.type && this.config.icons) {\n      if (node.type === 'folder') {\n        const openIcon = createIcon('folderOpen', 'open-icon');\n        elem.parentNode.insertBefore(openIcon, elem);\n\n        const closedIcon = createIcon('folderClosed', 'closed-icon');\n        elem.parentNode.insertBefore(closedIcon, elem);\n      } else if (this.config.icons[node.type]) {\n        const icon = createIcon(this.config.icons[node.type].icon);\n        elem.parentNode.insertBefore(icon, elem);\n      }\n    }\n  }\n\n  onSelect(callback, dontPreventDefault = false) {\n    this.onSelectCallback = (cev) => {\n      if (\n        ['SPAN', 'A', 'SUMMARY'].includes(cev.target.nodeName) &&\n        cev.target.dataset.id\n      ) {\n        const id = cev.target.dataset.id;\n        const node = this.findNode(id);\n        this.handleOpen(node);\n        if (!dontPreventDefault) {\n          cev.preventDefault();\n        } else {\n          cev.stopPropagation();\n        }\n        if (node && node.id) {\n          callback(node);\n        } else {\n          callback({ id });\n        }\n      }\n      if (cev.target.nodeName === 'DETAILS') {\n        cev.preventDefault();\n      }\n    };\n\n    this.parentEl.addEventListener('click', this.onSelectCallback);\n  }\n\n  dispose() {\n    this.parentEl.removeEventListener('click', this.onSelectCallback);\n    this.parentEl.removeEventListener(\n      'click',\n      this.onInternalSelectCallback,\n    );\n\n    this.parentEl.textContent = '';\n  }\n\n  select(id) {\n    this.handleSelect(id);\n    this.openContainingFolder(id);\n  }\n\n  getElemByDataID(id) {\n    return [...document.querySelectorAll('[data-id]')].filter(\n      (elem) => {\n        return elem.dataset.id === id && elem.nodeName === 'SUMMARY';\n      },\n    )[0];\n  }\n\n  getContainingFolder(id) {\n    let node = this.getElemByDataID(id);\n    while (node.parentNode.nodeName === 'DETAILS') {\n      node = node.parentNode;\n    }\n\n    return node;\n  }\n\n  openContainingFolder(id) {\n    this.getContainingFolder(id).setAttribute('open', '');\n  }\n\n  handleOpen(node) {\n    if (node.id && node.children && Array.isArray(node.children)) {\n      this.toggleOpen(node.id);\n    }\n  }\n\n  toggleOpen(id) {\n    const details = this.getElemByDataID(id).parentElement;\n    if (details) details.open = !details.open;\n  }\n\n  handleInternalSelect() {\n    this.onInternalSelectCallback = (cev) => {\n      if (\n        ['SPAN', 'A', 'SUMMARY'].includes(cev.target.nodeName) &&\n        cev.target.id\n      ) {\n        const id = cev.target.id;\n        const node = this.findNode(id);\n        if (node && node.id) {\n          this.handleSelect(node.id);\n        } else {\n          this.handleSelect({\n            id,\n          });\n        }\n      }\n    };\n    this.parentEl.addEventListener(\n      'click',\n      this.onInternalSelectCallback,\n    );\n  }\n\n  handleSelect(id) {\n    if (!id) {\n      return;\n    }\n\n    const node = this.findNode(id);\n    if (node.children) {\n      this.toggleOpen(id);\n    }\n\n    if (this.selectedId) {\n      if (this.selectedId === id) {\n        return;\n      }\n      const currentSelectedEl = this.parentEl.querySelector(\n        `span#${this.selectedId}`,\n      );\n      if (currentSelectedEl) {\n        this.unsetSelected(currentSelectedEl);\n      }\n    }\n    this.selectedId = id;\n    const selectedEl = this.parentEl.querySelector(`span#${id}`);\n    this.setSelected(selectedEl);\n  }\n\n  setSelected(elem) {\n    if (elem) {\n      elem.parentElement.setAttribute('selected', 'true');\n    }\n  }\n\n  unsetSelected(elem) {\n    elem.parentElement.removeAttribute('selected');\n  }\n\n  findNode(id) {\n    const itemPath = this.findPath(id, {\n      children: this.data,\n    });\n\n    if (!itemPath) {\n      return false;\n    }\n    if (!Array.isArray(itemPath) || itemPath.length === 0) {\n      return false;\n    }\n\n    const last = itemPath.pop();\n    return last;\n  }\n\n  selectNodeByPath(path) {\n    // Note: this is a slight hack since the node.src and node.folder attributes\n    // are a bit messed up. Should not be necessary to check the type\n    let type = path.split('.').pop();\n    if (type === undefined) {\n      type = 'folder';\n    }\n    let result = null;\n\n    function traverse(parent) {\n      if (parent.src === path && parent.type === type) {\n        result = parent.id;\n        return;\n      }\n\n      if (\n        parent.children &&\n        Array.isArray(parent.children) &&\n        parent.children.length > 0\n      ) {\n        for (let index = 0; index < parent.children.length; index++) {\n          const child = parent.children[index];\n          traverse(child);\n        }\n      }\n    }\n\n    traverse(this.data[0]);\n\n    if (result) this.select(result);\n  }\n\n  findPath(id, root) {\n    root = root || {\n      children: this.data,\n    };\n    const found = [];\n\n    if (\n      root.children &&\n      Array.isArray(root.children) &&\n      root.children.length > 0\n    ) {\n      const children = root.children;\n\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n\n        if (child.id === id) {\n          found.push(child);\n          return found;\n        }\n      }\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const grandChild = this.findPath(id, child);\n\n        if (\n          grandChild &&\n          Array.isArray(grandChild) &&\n          grandChild.length > 0\n        ) {\n          found.push(child);\n          found.push(...grandChild);\n          return found;\n        }\n      }\n    }\n    return null;\n  }\n}\n\nexport { EzTree };\n","import { EzTree } from './vendor/custom/es6tree.js';\r\n\r\nimport { buildDirectories } from './utils/buildDirectories.js';\r\n\r\nconst config = {\r\n  icons: {\r\n    folderOpen: {\r\n      icon: 'folderOpen',\r\n      classes: 'open-icon',\r\n    },\r\n    folderClosed: {\r\n      icon: 'folderClosed',\r\n      classes: 'closed-icon',\r\n    },\r\n    html: {\r\n      icon: 'html',\r\n    },\r\n    css: {\r\n      icon: 'css',\r\n    },\r\n    js: {\r\n      icon: 'js',\r\n    },\r\n    jpg: {\r\n      icon: 'image',\r\n    },\r\n    png: {\r\n      icon: 'image',\r\n    },\r\n    glb: {\r\n      icon: 'cube',\r\n    },\r\n  },\r\n};\r\n\r\nfunction buildFileTree(files, fileTypes, closedFolders) {\r\n  const directories = buildDirectories(\r\n    files,\r\n    fileTypes,\r\n    closedFolders,\r\n  );\r\n\r\n  return new EzTree('filetree', config, [directories]);\r\n}\r\n\r\nexport { buildFileTree };\r\n","function buildDirectories(files, fileTypes, closedFolders) {\r\n  const paths = Object.keys(files).sort();\r\n\r\n  const data = {\r\n    id: 'root',\r\n    name: 'Files',\r\n    folder: '',\r\n    type: 'folder',\r\n    expanded: true,\r\n    children: [],\r\n    files: [],\r\n    folders: [],\r\n  };\r\n\r\n  let currentID = 0;\r\n\r\n  paths.forEach((path) => {\r\n    path.split('/').reduce((dir, sub) => {\r\n      let child = dir.children.find((el) => el.name === sub);\r\n\r\n      if (child) {\r\n        return child;\r\n      }\r\n\r\n      const expanded = !closedFolders.includes(sub);\r\n\r\n      child = {\r\n        id: `item_${currentID++}`,\r\n        name: sub,\r\n        expanded,\r\n        children: [],\r\n        files: [],\r\n        folders: [],\r\n      };\r\n\r\n      const type = fileTypes.filter((ext) => sub.includes(ext))[0];\r\n\r\n      if (type) {\r\n        child.type = type.replace('.', '');\r\n        let folder = path.split('/');\r\n        folder.pop();\r\n        child.folder = `${folder.join('/')}`;\r\n        dir.files.push(child);\r\n      } else {\r\n        child.type = 'folder';\r\n        child.folder = `${path.split(sub)[0]}${sub}`;\r\n        dir.folders.push(child);\r\n      }\r\n      child.file = files[path];\r\n      child.src = path;\r\n      dir.children.push(child);\r\n\r\n      return child;\r\n    }, data);\r\n  });\r\n\r\n  return data;\r\n}\r\n\r\nexport { buildDirectories };\r\n","import { buildFileTree } from './buildFileTree.js';\r\nimport { File } from '../File/File.js';\r\nimport { sanitiseFileName } from './utils/sanitiseFileName.js';\r\n\r\nclass FileTree {\r\n  constructor(\r\n    files,\r\n    fileTypes,\r\n    closedFolders = [],\r\n    editor,\r\n    imagePreview,\r\n    comparisonsEnabled,\r\n  ) {\r\n    this.files = files;\r\n    this.fileTypes = fileTypes;\r\n    this.closedFolders = closedFolders;\r\n    this.editor = editor;\r\n    this.imagePreview = imagePreview;\r\n    this.currentFolder = '';\r\n    this.currentFile = null;\r\n    this.comparisonsEnabled = comparisonsEnabled;\r\n\r\n    this.init();\r\n\r\n    this.setupCreateFileButton();\r\n    this.setupDeleteFileButton();\r\n  }\r\n\r\n  dispose() {\r\n    this.tree.dispose();\r\n  }\r\n\r\n  init() {\r\n    this.tree = this.buildTree();\r\n    this.setupOnSelect();\r\n  }\r\n\r\n  buildTree() {\r\n    return buildFileTree(\r\n      this.files,\r\n      this.fileTypes,\r\n      this.closedFolders,\r\n    );\r\n  }\r\n\r\n  setEventCallback(eventType, callback) {\r\n    this.tree.on(eventType, callback);\r\n  }\r\n\r\n  setSelectedFile(file) {\r\n    this.onSelectFile(file);\r\n    this.currentFolder = file.folder;\r\n\r\n    this.tree.selectNodeByPath(file.url);\r\n  }\r\n\r\n  selectItem(item) {\r\n    this.currentFolder = item.folder;\r\n    if (item.file) {\r\n      this.onSelectFile(item.file);\r\n    } else {\r\n      this.currentFile = null;\r\n    }\r\n  }\r\n\r\n  onSelectFile(file) {\r\n    switch (file.type) {\r\n      case 'js':\r\n      case 'html':\r\n      case 'css':\r\n        this.onSelectTextFile(file);\r\n        break;\r\n      case 'png':\r\n      case 'jpg':\r\n        this.onSelectImage(file);\r\n        break;\r\n      case 'glb':\r\n        this.onSelectModel(file);\r\n        break;\r\n      default:\r\n        // other file types: do nothing for now\r\n        break;\r\n    }\r\n    this.currentFile = file;\r\n    this.setControlsState(file);\r\n  }\r\n\r\n  onSelectModel(file) {\r\n    // TODO\r\n  }\r\n\r\n  onSelectImage(file) {\r\n    this.editor.container.classList.add('show-image');\r\n    this.imagePreview.src = file.serverURL;\r\n  }\r\n\r\n  onSelectTextFile(file) {\r\n    // if (file.deletable) {}\r\n    this.editor.container.classList.remove('show-image');\r\n    this.editor.setActiveDocument(file);\r\n  }\r\n\r\n  setupOnSelect() {\r\n    this.tree.onSelect(this.selectItem.bind(this));\r\n  }\r\n\r\n  setControlsState(file) {\r\n    if (file && file.deletable && !(file.type === 'folder')) {\r\n      this.deleteFileButton.disabled = false;\r\n    } else {\r\n      this.deleteFileButton.disabled = true;\r\n    }\r\n  }\r\n\r\n  createFile() {\r\n    const defaultText =\r\n      this.currentFolder === 'styles' ? 'file.css' : 'file.js';\r\n\r\n    // https://github.com/janmarkuslanger/attention.js/\r\n    // https://github.com/makeusabrew/bootbox\r\n    const name = prompt(\r\n      'Enter a file name with extension .js, .html, or .css. \\nInclude slashes (folder/file.js) to create folders.',\r\n      defaultText,\r\n    );\r\n    if (!name) return;\r\n\r\n    const sanitisedName = sanitiseFileName(name);\r\n\r\n    if (!sanitisedName) {\r\n      alert('Invalid file name!');\r\n      return;\r\n    }\r\n\r\n    const url = this.currentFolder\r\n      ? `${this.currentFolder}/${sanitisedName}`\r\n      : name;\r\n\r\n    const data = {\r\n      url,\r\n      text: '',\r\n      deletable: true,\r\n    };\r\n\r\n    data.type = name.includes('.') ? name.split('.').pop() : 'folder';\r\n    data.comparisonsEnabled = this.comparisonsEnabled;\r\n\r\n    const file = new File(data);\r\n\r\n    this.files[data.url] = file;\r\n    return file;\r\n  }\r\n\r\n  deleteFile(file) {\r\n    delete this.files[file.url];\r\n  }\r\n\r\n  setupCreateFileButton() {\r\n    // TODO-HIGH: onload file is created at root even when other directory is selected\r\n    const button = document.querySelector('#create-file-button');\r\n\r\n    button.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const file = this.createFile();\r\n      button.blur();\r\n      if (!file) return;\r\n      this.dispose();\r\n      this.init();\r\n      this.setSelectedFile(file);\r\n    });\r\n  }\r\n\r\n  setupDeleteFileButton() {\r\n    this.deleteFileButton = document.querySelector(\r\n      '#delete-file-button',\r\n    );\r\n\r\n    this.deleteFileButton.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      if (!this.currentFile) {\r\n        return;\r\n      }\r\n      this.deleteFile(this.currentFile);\r\n      this.dispose();\r\n      this.init();\r\n      this.setControlsState();\r\n      this.currentFolder = '';\r\n      this.editor.setActiveDocument(null);\r\n    });\r\n  }\r\n}\r\n\r\nexport { FileTree };\r\n","import { validateFileName } from './validateFileName.js';\r\n\r\nfunction sanitiseFileName(name) {\r\n  const sanitisedName = name\r\n    .replace(/[^a-z0-9_.\\/]/gi, '')\r\n    .replace(/\\/$/, '');\r\n\r\n  if (!validateFileName(sanitisedName)) {\r\n    return null;\r\n  }\r\n  return sanitisedName;\r\n}\r\n\r\nexport { sanitiseFileName };\r\n","function validateFileName(name) {\r\n  const validExtensions = ['js', 'css', 'html'];\r\n\r\n  if (!name.includes('.')) {\r\n    return false;\r\n    // return true; // return true to enable empty folders (buggy)\r\n  } else if (validExtensions.includes(name.split('.').pop())) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport { validateFileName };\r\n","import { HTMLBuilder } from '../HTML/HTMLBuilder.js';\r\nimport { uuid } from './utils/uuid.js';\r\n\r\nclass Preview {\r\n  constructor() {\r\n    this.frame = HTMLBuilder.buildPreviewFrame();\r\n    this.externalPreviews = {};\r\n    this.setupLogging();\r\n\r\n    this.previewHider = document.querySelector('#preview-overlay');\r\n\r\n    this.frame.onload = () => {\r\n      this.onLoad();\r\n\r\n      // hiding the preview during refresh reduces flickering\r\n      this.previewHider.style.display = 'none';\r\n    };\r\n  }\r\n\r\n  setupLogging() {\r\n    // TODO\r\n    // this.consolePanel = document.querySelector('#preview-console');\r\n  }\r\n\r\n  update(src) {\r\n    this.previewHider.style.display = 'block';\r\n    this.frame.src = src;\r\n    for (const name of Object.keys(this.externalPreviews)) {\r\n      if (this.externalPreviews[name].closed) {\r\n        delete this.externalPreviews[name];\r\n      } else {\r\n        this.externalPreviews[name].location.href = this.frame.src;\r\n      }\r\n    }\r\n  }\r\n\r\n  createWindow(name) {\r\n    const childWindow = window.open(this.frame.src, '_blank');\r\n    if (childWindow) {\r\n      this.externalPreviews[name] = childWindow;\r\n    } else {\r\n      alert('Error: window was prevented from opening.');\r\n    }\r\n  }\r\n\r\n  createExternalPreview() {\r\n    if (this.frame && this.frame.src) {\r\n      const name = `${document.title} Preview ${uuid()}`;\r\n      this.createWindow(name);\r\n    }\r\n  }\r\n\r\n  onLoad() {}\r\n}\r\n\r\nexport { Preview };\r\n","function uuid() {\r\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\r\n    (\r\n      c ^\r\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\r\n    ).toString(16),\r\n  );\r\n}\r\n\r\nexport { uuid };\r\n","class Reset {\r\n  constructor(editor) {\r\n    this.editor = editor;\r\n    this.resetActiveFileButton = document.querySelector(\r\n      '#reset-active-file',\r\n    );\r\n    this.resetAllButton = document.querySelector('#reset-all-files');\r\n\r\n    this.setupResetActiveButton();\r\n    this.setupResetAllButton();\r\n  }\r\n\r\n  setButtonStates() {\r\n    this.resetActiveFileButton.disabled =\r\n      !!this.editor.activeFile && !this.editor.activeFile.isDirty;\r\n    this.resetAllButton.disabled = !this.editor.isDirty;\r\n  }\r\n\r\n  setupResetActiveButton() {\r\n    this.resetActiveFileButton.addEventListener('click', () => {\r\n      this.editor.resetActiveFile();\r\n      this.setButtonStates();\r\n    });\r\n  }\r\n\r\n  setupResetAllButton() {\r\n    this.resetAllButton.addEventListener('click', () => {\r\n      this.editor.resetAllFiles();\r\n      this.setButtonStates();\r\n    });\r\n  }\r\n}\r\n\r\nexport { Reset };\r\n","import { Reset } from './Reset.js';\r\n\r\nclass Controls {\r\n  static setupResetButtons(editor) {\r\n    return new Reset(editor);\r\n  }\r\n\r\n  static setupDownloadPackageButton(downloader) {\r\n    const downloadButton = document.querySelector('#download-button');\r\n\r\n    downloadButton.addEventListener('click', () => {\r\n      downloader.downloadPackage();\r\n    });\r\n  }\r\n\r\n  static setupImportStyleSelect(files, enabled) {\r\n    if (enabled !== 'true') {\r\n      return;\r\n    }\r\n    const selectMenu = document.querySelector('#select-import-style');\r\n    selectMenu.disabled = false;\r\n\r\n    selectMenu.addEventListener('change', (e) => {\r\n      const value = e.target.options[e.target.selectedIndex].value;\r\n\r\n      for (const file of Object.values(files)) {\r\n        file.setImportStyle(value);\r\n      }\r\n    });\r\n  }\r\n\r\n  static openPreviewInNewWindow(preview) {\r\n    const newWindowPreviewButton = document.querySelector(\r\n      '#new-window-preview',\r\n    );\r\n\r\n    newWindowPreviewButton.addEventListener('click', () => {\r\n      preview.createExternalPreview();\r\n      newWindowPreviewButton.blur();\r\n    });\r\n  }\r\n\r\n  static setupStartFinalCodeToggle(editor) {\r\n    const toggle = document.querySelector('#toggle-complete');\r\n    toggle.disabled = false;\r\n    toggle.addEventListener('click', (e) => {\r\n      if (e.target.checked) {\r\n        editor.setComparisonState('final');\r\n      } else {\r\n        editor.setComparisonState('start');\r\n      }\r\n      editor.focus();\r\n    });\r\n  }\r\n}\r\n\r\nexport { Controls };\r\n","// The programming goals of Split.js are to deliver readable, understandable and\r\n// maintainable code, while at the same time manually optimizing for tiny minified file size,\r\n// browser compatibility without additional requirements\r\n// and very few assumptions about the user's page layout.\r\nvar global = typeof window !== 'undefined' ? window : null;\r\nvar ssr = global === null;\r\nvar document = !ssr ? global.document : undefined;\r\n\r\n// Save a couple long function names that are used frequently.\r\n// This optimization saves around 400 bytes.\r\nvar addEventListener = 'addEventListener';\r\nvar removeEventListener = 'removeEventListener';\r\nvar getBoundingClientRect = 'getBoundingClientRect';\r\nvar gutterStartDragging = '_a';\r\nvar aGutterSize = '_b';\r\nvar bGutterSize = '_c';\r\nvar HORIZONTAL = 'horizontal';\r\nvar NOOP = function () { return false; };\r\n\r\n// Helper function determines which prefixes of CSS calc we need.\r\n// We only need to do this once on startup, when this anonymous function is called.\r\n//\r\n// Tests -webkit, -moz and -o prefixes. Modified from StackOverflow:\r\n// http://stackoverflow.com/questions/16625140/js-feature-detection-to-detect-the-usage-of-webkit-calc-over-calc/16625167#16625167\r\nvar calc = ssr\r\n    ? 'calc'\r\n    : ((['', '-webkit-', '-moz-', '-o-']\r\n          .filter(function (prefix) {\r\n              var el = document.createElement('div');\r\n              el.style.cssText = \"width:\" + prefix + \"calc(9px)\";\r\n\r\n              return !!el.style.length\r\n          })\r\n          .shift()) + \"calc\");\r\n\r\n// Helper function checks if its argument is a string-like type\r\nvar isString = function (v) { return typeof v === 'string' || v instanceof String; };\r\n\r\n// Helper function allows elements and string selectors to be used\r\n// interchangeably. In either case an element is returned. This allows us to\r\n// do `Split([elem1, elem2])` as well as `Split(['#id1', '#id2'])`.\r\nvar elementOrSelector = function (el) {\r\n    if (isString(el)) {\r\n        var ele = document.querySelector(el);\r\n        if (!ele) {\r\n            throw new Error((\"Selector \" + el + \" did not match a DOM element\"))\r\n        }\r\n        return ele\r\n    }\r\n\r\n    return el\r\n};\r\n\r\n// Helper function gets a property from the properties object, with a default fallback\r\nvar getOption = function (options, propName, def) {\r\n    var value = options[propName];\r\n    if (value !== undefined) {\r\n        return value\r\n    }\r\n    return def\r\n};\r\n\r\nvar getGutterSize = function (gutterSize, isFirst, isLast, gutterAlign) {\r\n    if (isFirst) {\r\n        if (gutterAlign === 'end') {\r\n            return 0\r\n        }\r\n        if (gutterAlign === 'center') {\r\n            return gutterSize / 2\r\n        }\r\n    } else if (isLast) {\r\n        if (gutterAlign === 'start') {\r\n            return 0\r\n        }\r\n        if (gutterAlign === 'center') {\r\n            return gutterSize / 2\r\n        }\r\n    }\r\n\r\n    return gutterSize\r\n};\r\n\r\n// Default options\r\nvar defaultGutterFn = function (i, gutterDirection) {\r\n    var gut = document.createElement('div');\r\n    gut.className = \"gutter gutter-\" + gutterDirection;\r\n    return gut\r\n};\r\n\r\nvar defaultElementStyleFn = function (dim, size, gutSize) {\r\n    var style = {};\r\n\r\n    if (!isString(size)) {\r\n        style[dim] = calc + \"(\" + size + \"% - \" + gutSize + \"px)\";\r\n    } else {\r\n        style[dim] = size;\r\n    }\r\n\r\n    return style\r\n};\r\n\r\nvar defaultGutterStyleFn = function (dim, gutSize) {\r\n    var obj;\r\n\r\n    return (( obj = {}, obj[dim] = (gutSize + \"px\"), obj ));\r\n};\r\n\r\n// The main function to initialize a split. Split.js thinks about each pair\r\n// of elements as an independant pair. Dragging the gutter between two elements\r\n// only changes the dimensions of elements in that pair. This is key to understanding\r\n// how the following functions operate, since each function is bound to a pair.\r\n//\r\n// A pair object is shaped like this:\r\n//\r\n// {\r\n//     a: DOM element,\r\n//     b: DOM element,\r\n//     aMin: Number,\r\n//     bMin: Number,\r\n//     dragging: Boolean,\r\n//     parent: DOM element,\r\n//     direction: 'horizontal' | 'vertical'\r\n// }\r\n//\r\n// The basic sequence:\r\n//\r\n// 1. Set defaults to something sane. `options` doesn't have to be passed at all.\r\n// 2. Initialize a bunch of strings based on the direction we're splitting.\r\n//    A lot of the behavior in the rest of the library is paramatized down to\r\n//    rely on CSS strings and classes.\r\n// 3. Define the dragging helper functions, and a few helpers to go with them.\r\n// 4. Loop through the elements while pairing them off. Every pair gets an\r\n//    `pair` object and a gutter.\r\n// 5. Actually size the pair elements, insert gutters and attach event listeners.\r\nvar Split = function (idsOption, options) {\r\n    if ( options === void 0 ) options = {};\r\n\r\n    if (ssr) { return {} }\r\n\r\n    var ids = idsOption;\r\n    var dimension;\r\n    var clientAxis;\r\n    var position;\r\n    var positionEnd;\r\n    var clientSize;\r\n    var elements;\r\n\r\n    // Allow HTMLCollection to be used as an argument when supported\r\n    if (Array.from) {\r\n        ids = Array.from(ids);\r\n    }\r\n\r\n    // All DOM elements in the split should have a common parent. We can grab\r\n    // the first elements parent and hope users read the docs because the\r\n    // behavior will be whacky otherwise.\r\n    var firstElement = elementOrSelector(ids[0]);\r\n    var parent = firstElement.parentNode;\r\n    var parentStyle = getComputedStyle ? getComputedStyle(parent) : null;\r\n    var parentFlexDirection = parentStyle ? parentStyle.flexDirection : null;\r\n\r\n    // Set default options.sizes to equal percentages of the parent element.\r\n    var sizes = getOption(options, 'sizes') || ids.map(function () { return 100 / ids.length; });\r\n\r\n    // Standardize minSize to an array if it isn't already. This allows minSize\r\n    // to be passed as a number.\r\n    var minSize = getOption(options, 'minSize', 100);\r\n    var minSizes = Array.isArray(minSize) ? minSize : ids.map(function () { return minSize; });\r\n\r\n    // Get other options\r\n    var expandToMin = getOption(options, 'expandToMin', false);\r\n    var gutterSize = getOption(options, 'gutterSize', 10);\r\n    var gutterAlign = getOption(options, 'gutterAlign', 'center');\r\n    var snapOffset = getOption(options, 'snapOffset', 30);\r\n    var dragInterval = getOption(options, 'dragInterval', 1);\r\n    var direction = getOption(options, 'direction', HORIZONTAL);\r\n    var cursor = getOption(\r\n        options,\r\n        'cursor',\r\n        direction === HORIZONTAL ? 'col-resize' : 'row-resize'\r\n    );\r\n    var gutter = getOption(options, 'gutter', defaultGutterFn);\r\n    var elementStyle = getOption(\r\n        options,\r\n        'elementStyle',\r\n        defaultElementStyleFn\r\n    );\r\n    var gutterStyle = getOption(options, 'gutterStyle', defaultGutterStyleFn);\r\n\r\n    // 2. Initialize a bunch of strings based on the direction we're splitting.\r\n    // A lot of the behavior in the rest of the library is paramatized down to\r\n    // rely on CSS strings and classes.\r\n    if (direction === HORIZONTAL) {\r\n        dimension = 'width';\r\n        clientAxis = 'clientX';\r\n        position = 'left';\r\n        positionEnd = 'right';\r\n        clientSize = 'clientWidth';\r\n    } else if (direction === 'vertical') {\r\n        dimension = 'height';\r\n        clientAxis = 'clientY';\r\n        position = 'top';\r\n        positionEnd = 'bottom';\r\n        clientSize = 'clientHeight';\r\n    }\r\n\r\n    // 3. Define the dragging helper functions, and a few helpers to go with them.\r\n    // Each helper is bound to a pair object that contains its metadata. This\r\n    // also makes it easy to store references to listeners that that will be\r\n    // added and removed.\r\n    //\r\n    // Even though there are no other functions contained in them, aliasing\r\n    // this to self saves 50 bytes or so since it's used so frequently.\r\n    //\r\n    // The pair object saves metadata like dragging state, position and\r\n    // event listener references.\r\n\r\n    function setElementSize(el, size, gutSize, i) {\r\n        // Split.js allows setting sizes via numbers (ideally), or if you must,\r\n        // by string, like '300px'. This is less than ideal, because it breaks\r\n        // the fluid layout that `calc(% - px)` provides. You're on your own if you do that,\r\n        // make sure you calculate the gutter size by hand.\r\n        var style = elementStyle(dimension, size, gutSize, i);\r\n\r\n        Object.keys(style).forEach(function (prop) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            el.style[prop] = style[prop];\r\n        });\r\n    }\r\n\r\n    function setGutterSize(gutterElement, gutSize, i) {\r\n        var style = gutterStyle(dimension, gutSize, i);\r\n\r\n        Object.keys(style).forEach(function (prop) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            gutterElement.style[prop] = style[prop];\r\n        });\r\n    }\r\n\r\n    function getSizes() {\r\n        return elements.map(function (element) { return element.size; })\r\n    }\r\n\r\n    // Supports touch events, but not multitouch, so only the first\r\n    // finger `touches[0]` is counted.\r\n    function getMousePosition(e) {\r\n        if ('touches' in e) { return e.touches[0][clientAxis] }\r\n        return e[clientAxis]\r\n    }\r\n\r\n    // Actually adjust the size of elements `a` and `b` to `offset` while dragging.\r\n    // calc is used to allow calc(percentage + gutterpx) on the whole split instance,\r\n    // which allows the viewport to be resized without additional logic.\r\n    // Element a's size is the same as offset. b's size is total size - a size.\r\n    // Both sizes are calculated from the initial parent percentage,\r\n    // then the gutter size is subtracted.\r\n    function adjust(offset) {\r\n        var a = elements[this.a];\r\n        var b = elements[this.b];\r\n        var percentage = a.size + b.size;\r\n\r\n        a.size = (offset / this.size) * percentage;\r\n        b.size = percentage - (offset / this.size) * percentage;\r\n\r\n        setElementSize(a.element, a.size, this[aGutterSize], a.i);\r\n        setElementSize(b.element, b.size, this[bGutterSize], b.i);\r\n    }\r\n\r\n    // drag, where all the magic happens. The logic is really quite simple:\r\n    //\r\n    // 1. Ignore if the pair is not dragging.\r\n    // 2. Get the offset of the event.\r\n    // 3. Snap offset to min if within snappable range (within min + snapOffset).\r\n    // 4. Actually adjust each element in the pair to offset.\r\n    //\r\n    // ---------------------------------------------------------------------\r\n    // |    | <- a.minSize               ||              b.minSize -> |    |\r\n    // |    |  | <- this.snapOffset      ||     this.snapOffset -> |  |    |\r\n    // |    |  |                         ||                        |  |    |\r\n    // |    |  |                         ||                        |  |    |\r\n    // ---------------------------------------------------------------------\r\n    // | <- this.start                                        this.size -> |\r\n    function drag(e) {\r\n        var offset;\r\n        var a = elements[this.a];\r\n        var b = elements[this.b];\r\n\r\n        if (!this.dragging) { return }\r\n\r\n        // Get the offset of the event from the first side of the\r\n        // pair `this.start`. Then offset by the initial position of the\r\n        // mouse compared to the gutter size.\r\n        offset =\r\n            getMousePosition(e) -\r\n            this.start +\r\n            (this[aGutterSize] - this.dragOffset);\r\n\r\n        if (dragInterval > 1) {\r\n            offset = Math.round(offset / dragInterval) * dragInterval;\r\n        }\r\n\r\n        // If within snapOffset of min or max, set offset to min or max.\r\n        // snapOffset buffers a.minSize and b.minSize, so logic is opposite for both.\r\n        // Include the appropriate gutter sizes to prevent overflows.\r\n        if (offset <= a.minSize + snapOffset + this[aGutterSize]) {\r\n            offset = a.minSize + this[aGutterSize];\r\n        } else if (\r\n            offset >=\r\n            this.size - (b.minSize + snapOffset + this[bGutterSize])\r\n        ) {\r\n            offset = this.size - (b.minSize + this[bGutterSize]);\r\n        }\r\n\r\n        // Actually adjust the size.\r\n        adjust.call(this, offset);\r\n\r\n        // Call the drag callback continously. Don't do anything too intensive\r\n        // in this callback.\r\n        getOption(options, 'onDrag', NOOP)();\r\n    }\r\n\r\n    // Cache some important sizes when drag starts, so we don't have to do that\r\n    // continously:\r\n    //\r\n    // `size`: The total size of the pair. First + second + first gutter + second gutter.\r\n    // `start`: The leading side of the first element.\r\n    //\r\n    // ------------------------------------------------\r\n    // |      aGutterSize -> |||                      |\r\n    // |                     |||                      |\r\n    // |                     |||                      |\r\n    // |                     ||| <- bGutterSize       |\r\n    // ------------------------------------------------\r\n    // | <- start                             size -> |\r\n    function calculateSizes() {\r\n        // Figure out the parent size minus padding.\r\n        var a = elements[this.a].element;\r\n        var b = elements[this.b].element;\r\n\r\n        var aBounds = a[getBoundingClientRect]();\r\n        var bBounds = b[getBoundingClientRect]();\r\n\r\n        this.size =\r\n            aBounds[dimension] +\r\n            bBounds[dimension] +\r\n            this[aGutterSize] +\r\n            this[bGutterSize];\r\n        this.start = aBounds[position];\r\n        this.end = aBounds[positionEnd];\r\n    }\r\n\r\n    function innerSize(element) {\r\n        // Return nothing if getComputedStyle is not supported (< IE9)\r\n        // Or if parent element has no layout yet\r\n        if (!getComputedStyle) { return null }\r\n\r\n        var computedStyle = getComputedStyle(element);\r\n\r\n        if (!computedStyle) { return null }\r\n\r\n        var size = element[clientSize];\r\n\r\n        if (size === 0) { return null }\r\n\r\n        if (direction === HORIZONTAL) {\r\n            size -=\r\n                parseFloat(computedStyle.paddingLeft) +\r\n                parseFloat(computedStyle.paddingRight);\r\n        } else {\r\n            size -=\r\n                parseFloat(computedStyle.paddingTop) +\r\n                parseFloat(computedStyle.paddingBottom);\r\n        }\r\n\r\n        return size\r\n    }\r\n\r\n    // When specifying percentage sizes that are less than the computed\r\n    // size of the element minus the gutter, the lesser percentages must be increased\r\n    // (and decreased from the other elements) to make space for the pixels\r\n    // subtracted by the gutters.\r\n    function trimToMin(sizesToTrim) {\r\n        // Try to get inner size of parent element.\r\n        // If it's no supported, return original sizes.\r\n        var parentSize = innerSize(parent);\r\n        if (parentSize === null) {\r\n            return sizesToTrim\r\n        }\r\n\r\n        if (minSizes.reduce(function (a, b) { return a + b; }, 0) > parentSize) {\r\n            return sizesToTrim\r\n        }\r\n\r\n        // Keep track of the excess pixels, the amount of pixels over the desired percentage\r\n        // Also keep track of the elements with pixels to spare, to decrease after if needed\r\n        var excessPixels = 0;\r\n        var toSpare = [];\r\n\r\n        var pixelSizes = sizesToTrim.map(function (size, i) {\r\n            // Convert requested percentages to pixel sizes\r\n            var pixelSize = (parentSize * size) / 100;\r\n            var elementGutterSize = getGutterSize(\r\n                gutterSize,\r\n                i === 0,\r\n                i === sizesToTrim.length - 1,\r\n                gutterAlign\r\n            );\r\n            var elementMinSize = minSizes[i] + elementGutterSize;\r\n\r\n            // If element is too smal, increase excess pixels by the difference\r\n            // and mark that it has no pixels to spare\r\n            if (pixelSize < elementMinSize) {\r\n                excessPixels += elementMinSize - pixelSize;\r\n                toSpare.push(0);\r\n                return elementMinSize\r\n            }\r\n\r\n            // Otherwise, mark the pixels it has to spare and return it's original size\r\n            toSpare.push(pixelSize - elementMinSize);\r\n            return pixelSize\r\n        });\r\n\r\n        // If nothing was adjusted, return the original sizes\r\n        if (excessPixels === 0) {\r\n            return sizesToTrim\r\n        }\r\n\r\n        return pixelSizes.map(function (pixelSize, i) {\r\n            var newPixelSize = pixelSize;\r\n\r\n            // While there's still pixels to take, and there's enough pixels to spare,\r\n            // take as many as possible up to the total excess pixels\r\n            if (excessPixels > 0 && toSpare[i] - excessPixels > 0) {\r\n                var takenPixels = Math.min(\r\n                    excessPixels,\r\n                    toSpare[i] - excessPixels\r\n                );\r\n\r\n                // Subtract the amount taken for the next iteration\r\n                excessPixels -= takenPixels;\r\n                newPixelSize = pixelSize - takenPixels;\r\n            }\r\n\r\n            // Return the pixel size adjusted as a percentage\r\n            return (newPixelSize / parentSize) * 100\r\n        })\r\n    }\r\n\r\n    // stopDragging is very similar to startDragging in reverse.\r\n    function stopDragging() {\r\n        var self = this;\r\n        var a = elements[self.a].element;\r\n        var b = elements[self.b].element;\r\n\r\n        if (self.dragging) {\r\n            getOption(options, 'onDragEnd', NOOP)(getSizes());\r\n        }\r\n\r\n        self.dragging = false;\r\n\r\n        // Remove the stored event listeners. This is why we store them.\r\n        global[removeEventListener]('mouseup', self.stop);\r\n        global[removeEventListener]('touchend', self.stop);\r\n        global[removeEventListener]('touchcancel', self.stop);\r\n        global[removeEventListener]('mousemove', self.move);\r\n        global[removeEventListener]('touchmove', self.move);\r\n\r\n        // Clear bound function references\r\n        self.stop = null;\r\n        self.move = null;\r\n\r\n        a[removeEventListener]('selectstart', NOOP);\r\n        a[removeEventListener]('dragstart', NOOP);\r\n        b[removeEventListener]('selectstart', NOOP);\r\n        b[removeEventListener]('dragstart', NOOP);\r\n\r\n        a.style.userSelect = '';\r\n        a.style.webkitUserSelect = '';\r\n        a.style.MozUserSelect = '';\r\n        a.style.pointerEvents = '';\r\n\r\n        b.style.userSelect = '';\r\n        b.style.webkitUserSelect = '';\r\n        b.style.MozUserSelect = '';\r\n        b.style.pointerEvents = '';\r\n\r\n        self.gutter.style.cursor = '';\r\n        self.parent.style.cursor = '';\r\n        document.body.style.cursor = '';\r\n    }\r\n\r\n    // startDragging calls `calculateSizes` to store the inital size in the pair object.\r\n    // It also adds event listeners for mouse/touch events,\r\n    // and prevents selection while dragging so avoid the selecting text.\r\n    function startDragging(e) {\r\n        // Right-clicking can't start dragging.\r\n        if ('button' in e && e.button !== 0) {\r\n            return\r\n        }\r\n\r\n        // Alias frequently used variables to save space. 200 bytes.\r\n        var self = this;\r\n        var a = elements[self.a].element;\r\n        var b = elements[self.b].element;\r\n\r\n        // Call the onDragStart callback.\r\n        if (!self.dragging) {\r\n            getOption(options, 'onDragStart', NOOP)(getSizes());\r\n        }\r\n\r\n        // Don't actually drag the element. We emulate that in the drag function.\r\n        e.preventDefault();\r\n\r\n        // Set the dragging property of the pair object.\r\n        self.dragging = true;\r\n\r\n        // Create two event listeners bound to the same pair object and store\r\n        // them in the pair object.\r\n        self.move = drag.bind(self);\r\n        self.stop = stopDragging.bind(self);\r\n\r\n        // All the binding. `window` gets the stop events in case we drag out of the elements.\r\n        global[addEventListener]('mouseup', self.stop);\r\n        global[addEventListener]('touchend', self.stop);\r\n        global[addEventListener]('touchcancel', self.stop);\r\n        global[addEventListener]('mousemove', self.move);\r\n        global[addEventListener]('touchmove', self.move);\r\n\r\n        // Disable selection. Disable!\r\n        a[addEventListener]('selectstart', NOOP);\r\n        a[addEventListener]('dragstart', NOOP);\r\n        b[addEventListener]('selectstart', NOOP);\r\n        b[addEventListener]('dragstart', NOOP);\r\n\r\n        a.style.userSelect = 'none';\r\n        a.style.webkitUserSelect = 'none';\r\n        a.style.MozUserSelect = 'none';\r\n        a.style.pointerEvents = 'none';\r\n\r\n        b.style.userSelect = 'none';\r\n        b.style.webkitUserSelect = 'none';\r\n        b.style.MozUserSelect = 'none';\r\n        b.style.pointerEvents = 'none';\r\n\r\n        // Set the cursor at multiple levels\r\n        self.gutter.style.cursor = cursor;\r\n        self.parent.style.cursor = cursor;\r\n        document.body.style.cursor = cursor;\r\n\r\n        // Cache the initial sizes of the pair.\r\n        calculateSizes.call(self);\r\n\r\n        // Determine the position of the mouse compared to the gutter\r\n        self.dragOffset = getMousePosition(e) - self.end;\r\n    }\r\n\r\n    // adjust sizes to ensure percentage is within min size and gutter.\r\n    sizes = trimToMin(sizes);\r\n\r\n    // 5. Create pair and element objects. Each pair has an index reference to\r\n    // elements `a` and `b` of the pair (first and second elements).\r\n    // Loop through the elements while pairing them off. Every pair gets a\r\n    // `pair` object and a gutter.\r\n    //\r\n    // Basic logic:\r\n    //\r\n    // - Starting with the second element `i > 0`, create `pair` objects with\r\n    //   `a = i - 1` and `b = i`\r\n    // - Set gutter sizes based on the _pair_ being first/last. The first and last\r\n    //   pair have gutterSize / 2, since they only have one half gutter, and not two.\r\n    // - Create gutter elements and add event listeners.\r\n    // - Set the size of the elements, minus the gutter sizes.\r\n    //\r\n    // -----------------------------------------------------------------------\r\n    // |     i=0     |         i=1         |        i=2       |      i=3     |\r\n    // |             |                     |                  |              |\r\n    // |           pair 0                pair 1             pair 2           |\r\n    // |             |                     |                  |              |\r\n    // -----------------------------------------------------------------------\r\n    var pairs = [];\r\n    elements = ids.map(function (id, i) {\r\n        // Create the element object.\r\n        var element = {\r\n            element: elementOrSelector(id),\r\n            size: sizes[i],\r\n            minSize: minSizes[i],\r\n            i: i,\r\n        };\r\n\r\n        var pair;\r\n\r\n        if (i > 0) {\r\n            // Create the pair object with its metadata.\r\n            pair = {\r\n                a: i - 1,\r\n                b: i,\r\n                dragging: false,\r\n                direction: direction,\r\n                parent: parent,\r\n            };\r\n\r\n            pair[aGutterSize] = getGutterSize(\r\n                gutterSize,\r\n                i - 1 === 0,\r\n                false,\r\n                gutterAlign\r\n            );\r\n            pair[bGutterSize] = getGutterSize(\r\n                gutterSize,\r\n                false,\r\n                i === ids.length - 1,\r\n                gutterAlign\r\n            );\r\n\r\n            // if the parent has a reverse flex-direction, switch the pair elements.\r\n            if (\r\n                parentFlexDirection === 'row-reverse' ||\r\n                parentFlexDirection === 'column-reverse'\r\n            ) {\r\n                var temp = pair.a;\r\n                pair.a = pair.b;\r\n                pair.b = temp;\r\n            }\r\n        }\r\n\r\n        // Determine the size of the current element. IE8 is supported by\r\n        // staticly assigning sizes without draggable gutters. Assigns a string\r\n        // to `size`.\r\n        //\r\n        // Create gutter elements for each pair.\r\n        if (i > 0) {\r\n            var gutterElement = gutter(i, direction, element.element);\r\n            setGutterSize(gutterElement, gutterSize, i);\r\n\r\n            // Save bound event listener for removal later\r\n            pair[gutterStartDragging] = startDragging.bind(pair);\r\n\r\n            // Attach bound event listener\r\n            gutterElement[addEventListener](\r\n                'mousedown',\r\n                pair[gutterStartDragging]\r\n            );\r\n            gutterElement[addEventListener](\r\n                'touchstart',\r\n                pair[gutterStartDragging]\r\n            );\r\n\r\n            parent.insertBefore(gutterElement, element.element);\r\n\r\n            pair.gutter = gutterElement;\r\n        }\r\n\r\n        setElementSize(\r\n            element.element,\r\n            element.size,\r\n            getGutterSize(\r\n                gutterSize,\r\n                i === 0,\r\n                i === ids.length - 1,\r\n                gutterAlign\r\n            ),\r\n            i\r\n        );\r\n\r\n        // After the first iteration, and we have a pair object, append it to the\r\n        // list of pairs.\r\n        if (i > 0) {\r\n            pairs.push(pair);\r\n        }\r\n\r\n        return element\r\n    });\r\n\r\n    function adjustToMin(element) {\r\n        var isLast = element.i === pairs.length;\r\n        var pair = isLast ? pairs[element.i - 1] : pairs[element.i];\r\n\r\n        calculateSizes.call(pair);\r\n\r\n        var size = isLast\r\n            ? pair.size - element.minSize - pair[bGutterSize]\r\n            : element.minSize + pair[aGutterSize];\r\n\r\n        adjust.call(pair, size);\r\n    }\r\n\r\n    elements.forEach(function (element) {\r\n        var computedSize = element.element[getBoundingClientRect]()[dimension];\r\n\r\n        if (computedSize < element.minSize) {\r\n            if (expandToMin) {\r\n                adjustToMin(element);\r\n            } else {\r\n                // eslint-disable-next-line no-param-reassign\r\n                element.minSize = computedSize;\r\n            }\r\n        }\r\n    });\r\n\r\n    function setSizes(newSizes) {\r\n        var trimmed = trimToMin(newSizes);\r\n        trimmed.forEach(function (newSize, i) {\r\n            if (i > 0) {\r\n                var pair = pairs[i - 1];\r\n\r\n                var a = elements[pair.a];\r\n                var b = elements[pair.b];\r\n\r\n                a.size = trimmed[i - 1];\r\n                b.size = newSize;\r\n\r\n                setElementSize(a.element, a.size, pair[aGutterSize], a.i);\r\n                setElementSize(b.element, b.size, pair[bGutterSize], b.i);\r\n            }\r\n        });\r\n    }\r\n\r\n    function destroy(preserveStyles, preserveGutter) {\r\n        pairs.forEach(function (pair) {\r\n            if (preserveGutter !== true) {\r\n                pair.parent.removeChild(pair.gutter);\r\n            } else {\r\n                pair.gutter[removeEventListener](\r\n                    'mousedown',\r\n                    pair[gutterStartDragging]\r\n                );\r\n                pair.gutter[removeEventListener](\r\n                    'touchstart',\r\n                    pair[gutterStartDragging]\r\n                );\r\n            }\r\n\r\n            if (preserveStyles !== true) {\r\n                var style = elementStyle(\r\n                    dimension,\r\n                    pair.a.size,\r\n                    pair[aGutterSize]\r\n                );\r\n\r\n                Object.keys(style).forEach(function (prop) {\r\n                    elements[pair.a].element.style[prop] = '';\r\n                    elements[pair.b].element.style[prop] = '';\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    return {\r\n        setSizes: setSizes,\r\n        getSizes: getSizes,\r\n        collapse: function collapse(i) {\r\n            adjustToMin(elements[i]);\r\n        },\r\n        destroy: destroy,\r\n        parent: parent,\r\n        pairs: pairs,\r\n    }\r\n};\r\n\r\nexport default Split;\r\n","import Split from './vendor/custom/split.js';\r\n\r\n// panels are in pairs [#panelA, #panelB]\r\n// one panel (either) is the main panel, one the minor\r\n// toggle can be defined, which will toggle the minor panel\r\n\r\nclass Panels {\r\n  constructor(ide, preview) {\r\n    // used to refresh and focus the editor on panel change\r\n    this.ide = ide;\r\n  }\r\n\r\n  init(config) {\r\n    this.panelElements = document.querySelectorAll('.panel');\r\n\r\n    this.config = config || {};\r\n\r\n    this.panels = this.createPanels(config);\r\n\r\n    this.restoreState();\r\n  }\r\n\r\n  saveState() {\r\n    const state = {};\r\n\r\n    Object.keys(this.panels).forEach((name) => {\r\n      const panel = this.panels[name];\r\n      if (panel.split) {\r\n        state[name] = {\r\n          sizes: panel.split.getSizes(),\r\n        };\r\n        if (panel.toggle) {\r\n          state[name].toggleChecked = panel.toggle.elem.checked;\r\n        }\r\n      }\r\n    });\r\n\r\n    localStorage.setItem('split-state', JSON.stringify(state));\r\n  }\r\n\r\n  restoreState() {\r\n    const state = JSON.parse(localStorage.getItem('split-state'));\r\n\r\n    if (!state) return;\r\n\r\n    Object.keys(this.panels).forEach((name) => {\r\n      const panel = this.panels[name];\r\n      if (state[name]) {\r\n        if (state[name].sizes)\r\n          panel.split.setSizes(state[name].sizes);\r\n        if (state[name].toggleChecked !== undefined) {\r\n          panel.enable(state[name].toggleChecked);\r\n          panel.toggle.elem.checked = state[name].toggleChecked;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  createPanels(config) {\r\n    const panels = {};\r\n\r\n    for (const name of Object.keys(config.splits)) {\r\n      const details = config.splits[name];\r\n\r\n      const panel = {\r\n        name,\r\n        config: details,\r\n        breakpoint: details.breakpoint || 0,\r\n        isOpen: null,\r\n        mainPanelIndex: details.mainPanel || 0,\r\n      };\r\n\r\n      panel.minorPanelIndex = (panel.mainPanelIndex + 1) % 2;\r\n\r\n      panel.toggle = this.createToggle(panel);\r\n\r\n      panel.elements = details.selectors.map((selector) =>\r\n        document.querySelector(selector),\r\n      );\r\n\r\n      panel.split = this.createSplit(panel);\r\n\r\n      panel.enable = (bool) => {\r\n        if (bool === false) {\r\n          panel.isOpen = false;\r\n          panel.elements[panel.minorPanelIndex].classList.add(\r\n            'disabled',\r\n          );\r\n          panel.elements[panel.mainPanelIndex].classList.add(\r\n            'maximise',\r\n          );\r\n          panel.split.pairs[0].gutter.classList.add('disabled');\r\n        } else {\r\n          panel.isOpen = true;\r\n          panel.elements[panel.minorPanelIndex].classList.remove(\r\n            'disabled',\r\n          );\r\n          panel.elements[panel.mainPanelIndex].classList.remove(\r\n            'maximise',\r\n          );\r\n          panel.split.pairs[0].gutter.classList.remove('disabled');\r\n\r\n          // TODO: decouple editor/panels.\r\n          // TODO: this is being called twice on load\r\n          // The issue us that Codemirror autorefresh doesn't work\r\n          // so it must be done manually\r\n          // Also, the iframe will not update until it's visible\r\n          // possible solution: add onVisible event to panel\r\n          if (panel.name === 'main') {\r\n            setTimeout(() => {\r\n              this.ide.editor.refresh();\r\n              this.ide.editor.focus();\r\n              this.ide.updatePreview();\r\n            }, 1);\r\n          }\r\n        }\r\n      };\r\n\r\n      panels[name] = panel;\r\n\r\n      if (panel.toggle) this.setupOnToggle(panel);\r\n\r\n      // TODO: on load this gets called and local storage gets called\r\n      // resulting in main panel being enabled twice\r\n      this.collapseBelowBreakpoint(panel);\r\n    }\r\n\r\n    return panels;\r\n  }\r\n\r\n  createSplit(panel) {\r\n    return new Split(panel.config.selectors, {\r\n      direction: panel.config.direction || 'horizontal',\r\n      dragInterval:\r\n        panel.config.dragInterval || this.config.dragInterval || 1,\r\n      elementStyle:\r\n        panel.config.elementStyle ||\r\n        this.config.elementStyle ||\r\n        undefined,\r\n      gutterSize:\r\n        panel.config.gutterSize || this.config.gutterSize || 1,\r\n      gutterStyle:\r\n        panel.config.gutterStyle ||\r\n        this.config.gutterStyle ||\r\n        undefined,\r\n      minSize: panel.config.minSize,\r\n      sizes: panel.config.size,\r\n      snapOffset: panel.config.snapOffset || 0,\r\n      onDragStart: () => {\r\n        this.enablePanelAnimation(false);\r\n      },\r\n      onDragEnd: (sizes) => {\r\n        if (!panel.toggle) return;\r\n\r\n        const minorPanelSize = sizes[panel.minorPanelIndex];\r\n\r\n        if (minorPanelSize > 1) {\r\n          panel.toggle.elem.checked = true;\r\n          panel.enable(true);\r\n        } else {\r\n          panel.toggle.elem.checked = false;\r\n          panel.enable(false);\r\n        }\r\n\r\n        this.saveState();\r\n\r\n        this.enablePanelAnimation(true);\r\n      },\r\n    });\r\n  }\r\n\r\n  collapseBelowBreakpoint(panel) {\r\n    if (panel.breakpoint > 0) {\r\n      const direction = panel.split.pairs[0].direction;\r\n\r\n      let parentSize;\r\n      if (direction === 'horizontal')\r\n        parentSize = panel.split.parent.clientWidth;\r\n      else parentSize = panel.split.parent.clientHeight;\r\n\r\n      if (parentSize > panel.breakpoint) {\r\n        panel.enable(true);\r\n      } else {\r\n        panel.enable(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  createToggle(panel) {\r\n    if (!panel.config.toggle) return null;\r\n\r\n    const toggleElem = document.querySelector(panel.config.toggle);\r\n\r\n    const toggle = {\r\n      elem: toggleElem,\r\n      onIcon: toggleElem.labels[0].querySelector('.on-icon'),\r\n      offIcon: toggleElem.labels[0].querySelector('.off-icon'),\r\n    };\r\n\r\n    return toggle;\r\n  }\r\n\r\n  setupOnToggle(panel) {\r\n    const onToggle = () => {\r\n      if (panel.toggle.elem.checked) {\r\n        panel.enable(true);\r\n        if (panel.config.toggleSize)\r\n          panel.split.setSizes(panel.config.toggleSize);\r\n        else panel.split.setSizes(panel.config.size);\r\n      } else {\r\n        panel.enable(false);\r\n        panel.split.collapse(panel.minorPanelIndex);\r\n      }\r\n\r\n      this.saveState();\r\n    };\r\n\r\n    panel.toggle.elem.addEventListener('click', onToggle);\r\n\r\n    panel.toggle.dispose = () => {\r\n      panel.toggle.elem.removeEventListener('click', onToggle);\r\n    };\r\n  }\r\n\r\n  enablePanelAnimation(bool) {\r\n    this.panelElements.forEach((panel) => {\r\n      if (bool) panel.classList.add('animate');\r\n      else panel.classList.remove('animate');\r\n    });\r\n  }\r\n\r\n  dispose() {\r\n    if (!this.panels) return;\r\n\r\n    Object.values(this.panels).forEach((panel) => {\r\n      panel.split.destroy();\r\n      if (panel.toggle) panel.toggle.dispose();\r\n    });\r\n\r\n    this.panels = null;\r\n  }\r\n}\r\n\r\nexport { Panels };\r\n","import { Panels } from './Panels.js';\r\nimport { createPanelConfig } from './createPanelConfig.js';\r\nimport { OrientationControl } from './orientationControl.js';\r\n\r\nlet panels;\r\nlet layout;\r\nlet orientationControls;\r\nlet fullScreen;\r\n\r\nconst initPanels = () => {\r\n  const newLayout = orientationControls.getLayout();\r\n\r\n  if (newLayout === layout && panels) return;\r\n\r\n  layout = newLayout;\r\n\r\n  panels.dispose();\r\n\r\n  const config = createPanelConfig(layout, fullScreen);\r\n  panels.init(config);\r\n};\r\n\r\nfunction setupPanels(ide, isFullScreen) {\r\n  fullScreen = isFullScreen;\r\n  orientationControls = new OrientationControl();\r\n\r\n  panels = new Panels(ide);\r\n\r\n  initPanels();\r\n\r\n  window.addEventListener('resize', initPanels);\r\n\r\n  if (!fullScreen) {\r\n    orientationControls.onChange = initPanels;\r\n  }\r\n}\r\n\r\nexport { setupPanels };\r\n","function saveState(string) {\r\n  const state = {\r\n    orientation: string,\r\n  };\r\n\r\n  localStorage.setItem(\r\n    'orientation-lock-state',\r\n    JSON.stringify(state),\r\n  );\r\n}\r\n\r\nfunction getState() {\r\n  const state = JSON.parse(\r\n    localStorage.getItem('orientation-lock-state'),\r\n  );\r\n\r\n  if (state && state.orientation) return state.orientation;\r\n  return 'auto';\r\n}\r\n\r\nclass OrientationControl {\r\n  constructor() {\r\n    this.wrapper = document.querySelector('.wrapper');\r\n    const toggle = document.querySelector('#orientation-toggle');\r\n    if (!toggle) return;\r\n    this.label = toggle.labels[0];\r\n\r\n    // const autoIcon = this.label.querySelector('.auto-icon');\r\n    // const portraitIcon = this.label.querySelector('.portrait-icon');\r\n    // const landscapeIcon = this.label.querySelector('.landscape-icon');\r\n\r\n    this.onChange = () => {};\r\n\r\n    this.label.classList.remove('hide');\r\n\r\n    const stateValues = ['auto', 'portrait', 'landscape'];\r\n\r\n    this.state = getState();\r\n\r\n    this.setOrientationLock(this.state, this.onChange);\r\n\r\n    toggle.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n\r\n      const nextState =\r\n        stateValues[\r\n          (stateValues.indexOf(this.state) + 1) % stateValues.length\r\n        ];\r\n      this.state = nextState;\r\n\r\n      this.setOrientationLock(this.state);\r\n\r\n      this.onChange(this.getLayout());\r\n    });\r\n  }\r\n\r\n  setOrientationLock(value) {\r\n    switch (value) {\r\n      case 'auto':\r\n        this.wrapper.classList.remove(\r\n          'orientation-portrait',\r\n          'orientation-landscape',\r\n        );\r\n        this.wrapper.classList.add('orientation-auto');\r\n        this.label\r\n          .querySelector('.auto-icon')\r\n          .classList.remove('hide');\r\n        this.label\r\n          .querySelector('.portrait-icon')\r\n          .classList.add('hide');\r\n        this.label\r\n          .querySelector('.landscape-icon')\r\n          .classList.add('hide');\r\n        break;\r\n      case 'portrait':\r\n        this.wrapper.classList.remove(\r\n          'orientation-auto',\r\n          'orientation-landscape',\r\n        );\r\n        this.wrapper.classList.add('orientation-portrait');\r\n        this.label.querySelector('.auto-icon').classList.add('hide');\r\n        this.label\r\n          .querySelector('.portrait-icon')\r\n          .classList.remove('hide');\r\n        this.label\r\n          .querySelector('.landscape-icon')\r\n          .classList.add('hide');\r\n        break;\r\n      case 'landscape':\r\n        this.wrapper.classList.remove(\r\n          'orientation-auto',\r\n          'orientation-portrait',\r\n        );\r\n        this.wrapper.classList.add('orientation-landscape');\r\n        this.label.querySelector('.auto-icon').classList.add('hide');\r\n        this.label\r\n          .querySelector('.portrait-icon')\r\n          .classList.add('hide');\r\n        this.label\r\n          .querySelector('.landscape-icon')\r\n          .classList.remove('hide');\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.state = value;\r\n    saveState(value);\r\n  }\r\n\r\n  getLayout() {\r\n    switch (this.state) {\r\n      case 'landscape':\r\n        return 'horizontal';\r\n      case 'portrait':\r\n        return 'vertical';\r\n      case 'auto':\r\n      default:\r\n        return window.innerHeight > window.innerWidth\r\n          ? 'vertical'\r\n          : 'horizontal';\r\n    }\r\n  }\r\n}\r\n\r\nexport { OrientationControl };\r\n","// NOTE: must match CSS breakpoint for switching\r\n// between flex column and row\r\nconst panelBreakpoint = 1024;\r\n\r\nfunction createPanelConfig(direction, fullscreen) {\r\n  let gutterSize = 5;\r\n  if (window.innerWidth < 768) gutterSize = 10;\r\n\r\n  const config = {\r\n    elementStyle: (dimension, size, gutterSize) => {\r\n      return {\r\n        'flex-basis': `calc(${size}% - ${gutterSize}px)`,\r\n      };\r\n    },\r\n    gutterStyle: (dimension, gutterSize) => {\r\n      return {\r\n        'flex-basis': `${gutterSize}px`,\r\n      };\r\n    },\r\n\r\n    splits: {\r\n      ide: {\r\n        isTopPanel: fullscreen,\r\n        direction: 'vertical',\r\n        gutterSize,\r\n        snapOffset: 50,\r\n        selectors: ['#editor-panel', '#preview'],\r\n        mainPanel: 0,\r\n        size: [60, 40],\r\n        minSize: [0, 0],\r\n        toggle: '#toggle-preview',\r\n      },\r\n      editor: {\r\n        direction: 'horizontal',\r\n        gutterSize,\r\n        snapOffset: 50,\r\n        selectors: ['#filetree-panel', '#editor'],\r\n        mainPanel: 1,\r\n        size: [0, 100],\r\n        minSize: [0, 0],\r\n        toggleSize: [50, 50],\r\n        toggle: '#toggle-filetree',\r\n      },\r\n      // TODO later: add console panel for preview\r\n      // preview: {\r\n      //   direction: 'vertical',\r\n      //   gutterSize,\r\n      //  snapOffset: 50,\r\n      //   selectors: [\r\n      //     '#preview',\r\n      //     '#preview-console',\r\n      //   ],\r\n      //   mainPanel: 0,\r\n      //   size: [ 100, 0 ],\r\n      //   minSize: [ 0, 0 ],\r\n      //   toggleSize: [ 70, 30 ],\r\n      //   toggle: '#toggle-console',\r\n      // },\r\n    },\r\n  };\r\n\r\n  if (!fullscreen) {\r\n    config.splits.main = {\r\n      isTopPanel: true,\r\n      direction,\r\n      // panel will be closed below this width/height\r\n      breakpoint: panelBreakpoint,\r\n      gutterSize,\r\n      snapOffset: 50,\r\n      selectors: ['main', '#ide-wrapper'],\r\n      mainPanel: 0,\r\n      size: [60, 40],\r\n      minSize: [0, 0],\r\n      toggle: '#toggle-ide',\r\n    };\r\n  }\r\n  return config;\r\n}\r\n\r\nexport { createPanelConfig };\r\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","var UZIP = {};\r\n\r\nUZIP['parse'] = function (\r\n  buf,\r\n  onlyNames, // ArrayBuffer\r\n) {\r\n  var rUs = UZIP.bin.readUshort,\r\n    rUi = UZIP.bin.readUint,\r\n    o = 0,\r\n    out = {};\r\n  var data = new Uint8Array(buf);\r\n  var eocd = data.length - 4;\r\n\r\n  while (rUi(data, eocd) != 0x06054b50) eocd--;\r\n\r\n  var o = eocd;\r\n  o += 4; // sign  = 0x06054b50\r\n  o += 4; // disks = 0;\r\n  var cnu = rUs(data, o);\r\n  o += 2;\r\n  var cnt = rUs(data, o);\r\n  o += 2;\r\n\r\n  var csize = rUi(data, o);\r\n  o += 4;\r\n  var coffs = rUi(data, o);\r\n  o += 4;\r\n\r\n  o = coffs;\r\n  for (var i = 0; i < cnu; i++) {\r\n    var sign = rUi(data, o);\r\n    o += 4;\r\n    o += 4; // versions;\r\n    o += 4; // flag + compr\r\n    o += 4; // time\r\n\r\n    var crc32 = rUi(data, o);\r\n    o += 4;\r\n    var csize = rUi(data, o);\r\n    o += 4;\r\n    var usize = rUi(data, o);\r\n    o += 4;\r\n\r\n    var nl = rUs(data, o),\r\n      el = rUs(data, o + 2),\r\n      cl = rUs(data, o + 4);\r\n    o += 6; // name, extra, comment\r\n    o += 8; // disk, attribs\r\n\r\n    var roff = rUi(data, o);\r\n    o += 4;\r\n    o += nl + el + cl;\r\n\r\n    UZIP._readLocal(data, roff, out, csize, usize, onlyNames);\r\n  }\r\n  //console.log(out);\r\n  return out;\r\n};\r\n\r\nUZIP._readLocal = function (data, o, out, csize, usize, onlyNames) {\r\n  var rUs = UZIP.bin.readUshort,\r\n    rUi = UZIP.bin.readUint;\r\n  var sign = rUi(data, o);\r\n  o += 4;\r\n  var ver = rUs(data, o);\r\n  o += 2;\r\n  var gpflg = rUs(data, o);\r\n  o += 2;\r\n  //if((gpflg&8)!=0) throw \"unknown sizes\";\r\n  var cmpr = rUs(data, o);\r\n  o += 2;\r\n\r\n  var time = rUi(data, o);\r\n  o += 4;\r\n\r\n  var crc32 = rUi(data, o);\r\n  o += 4;\r\n  //var csize = rUi(data, o);  o+=4;\r\n  //var usize = rUi(data, o);  o+=4;\r\n  o += 8;\r\n\r\n  var nlen = rUs(data, o);\r\n  o += 2;\r\n  var elen = rUs(data, o);\r\n  o += 2;\r\n\r\n  var name = UZIP.bin.readUTF8(data, o, nlen);\r\n  o += nlen; //console.log(name);\r\n  o += elen;\r\n\r\n  //console.log(sign.toString(16), ver, gpflg, cmpr, crc32.toString(16), \"csize, usize\", csize, usize, nlen, elen, name, o);\r\n  if (onlyNames) {\r\n    out[name] = { size: usize, csize: csize };\r\n    return;\r\n  }\r\n  var file = new Uint8Array(data.buffer, o);\r\n  if (false) {\r\n  } else if (cmpr == 0)\r\n    out[name] = new Uint8Array(file.buffer.slice(o, o + csize));\r\n  else if (cmpr == 8) {\r\n    var buf = new Uint8Array(usize);\r\n    UZIP.inflateRaw(file, buf);\r\n    /*var nbuf = pako[\"inflateRaw\"](file);\r\n\t\tif(usize>8514000) {\r\n\t\t\t//console.log(PUtils.readASCII(buf , 8514500, 500));\r\n\t\t\t//console.log(PUtils.readASCII(nbuf, 8514500, 500));\r\n\t\t}\r\n\t\tfor(var i=0; i<buf.length; i++) if(buf[i]!=nbuf[i]) {  console.log(buf.length, nbuf.length, usize, i);  throw \"e\";  }\r\n\t\t*/\r\n    out[name] = buf;\r\n  } else throw 'unknown compression method: ' + cmpr;\r\n};\r\n\r\nUZIP.inflateRaw = function (file, buf) {\r\n  return UZIP.F.inflate(file, buf);\r\n};\r\nUZIP.inflate = function (file, buf) {\r\n  var CMF = file[0],\r\n    FLG = file[1];\r\n  var CM = CMF & 15,\r\n    CINFO = CMF >>> 4;\r\n  //console.log(CM, CINFO,CMF,FLG);\r\n  return UZIP.inflateRaw(\r\n    new Uint8Array(file.buffer, file.byteOffset + 2, file.length - 6),\r\n    buf,\r\n  );\r\n};\r\nUZIP.deflate = function (data, opts /*, buf, off*/) {\r\n  if (opts == null) opts = { level: 6 };\r\n  var off = 0,\r\n    buf = new Uint8Array(50 + Math.floor(data.length * 1.1));\r\n  buf[off] = 120;\r\n  buf[off + 1] = 156;\r\n  off += 2;\r\n  off = UZIP.F.deflateRaw(data, buf, off, opts.level);\r\n  var crc = UZIP.adler(data, 0, data.length);\r\n  buf[off + 0] = (crc >>> 24) & 255;\r\n  buf[off + 1] = (crc >>> 16) & 255;\r\n  buf[off + 2] = (crc >>> 8) & 255;\r\n  buf[off + 3] = (crc >>> 0) & 255;\r\n  return new Uint8Array(buf.buffer, 0, off + 4);\r\n};\r\nUZIP.deflateRaw = function (data, opts) {\r\n  if (opts == null) opts = { level: 6 };\r\n  var buf = new Uint8Array(50 + Math.floor(data.length * 1.1));\r\n  var off = UZIP.F.deflateRaw(data, buf, off, opts.level);\r\n  return new Uint8Array(buf.buffer, 0, off);\r\n};\r\n\r\nUZIP.encode = function (obj, noCmpr) {\r\n  if (noCmpr == null) noCmpr = false;\r\n  var tot = 0,\r\n    wUi = UZIP.bin.writeUint,\r\n    wUs = UZIP.bin.writeUshort;\r\n  var zpd = {};\r\n  for (var p in obj) {\r\n    var cpr = !UZIP._noNeed(p) && !noCmpr,\r\n      buf = obj[p],\r\n      crc = UZIP.crc.crc(buf, 0, buf.length);\r\n    zpd[p] = {\r\n      cpr: cpr,\r\n      usize: buf.length,\r\n      crc: crc,\r\n      file: cpr ? UZIP.deflateRaw(buf) : buf,\r\n    };\r\n  }\r\n\r\n  for (var p in zpd)\r\n    tot += zpd[p].file.length + 30 + 46 + 2 * UZIP.bin.sizeUTF8(p);\r\n  tot += 22;\r\n\r\n  var data = new Uint8Array(tot),\r\n    o = 0;\r\n  var fof = [];\r\n\r\n  for (var p in zpd) {\r\n    var file = zpd[p];\r\n    fof.push(o);\r\n    o = UZIP._writeHeader(data, o, p, file, 0);\r\n  }\r\n  var i = 0,\r\n    ioff = o;\r\n  for (var p in zpd) {\r\n    var file = zpd[p];\r\n    fof.push(o);\r\n    o = UZIP._writeHeader(data, o, p, file, 1, fof[i++]);\r\n  }\r\n  var csize = o - ioff;\r\n\r\n  wUi(data, o, 0x06054b50);\r\n  o += 4;\r\n  o += 4; // disks\r\n  wUs(data, o, i);\r\n  o += 2;\r\n  wUs(data, o, i);\r\n  o += 2; // number of c d records\r\n  wUi(data, o, csize);\r\n  o += 4;\r\n  wUi(data, o, ioff);\r\n  o += 4;\r\n  o += 2;\r\n  return data.buffer;\r\n};\r\n// no need to compress .PNG, .ZIP, .JPEG ....\r\nUZIP._noNeed = function (fn) {\r\n  var ext = fn.split('.').pop().toLowerCase();\r\n  return 'png,jpg,jpeg,zip'.indexOf(ext) != -1;\r\n};\r\n\r\nUZIP._writeHeader = function (data, o, p, obj, t, roff) {\r\n  var wUi = UZIP.bin.writeUint,\r\n    wUs = UZIP.bin.writeUshort;\r\n  var file = obj.file;\r\n\r\n  wUi(data, o, t == 0 ? 0x04034b50 : 0x02014b50);\r\n  o += 4; // sign\r\n  if (t == 1) o += 2; // ver made by\r\n  wUs(data, o, 20);\r\n  o += 2; // ver\r\n  wUs(data, o, 0);\r\n  o += 2; // gflip\r\n  wUs(data, o, obj.cpr ? 8 : 0);\r\n  o += 2; // cmpr\r\n\r\n  wUi(data, o, 0);\r\n  o += 4; // time\r\n  wUi(data, o, obj.crc);\r\n  o += 4; // crc32\r\n  wUi(data, o, file.length);\r\n  o += 4; // csize\r\n  wUi(data, o, obj.usize);\r\n  o += 4; // usize\r\n\r\n  wUs(data, o, UZIP.bin.sizeUTF8(p));\r\n  o += 2; // nlen\r\n  wUs(data, o, 0);\r\n  o += 2; // elen\r\n\r\n  if (t == 1) {\r\n    o += 2; // comment length\r\n    o += 2; // disk number\r\n    o += 6; // attributes\r\n    wUi(data, o, roff);\r\n    o += 4; // usize\r\n  }\r\n  var nlen = UZIP.bin.writeUTF8(data, o, p);\r\n  o += nlen;\r\n  if (t == 0) {\r\n    data.set(file, o);\r\n    o += file.length;\r\n  }\r\n  return o;\r\n};\r\n\r\nUZIP.crc = {\r\n  table: (function () {\r\n    var tab = new Uint32Array(256);\r\n    for (var n = 0; n < 256; n++) {\r\n      var c = n;\r\n      for (var k = 0; k < 8; k++) {\r\n        if (c & 1) c = 0xedb88320 ^ (c >>> 1);\r\n        else c = c >>> 1;\r\n      }\r\n      tab[n] = c;\r\n    }\r\n    return tab;\r\n  })(),\r\n  update: function (c, buf, off, len) {\r\n    for (var i = 0; i < len; i++)\r\n      c = UZIP.crc.table[(c ^ buf[off + i]) & 0xff] ^ (c >>> 8);\r\n    return c;\r\n  },\r\n  crc: function (b, o, l) {\r\n    return UZIP.crc.update(0xffffffff, b, o, l) ^ 0xffffffff;\r\n  },\r\n};\r\nUZIP.adler = function (data, o, len) {\r\n  var a = 1,\r\n    b = 0;\r\n  var off = o,\r\n    end = o + len;\r\n  while (off < end) {\r\n    var eend = Math.min(off + 5552, end);\r\n    while (off < eend) {\r\n      a += data[off++];\r\n      b += a;\r\n    }\r\n    a = a % 65521;\r\n    b = b % 65521;\r\n  }\r\n  return (b << 16) | a;\r\n};\r\n\r\nUZIP.bin = {\r\n  readUshort: function (buff, p) {\r\n    return buff[p] | (buff[p + 1] << 8);\r\n  },\r\n  writeUshort: function (buff, p, n) {\r\n    buff[p] = n & 255;\r\n    buff[p + 1] = (n >> 8) & 255;\r\n  },\r\n  readUint: function (buff, p) {\r\n    return (\r\n      buff[p + 3] * (256 * 256 * 256) +\r\n      ((buff[p + 2] << 16) | (buff[p + 1] << 8) | buff[p])\r\n    );\r\n  },\r\n  writeUint: function (buff, p, n) {\r\n    buff[p] = n & 255;\r\n    buff[p + 1] = (n >> 8) & 255;\r\n    buff[p + 2] = (n >> 16) & 255;\r\n    buff[p + 3] = (n >> 24) & 255;\r\n  },\r\n  readASCII: function (buff, p, l) {\r\n    var s = '';\r\n    for (var i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\r\n    return s;\r\n  },\r\n  writeASCII: function (data, p, s) {\r\n    for (var i = 0; i < s.length; i++) data[p + i] = s.charCodeAt(i);\r\n  },\r\n  pad: function (n) {\r\n    return n.length < 2 ? '0' + n : n;\r\n  },\r\n  readUTF8: function (buff, p, l) {\r\n    var s = '',\r\n      ns;\r\n    for (var i = 0; i < l; i++)\r\n      s += '%' + UZIP.bin.pad(buff[p + i].toString(16));\r\n    try {\r\n      ns = decodeURIComponent(s);\r\n    } catch (e) {\r\n      return UZIP.bin.readASCII(buff, p, l);\r\n    }\r\n    return ns;\r\n  },\r\n  writeUTF8: function (buff, p, str) {\r\n    var strl = str.length,\r\n      i = 0;\r\n    for (var ci = 0; ci < strl; ci++) {\r\n      var code = str.charCodeAt(ci);\r\n      if ((code & (0xffffffff - (1 << 7) + 1)) == 0) {\r\n        buff[p + i] = code;\r\n        i++;\r\n      } else if ((code & (0xffffffff - (1 << 11) + 1)) == 0) {\r\n        buff[p + i] = 192 | (code >> 6);\r\n        buff[p + i + 1] = 128 | ((code >> 0) & 63);\r\n        i += 2;\r\n      } else if ((code & (0xffffffff - (1 << 16) + 1)) == 0) {\r\n        buff[p + i] = 224 | (code >> 12);\r\n        buff[p + i + 1] = 128 | ((code >> 6) & 63);\r\n        buff[p + i + 2] = 128 | ((code >> 0) & 63);\r\n        i += 3;\r\n      } else if ((code & (0xffffffff - (1 << 21) + 1)) == 0) {\r\n        buff[p + i] = 240 | (code >> 18);\r\n        buff[p + i + 1] = 128 | ((code >> 12) & 63);\r\n        buff[p + i + 2] = 128 | ((code >> 6) & 63);\r\n        buff[p + i + 3] = 128 | ((code >> 0) & 63);\r\n        i += 4;\r\n      } else throw 'e';\r\n    }\r\n    return i;\r\n  },\r\n  sizeUTF8: function (str) {\r\n    var strl = str.length,\r\n      i = 0;\r\n    for (var ci = 0; ci < strl; ci++) {\r\n      var code = str.charCodeAt(ci);\r\n      if ((code & (0xffffffff - (1 << 7) + 1)) == 0) {\r\n        i++;\r\n      } else if ((code & (0xffffffff - (1 << 11) + 1)) == 0) {\r\n        i += 2;\r\n      } else if ((code & (0xffffffff - (1 << 16) + 1)) == 0) {\r\n        i += 3;\r\n      } else if ((code & (0xffffffff - (1 << 21) + 1)) == 0) {\r\n        i += 4;\r\n      } else throw 'e';\r\n    }\r\n    return i;\r\n  },\r\n};\r\n\r\nUZIP.F = {};\r\n\r\nUZIP.F.deflateRaw = function (data, out, opos, lvl) {\r\n  var opts = [\r\n    /*\r\n\t\t ush good_length; /* reduce lazy search above this match length\r\n\t\t ush max_lazy;    /* do not perform lazy search above this match length\r\n         ush nice_length; /* quit search above this match length\r\n\t*/\r\n    /*      good lazy nice chain */\r\n    /* 0 */ [0, 0, 0, 0, 0] /* store only */,\r\n    /* 1 */ [4, 4, 8, 4, 0] /* max speed, no lazy matches */,\r\n    /* 2 */ [4, 5, 16, 8, 0],\r\n    /* 3 */ [4, 6, 16, 16, 0],\r\n\r\n    /* 4 */ [4, 10, 16, 32, 0] /* lazy matches */,\r\n    /* 5 */ [8, 16, 32, 32, 0],\r\n    /* 6 */ [8, 16, 128, 128, 0],\r\n    /* 7 */ [8, 32, 128, 256, 0],\r\n    /* 8 */ [32, 128, 258, 1024, 1],\r\n    /* 9 */ [32, 258, 258, 4096, 1],\r\n  ]; /* max compression */\r\n\r\n  var opt = opts[lvl];\r\n\r\n  var U = UZIP.F.U,\r\n    goodIndex = UZIP.F._goodIndex,\r\n    hash = UZIP.F._hash,\r\n    putsE = UZIP.F._putsE;\r\n  var i = 0,\r\n    pos = opos << 3,\r\n    cvrd = 0,\r\n    dlen = data.length;\r\n\r\n  if (lvl == 0) {\r\n    while (i < dlen) {\r\n      var len = Math.min(0xffff, dlen - i);\r\n      putsE(out, pos, i + len == dlen ? 1 : 0);\r\n      pos = UZIP.F._copyExact(data, i, len, out, pos + 8);\r\n      i += len;\r\n    }\r\n    return pos >>> 3;\r\n  }\r\n\r\n  var lits = U.lits,\r\n    strt = U.strt,\r\n    prev = U.prev,\r\n    li = 0,\r\n    lc = 0,\r\n    bs = 0,\r\n    ebits = 0,\r\n    c = 0,\r\n    nc = 0; // last_item, literal_count, block_start\r\n  if (dlen > 2) {\r\n    nc = UZIP.F._hash(data, 0);\r\n    strt[nc] = 0;\r\n  }\r\n  var nmch = 0,\r\n    nmci = 0;\r\n\r\n  for (i = 0; i < dlen; i++) {\r\n    c = nc;\r\n    //*\r\n    if (i + 1 < dlen - 2) {\r\n      nc = UZIP.F._hash(data, i + 1);\r\n      var ii = (i + 1) & 0x7fff;\r\n      prev[ii] = strt[nc];\r\n      strt[nc] = ii;\r\n    } //*/\r\n    if (cvrd <= i) {\r\n      if ((li > 14000 || lc > 26697) && dlen - i > 100) {\r\n        if (cvrd < i) {\r\n          lits[li] = i - cvrd;\r\n          li += 2;\r\n          cvrd = i;\r\n        }\r\n        pos = UZIP.F._writeBlock(\r\n          i == dlen - 1 || cvrd == dlen ? 1 : 0,\r\n          lits,\r\n          li,\r\n          ebits,\r\n          data,\r\n          bs,\r\n          i - bs,\r\n          out,\r\n          pos,\r\n        );\r\n        li = lc = ebits = 0;\r\n        bs = i;\r\n      }\r\n\r\n      var mch = 0;\r\n      //if(nmci==i) mch= nmch;  else\r\n      if (i < dlen - 2)\r\n        mch = UZIP.F._bestMatch(\r\n          data,\r\n          i,\r\n          prev,\r\n          c,\r\n          Math.min(opt[2], dlen - i),\r\n          opt[3],\r\n        );\r\n      /*\r\n\t\t\tif(mch!=0 && opt[4]==1 && (mch>>>16)<opt[1] && i+1<dlen-2) {\r\n\t\t\t\tnmch = UZIP.F._bestMatch(data, i+1, prev, nc, opt[2], opt[3]);  nmci=i+1;\r\n\t\t\t\t//var mch2 = UZIP.F._bestMatch(data, i+2, prev, nnc);  //nmci=i+1;\r\n\t\t\t\tif((nmch>>>16)>(mch>>>16)) mch=0;\r\n\t\t\t}//*/\r\n      var len = mch >>> 16,\r\n        dst = mch & 0xffff; //if(i-dst<0) throw \"e\";\r\n      if (mch != 0) {\r\n        var len = mch >>> 16,\r\n          dst = mch & 0xffff; //if(i-dst<0) throw \"e\";\r\n        var lgi = goodIndex(len, U.of0);\r\n        U.lhst[257 + lgi]++;\r\n        var dgi = goodIndex(dst, U.df0);\r\n        U.dhst[dgi]++;\r\n        ebits += U.exb[lgi] + U.dxb[dgi];\r\n        lits[li] = (len << 23) | (i - cvrd);\r\n        lits[li + 1] = (dst << 16) | (lgi << 8) | dgi;\r\n        li += 2;\r\n        cvrd = i + len;\r\n      } else {\r\n        U.lhst[data[i]]++;\r\n      }\r\n      lc++;\r\n    }\r\n  }\r\n  if (bs != i || data.length == 0) {\r\n    if (cvrd < i) {\r\n      lits[li] = i - cvrd;\r\n      li += 2;\r\n      cvrd = i;\r\n    }\r\n    pos = UZIP.F._writeBlock(\r\n      1,\r\n      lits,\r\n      li,\r\n      ebits,\r\n      data,\r\n      bs,\r\n      i - bs,\r\n      out,\r\n      pos,\r\n    );\r\n    li = 0;\r\n    lc = 0;\r\n    li = lc = ebits = 0;\r\n    bs = i;\r\n  }\r\n  while ((pos & 7) != 0) pos++;\r\n  return pos >>> 3;\r\n};\r\nUZIP.F._bestMatch = function (data, i, prev, c, nice, chain) {\r\n  var ci = i & 0x7fff,\r\n    pi = prev[ci];\r\n  //console.log(\"----\", i);\r\n  var dif = (ci - pi + (1 << 15)) & 0x7fff;\r\n  if (pi == ci || c != UZIP.F._hash(data, i - dif)) return 0;\r\n  var tl = 0,\r\n    td = 0; // top length, top distance\r\n  var dlim = Math.min(0x7fff, i);\r\n  while (\r\n    dif <= dlim &&\r\n    --chain != 0 &&\r\n    pi != ci /*&& c==UZIP.F._hash(data,i-dif)*/\r\n  ) {\r\n    if (tl == 0 || data[i + tl] == data[i + tl - dif]) {\r\n      var cl = UZIP.F._howLong(data, i, dif);\r\n      if (cl > tl) {\r\n        tl = cl;\r\n        td = dif;\r\n        if (tl >= nice) break; //*\r\n        if (dif + 2 < cl) cl = dif + 2;\r\n        var maxd = 0; // pi does not point to the start of the word\r\n        for (var j = 0; j < cl - 2; j++) {\r\n          var ei = (i - dif + j + (1 << 15)) & 0x7fff;\r\n          var li = prev[ei];\r\n          var curd = (ei - li + (1 << 15)) & 0x7fff;\r\n          if (curd > maxd) {\r\n            maxd = curd;\r\n            pi = ei;\r\n          }\r\n        } //*/\r\n      }\r\n    }\r\n\r\n    ci = pi;\r\n    pi = prev[ci];\r\n    dif += (ci - pi + (1 << 15)) & 0x7fff;\r\n  }\r\n  return (tl << 16) | td;\r\n};\r\nUZIP.F._howLong = function (data, i, dif) {\r\n  if (\r\n    data[i] != data[i - dif] ||\r\n    data[i + 1] != data[i + 1 - dif] ||\r\n    data[i + 2] != data[i + 2 - dif]\r\n  )\r\n    return 0;\r\n  var oi = i,\r\n    l = Math.min(data.length, i + 258);\r\n  i += 3;\r\n  //while(i+4<l && data[i]==data[i-dif] && data[i+1]==data[i+1-dif] && data[i+2]==data[i+2-dif] && data[i+3]==data[i+3-dif]) i+=4;\r\n  while (i < l && data[i] == data[i - dif]) i++;\r\n  return i - oi;\r\n};\r\nUZIP.F._hash = function (data, i) {\r\n  return (\r\n    (((data[i] << 8) | data[i + 1]) + (data[i + 2] << 4)) & 0xffff\r\n  );\r\n  //var hash_shift = 0, hash_mask = 255;\r\n  //var h = data[i+1] % 251;\r\n  //h = (((h << 8) + data[i+2]) % 251);\r\n  //h = (((h << 8) + data[i+2]) % 251);\r\n  //h = ((h<<hash_shift) ^ (c) ) & hash_mask;\r\n  //return h | (data[i]<<8);\r\n  //return (data[i] | (data[i+1]<<8));\r\n};\r\n//UZIP.___toth = 0;\r\nUZIP.saved = 0;\r\nUZIP.F._writeBlock = function (\r\n  BFINAL,\r\n  lits,\r\n  li,\r\n  ebits,\r\n  data,\r\n  o0,\r\n  l0,\r\n  out,\r\n  pos,\r\n) {\r\n  var U = UZIP.F.U,\r\n    putsF = UZIP.F._putsF,\r\n    putsE = UZIP.F._putsE;\r\n\r\n  //*\r\n  var T, ML, MD, MH, numl, numd, numh, lset, dset;\r\n  U.lhst[256]++;\r\n  T = UZIP.F.getTrees();\r\n  ML = T[0];\r\n  MD = T[1];\r\n  MH = T[2];\r\n  numl = T[3];\r\n  numd = T[4];\r\n  numh = T[5];\r\n  lset = T[6];\r\n  dset = T[7];\r\n\r\n  var cstSize =\r\n    (((pos + 3) & 7) == 0 ? 0 : 8 - ((pos + 3) & 7)) + 32 + (l0 << 3);\r\n  var fxdSize =\r\n    ebits +\r\n    UZIP.F.contSize(U.fltree, U.lhst) +\r\n    UZIP.F.contSize(U.fdtree, U.dhst);\r\n  var dynSize =\r\n    ebits +\r\n    UZIP.F.contSize(U.ltree, U.lhst) +\r\n    UZIP.F.contSize(U.dtree, U.dhst);\r\n  dynSize +=\r\n    14 +\r\n    3 * numh +\r\n    UZIP.F.contSize(U.itree, U.ihst) +\r\n    (U.ihst[16] * 2 + U.ihst[17] * 3 + U.ihst[18] * 7);\r\n\r\n  for (var j = 0; j < 286; j++) U.lhst[j] = 0;\r\n  for (var j = 0; j < 30; j++) U.dhst[j] = 0;\r\n  for (var j = 0; j < 19; j++) U.ihst[j] = 0;\r\n  //*/\r\n  var BTYPE =\r\n    cstSize < fxdSize && cstSize < dynSize\r\n      ? 0\r\n      : fxdSize < dynSize\r\n      ? 1\r\n      : 2;\r\n  putsF(out, pos, BFINAL);\r\n  putsF(out, pos + 1, BTYPE);\r\n  pos += 3;\r\n\r\n  var opos = pos;\r\n  if (BTYPE == 0) {\r\n    while ((pos & 7) != 0) pos++;\r\n    pos = UZIP.F._copyExact(data, o0, l0, out, pos);\r\n  } else {\r\n    var ltree, dtree;\r\n    if (BTYPE == 1) {\r\n      ltree = U.fltree;\r\n      dtree = U.fdtree;\r\n    }\r\n    if (BTYPE == 2) {\r\n      UZIP.F.makeCodes(U.ltree, ML);\r\n      UZIP.F.revCodes(U.ltree, ML);\r\n      UZIP.F.makeCodes(U.dtree, MD);\r\n      UZIP.F.revCodes(U.dtree, MD);\r\n      UZIP.F.makeCodes(U.itree, MH);\r\n      UZIP.F.revCodes(U.itree, MH);\r\n\r\n      ltree = U.ltree;\r\n      dtree = U.dtree;\r\n\r\n      putsE(out, pos, numl - 257);\r\n      pos += 5; // 286\r\n      putsE(out, pos, numd - 1);\r\n      pos += 5; // 30\r\n      putsE(out, pos, numh - 4);\r\n      pos += 4; // 19\r\n\r\n      for (var i = 0; i < numh; i++)\r\n        putsE(out, pos + i * 3, U.itree[(U.ordr[i] << 1) + 1]);\r\n      pos += 3 * numh;\r\n      pos = UZIP.F._codeTiny(lset, U.itree, out, pos);\r\n      pos = UZIP.F._codeTiny(dset, U.itree, out, pos);\r\n    }\r\n\r\n    var off = o0;\r\n    for (var si = 0; si < li; si += 2) {\r\n      var qb = lits[si],\r\n        len = qb >>> 23,\r\n        end = off + (qb & ((1 << 23) - 1));\r\n      while (off < end)\r\n        pos = UZIP.F._writeLit(data[off++], ltree, out, pos);\r\n\r\n      if (len != 0) {\r\n        var qc = lits[si + 1],\r\n          dst = qc >> 16,\r\n          lgi = (qc >> 8) & 255,\r\n          dgi = qc & 255;\r\n        pos = UZIP.F._writeLit(257 + lgi, ltree, out, pos);\r\n        putsE(out, pos, len - U.of0[lgi]);\r\n        pos += U.exb[lgi];\r\n\r\n        pos = UZIP.F._writeLit(dgi, dtree, out, pos);\r\n        putsF(out, pos, dst - U.df0[dgi]);\r\n        pos += U.dxb[dgi];\r\n        off += len;\r\n      }\r\n    }\r\n    pos = UZIP.F._writeLit(256, ltree, out, pos);\r\n  }\r\n  //console.log(pos-opos, fxdSize, dynSize, cstSize);\r\n  return pos;\r\n};\r\nUZIP.F._copyExact = function (data, off, len, out, pos) {\r\n  var p8 = pos >>> 3;\r\n  out[p8] = len;\r\n  out[p8 + 1] = len >>> 8;\r\n  out[p8 + 2] = 255 - out[p8];\r\n  out[p8 + 3] = 255 - out[p8 + 1];\r\n  p8 += 4;\r\n  out.set(new Uint8Array(data.buffer, off, len), p8);\r\n  //for(var i=0; i<len; i++) out[p8+i]=data[off+i];\r\n  return pos + ((len + 4) << 3);\r\n};\r\n/*\r\n\tInteresting facts:\r\n\t- decompressed block can have bytes, which do not occur in a Huffman tree (copied from the previous block by reference)\r\n*/\r\n\r\nUZIP.F.getTrees = function () {\r\n  var U = UZIP.F.U;\r\n  var ML = UZIP.F._hufTree(U.lhst, U.ltree, 15);\r\n  var MD = UZIP.F._hufTree(U.dhst, U.dtree, 15);\r\n  var lset = [],\r\n    numl = UZIP.F._lenCodes(U.ltree, lset);\r\n  var dset = [],\r\n    numd = UZIP.F._lenCodes(U.dtree, dset);\r\n  for (var i = 0; i < lset.length; i += 2) U.ihst[lset[i]]++;\r\n  for (var i = 0; i < dset.length; i += 2) U.ihst[dset[i]]++;\r\n  var MH = UZIP.F._hufTree(U.ihst, U.itree, 7);\r\n  var numh = 19;\r\n  while (numh > 4 && U.itree[(U.ordr[numh - 1] << 1) + 1] == 0)\r\n    numh--;\r\n  return [ML, MD, MH, numl, numd, numh, lset, dset];\r\n};\r\nUZIP.F.getSecond = function (a) {\r\n  var b = [];\r\n  for (var i = 0; i < a.length; i += 2) b.push(a[i + 1]);\r\n  return b;\r\n};\r\nUZIP.F.nonZero = function (a) {\r\n  var b = '';\r\n  for (var i = 0; i < a.length; i += 2)\r\n    if (a[i + 1] != 0) b += (i >> 1) + ',';\r\n  return b;\r\n};\r\nUZIP.F.contSize = function (tree, hst) {\r\n  var s = 0;\r\n  for (var i = 0; i < hst.length; i++)\r\n    s += hst[i] * tree[(i << 1) + 1];\r\n  return s;\r\n};\r\nUZIP.F._codeTiny = function (set, tree, out, pos) {\r\n  for (var i = 0; i < set.length; i += 2) {\r\n    var l = set[i],\r\n      rst = set[i + 1]; //console.log(l, pos, tree[(l<<1)+1]);\r\n    pos = UZIP.F._writeLit(l, tree, out, pos);\r\n    var rsl = l == 16 ? 2 : l == 17 ? 3 : 7;\r\n    if (l > 15) {\r\n      UZIP.F._putsE(out, pos, rst, rsl);\r\n      pos += rsl;\r\n    }\r\n  }\r\n  return pos;\r\n};\r\nUZIP.F._lenCodes = function (tree, set) {\r\n  var len = tree.length;\r\n  while (len != 2 && tree[len - 1] == 0) len -= 2; // when no distances, keep one code with length 0\r\n  for (var i = 0; i < len; i += 2) {\r\n    var l = tree[i + 1],\r\n      nxt = i + 3 < len ? tree[i + 3] : -1,\r\n      nnxt = i + 5 < len ? tree[i + 5] : -1,\r\n      prv = i == 0 ? -1 : tree[i - 1];\r\n    if (l == 0 && nxt == l && nnxt == l) {\r\n      var lz = i + 5;\r\n      while (lz + 2 < len && tree[lz + 2] == l) lz += 2;\r\n      var zc = Math.min((lz + 1 - i) >>> 1, 138);\r\n      if (zc < 11) set.push(17, zc - 3);\r\n      else set.push(18, zc - 11);\r\n      i += zc * 2 - 2;\r\n    } else if (l == prv && nxt == l && nnxt == l) {\r\n      var lz = i + 5;\r\n      while (lz + 2 < len && tree[lz + 2] == l) lz += 2;\r\n      var zc = Math.min((lz + 1 - i) >>> 1, 6);\r\n      set.push(16, zc - 3);\r\n      i += zc * 2 - 2;\r\n    } else set.push(l, 0);\r\n  }\r\n  return len >>> 1;\r\n};\r\nUZIP.F._hufTree = function (hst, tree, MAXL) {\r\n  var list = [],\r\n    hl = hst.length,\r\n    tl = tree.length,\r\n    i = 0;\r\n  for (i = 0; i < tl; i += 2) {\r\n    tree[i] = 0;\r\n    tree[i + 1] = 0;\r\n  }\r\n  for (i = 0; i < hl; i++)\r\n    if (hst[i] != 0) list.push({ lit: i, f: hst[i] });\r\n  var end = list.length,\r\n    l2 = list.slice(0);\r\n  if (end == 0) return 0; // empty histogram (usually for dist)\r\n  if (end == 1) {\r\n    var lit = list[0].lit,\r\n      l2 = lit == 0 ? 1 : 0;\r\n    tree[(lit << 1) + 1] = 1;\r\n    tree[(l2 << 1) + 1] = 1;\r\n    return 1;\r\n  }\r\n  list.sort(function (a, b) {\r\n    return a.f - b.f;\r\n  });\r\n  var a = list[0],\r\n    b = list[1],\r\n    i0 = 0,\r\n    i1 = 1,\r\n    i2 = 2;\r\n  list[0] = { lit: -1, f: a.f + b.f, l: a, r: b, d: 0 };\r\n  while (i1 != end - 1) {\r\n    if (i0 != i1 && (i2 == end || list[i0].f < list[i2].f)) {\r\n      a = list[i0++];\r\n    } else {\r\n      a = list[i2++];\r\n    }\r\n    if (i0 != i1 && (i2 == end || list[i0].f < list[i2].f)) {\r\n      b = list[i0++];\r\n    } else {\r\n      b = list[i2++];\r\n    }\r\n    list[i1++] = { lit: -1, f: a.f + b.f, l: a, r: b };\r\n  }\r\n  var maxl = UZIP.F.setDepth(list[i1 - 1], 0);\r\n  if (maxl > MAXL) {\r\n    UZIP.F.restrictDepth(l2, MAXL, maxl);\r\n    maxl = MAXL;\r\n  }\r\n  for (i = 0; i < end; i++) tree[(l2[i].lit << 1) + 1] = l2[i].d;\r\n  return maxl;\r\n};\r\n\r\nUZIP.F.setDepth = function (t, d) {\r\n  if (t.lit != -1) {\r\n    t.d = d;\r\n    return d;\r\n  }\r\n  return Math.max(\r\n    UZIP.F.setDepth(t.l, d + 1),\r\n    UZIP.F.setDepth(t.r, d + 1),\r\n  );\r\n};\r\n\r\nUZIP.F.restrictDepth = function (dps, MD, maxl) {\r\n  var i = 0,\r\n    bCost = 1 << (maxl - MD),\r\n    dbt = 0;\r\n  dps.sort(function (a, b) {\r\n    return b.d == a.d ? a.f - b.f : b.d - a.d;\r\n  });\r\n\r\n  for (i = 0; i < dps.length; i++)\r\n    if (dps[i].d > MD) {\r\n      var od = dps[i].d;\r\n      dps[i].d = MD;\r\n      dbt += bCost - (1 << (maxl - od));\r\n    } else break;\r\n  dbt = dbt >>> (maxl - MD);\r\n  while (dbt > 0) {\r\n    var od = dps[i].d;\r\n    if (od < MD) {\r\n      dps[i].d++;\r\n      dbt -= 1 << (MD - od - 1);\r\n    } else i++;\r\n  }\r\n  for (; i >= 0; i--)\r\n    if (dps[i].d == MD && dbt < 0) {\r\n      dps[i].d--;\r\n      dbt++;\r\n    }\r\n  if (dbt != 0) console.log('debt left');\r\n};\r\n\r\nUZIP.F._goodIndex = function (v, arr) {\r\n  var i = 0;\r\n  if (arr[i | 16] <= v) i |= 16;\r\n  if (arr[i | 8] <= v) i |= 8;\r\n  if (arr[i | 4] <= v) i |= 4;\r\n  if (arr[i | 2] <= v) i |= 2;\r\n  if (arr[i | 1] <= v) i |= 1;\r\n  return i;\r\n};\r\nUZIP.F._writeLit = function (ch, ltree, out, pos) {\r\n  UZIP.F._putsF(out, pos, ltree[ch << 1]);\r\n  return pos + ltree[(ch << 1) + 1];\r\n};\r\n\r\nUZIP.F.inflate = function (data, buf) {\r\n  var u8 = Uint8Array;\r\n  if (data[0] == 3 && data[1] == 0) return buf ? buf : new u8(0);\r\n  var F = UZIP.F,\r\n    bitsF = F._bitsF,\r\n    bitsE = F._bitsE,\r\n    decodeTiny = F._decodeTiny,\r\n    makeCodes = F.makeCodes,\r\n    codes2map = F.codes2map,\r\n    get17 = F._get17;\r\n  var U = F.U;\r\n\r\n  var noBuf = buf == null;\r\n  if (noBuf) buf = new u8((data.length >>> 2) << 3);\r\n\r\n  var BFINAL = 0,\r\n    BTYPE = 0,\r\n    HLIT = 0,\r\n    HDIST = 0,\r\n    HCLEN = 0,\r\n    ML = 0,\r\n    MD = 0;\r\n  var off = 0,\r\n    pos = 0;\r\n  var lmap, dmap;\r\n\r\n  while (BFINAL == 0) {\r\n    BFINAL = bitsF(data, pos, 1);\r\n    BTYPE = bitsF(data, pos + 1, 2);\r\n    pos += 3;\r\n    //console.log(BFINAL, BTYPE);\r\n\r\n    if (BTYPE == 0) {\r\n      if ((pos & 7) != 0) pos += 8 - (pos & 7);\r\n      var p8 = (pos >>> 3) + 4,\r\n        len = data[p8 - 4] | (data[p8 - 3] << 8); //console.log(len);//bitsF(data, pos, 16),\r\n      if (noBuf) buf = UZIP.F._check(buf, off + len);\r\n      buf.set(new u8(data.buffer, data.byteOffset + p8, len), off);\r\n      //for(var i=0; i<len; i++) buf[off+i] = data[p8+i];\r\n      //for(var i=0; i<len; i++) if(buf[off+i] != data[p8+i]) throw \"e\";\r\n      pos = (p8 + len) << 3;\r\n      off += len;\r\n      continue;\r\n    }\r\n    if (noBuf) buf = UZIP.F._check(buf, off + (1 << 17)); // really not enough in many cases (but PNG and ZIP provide buffer in advance)\r\n    if (BTYPE == 1) {\r\n      lmap = U.flmap;\r\n      dmap = U.fdmap;\r\n      ML = (1 << 9) - 1;\r\n      MD = (1 << 5) - 1;\r\n    }\r\n    if (BTYPE == 2) {\r\n      HLIT = bitsE(data, pos, 5) + 257;\r\n      HDIST = bitsE(data, pos + 5, 5) + 1;\r\n      HCLEN = bitsE(data, pos + 10, 4) + 4;\r\n      pos += 14;\r\n\r\n      var ppos = pos;\r\n      for (var i = 0; i < 38; i += 2) {\r\n        U.itree[i] = 0;\r\n        U.itree[i + 1] = 0;\r\n      }\r\n      var tl = 1;\r\n      for (var i = 0; i < HCLEN; i++) {\r\n        var l = bitsE(data, pos + i * 3, 3);\r\n        U.itree[(U.ordr[i] << 1) + 1] = l;\r\n        if (l > tl) tl = l;\r\n      }\r\n      pos += 3 * HCLEN; //console.log(itree);\r\n      makeCodes(U.itree, tl);\r\n      codes2map(U.itree, tl, U.imap);\r\n\r\n      lmap = U.lmap;\r\n      dmap = U.dmap;\r\n\r\n      pos = decodeTiny(\r\n        U.imap,\r\n        (1 << tl) - 1,\r\n        HLIT + HDIST,\r\n        data,\r\n        pos,\r\n        U.ttree,\r\n      );\r\n      var mx0 = F._copyOut(U.ttree, 0, HLIT, U.ltree);\r\n      ML = (1 << mx0) - 1;\r\n      var mx1 = F._copyOut(U.ttree, HLIT, HDIST, U.dtree);\r\n      MD = (1 << mx1) - 1;\r\n\r\n      //var ml = decodeTiny(U.imap, (1<<tl)-1, HLIT , data, pos, U.ltree); ML = (1<<(ml>>>24))-1;  pos+=(ml&0xffffff);\r\n      makeCodes(U.ltree, mx0);\r\n      codes2map(U.ltree, mx0, lmap);\r\n\r\n      //var md = decodeTiny(U.imap, (1<<tl)-1, HDIST, data, pos, U.dtree); MD = (1<<(md>>>24))-1;  pos+=(md&0xffffff);\r\n      makeCodes(U.dtree, mx1);\r\n      codes2map(U.dtree, mx1, dmap);\r\n    }\r\n    //var ooff=off, opos=pos;\r\n    while (true) {\r\n      var code = lmap[get17(data, pos) & ML];\r\n      pos += code & 15;\r\n      var lit = code >>> 4; //U.lhst[lit]++;\r\n      if (lit >>> 8 == 0) {\r\n        buf[off++] = lit;\r\n      } else if (lit == 256) {\r\n        break;\r\n      } else {\r\n        var end = off + lit - 254;\r\n        if (lit > 264) {\r\n          var ebs = U.ldef[lit - 257];\r\n          end = off + (ebs >>> 3) + bitsE(data, pos, ebs & 7);\r\n          pos += ebs & 7;\r\n        }\r\n        //UZIP.F.dst[end-off]++;\r\n\r\n        var dcode = dmap[get17(data, pos) & MD];\r\n        pos += dcode & 15;\r\n        var dlit = dcode >>> 4;\r\n        var dbs = U.ddef[dlit],\r\n          dst = (dbs >>> 4) + bitsF(data, pos, dbs & 15);\r\n        pos += dbs & 15;\r\n\r\n        //var o0 = off-dst, stp = Math.min(end-off, dst);\r\n        //if(stp>20) while(off<end) {  buf.copyWithin(off, o0, o0+stp);  off+=stp;  }  else\r\n        //if(end-dst<=off) buf.copyWithin(off, off-dst, end-dst);  else\r\n        //if(dst==1) buf.fill(buf[off-1], off, end);  else\r\n        if (noBuf) buf = UZIP.F._check(buf, off + (1 << 17));\r\n        while (off < end) {\r\n          buf[off] = buf[off++ - dst];\r\n          buf[off] = buf[off++ - dst];\r\n          buf[off] = buf[off++ - dst];\r\n          buf[off] = buf[off++ - dst];\r\n        }\r\n        off = end;\r\n        //while(off!=end) {  buf[off]=buf[off++-dst];  }\r\n      }\r\n    }\r\n    //console.log(off-ooff, (pos-opos)>>>3);\r\n  }\r\n  //console.log(UZIP.F.dst);\r\n  //console.log(tlen, dlen, off-tlen+tcnt);\r\n  return buf.length == off ? buf : buf.slice(0, off);\r\n};\r\nUZIP.F._check = function (buf, len) {\r\n  var bl = buf.length;\r\n  if (len <= bl) return buf;\r\n  var nbuf = new Uint8Array(Math.max(bl << 1, len));\r\n  nbuf.set(buf, 0);\r\n  //for(var i=0; i<bl; i+=4) {  nbuf[i]=buf[i];  nbuf[i+1]=buf[i+1];  nbuf[i+2]=buf[i+2];  nbuf[i+3]=buf[i+3];  }\r\n  return nbuf;\r\n};\r\n\r\nUZIP.F._decodeTiny = function (lmap, LL, len, data, pos, tree) {\r\n  var bitsE = UZIP.F._bitsE,\r\n    get17 = UZIP.F._get17;\r\n  var i = 0;\r\n  while (i < len) {\r\n    var code = lmap[get17(data, pos) & LL];\r\n    pos += code & 15;\r\n    var lit = code >>> 4;\r\n    if (lit <= 15) {\r\n      tree[i] = lit;\r\n      i++;\r\n    } else {\r\n      var ll = 0,\r\n        n = 0;\r\n      if (lit == 16) {\r\n        n = 3 + bitsE(data, pos, 2);\r\n        pos += 2;\r\n        ll = tree[i - 1];\r\n      } else if (lit == 17) {\r\n        n = 3 + bitsE(data, pos, 3);\r\n        pos += 3;\r\n      } else if (lit == 18) {\r\n        n = 11 + bitsE(data, pos, 7);\r\n        pos += 7;\r\n      }\r\n      var ni = i + n;\r\n      while (i < ni) {\r\n        tree[i] = ll;\r\n        i++;\r\n      }\r\n    }\r\n  }\r\n  return pos;\r\n};\r\nUZIP.F._copyOut = function (src, off, len, tree) {\r\n  var mx = 0,\r\n    i = 0,\r\n    tl = tree.length >>> 1;\r\n  while (i < len) {\r\n    var v = src[i + off];\r\n    tree[i << 1] = 0;\r\n    tree[(i << 1) + 1] = v;\r\n    if (v > mx) mx = v;\r\n    i++;\r\n  }\r\n  while (i < tl) {\r\n    tree[i << 1] = 0;\r\n    tree[(i << 1) + 1] = 0;\r\n    i++;\r\n  }\r\n  return mx;\r\n};\r\n\r\nUZIP.F.makeCodes = function (tree, MAX_BITS) {\r\n  // code, length\r\n  var U = UZIP.F.U;\r\n  var max_code = tree.length;\r\n  var code, bits, n, i, len;\r\n\r\n  var bl_count = U.bl_count;\r\n  for (var i = 0; i <= MAX_BITS; i++) bl_count[i] = 0;\r\n  for (i = 1; i < max_code; i += 2) bl_count[tree[i]]++;\r\n\r\n  var next_code = U.next_code; // smallest code for each length\r\n\r\n  code = 0;\r\n  bl_count[0] = 0;\r\n  for (bits = 1; bits <= MAX_BITS; bits++) {\r\n    code = (code + bl_count[bits - 1]) << 1;\r\n    next_code[bits] = code;\r\n  }\r\n\r\n  for (n = 0; n < max_code; n += 2) {\r\n    len = tree[n + 1];\r\n    if (len != 0) {\r\n      tree[n] = next_code[len];\r\n      next_code[len]++;\r\n    }\r\n  }\r\n};\r\nUZIP.F.codes2map = function (tree, MAX_BITS, map) {\r\n  var max_code = tree.length;\r\n  var U = UZIP.F.U,\r\n    r15 = U.rev15;\r\n  for (var i = 0; i < max_code; i += 2)\r\n    if (tree[i + 1] != 0) {\r\n      var lit = i >> 1;\r\n      var cl = tree[i + 1],\r\n        val = (lit << 4) | cl; // :  (0x8000 | (U.of0[lit-257]<<7) | (U.exb[lit-257]<<4) | cl);\r\n      var rest = MAX_BITS - cl,\r\n        i0 = tree[i] << rest,\r\n        i1 = i0 + (1 << rest);\r\n      //tree[i]=r15[i0]>>>(15-MAX_BITS);\r\n      while (i0 != i1) {\r\n        var p0 = r15[i0] >>> (15 - MAX_BITS);\r\n        map[p0] = val;\r\n        i0++;\r\n      }\r\n    }\r\n};\r\nUZIP.F.revCodes = function (tree, MAX_BITS) {\r\n  var r15 = UZIP.F.U.rev15,\r\n    imb = 15 - MAX_BITS;\r\n  for (var i = 0; i < tree.length; i += 2) {\r\n    var i0 = tree[i] << (MAX_BITS - tree[i + 1]);\r\n    tree[i] = r15[i0] >>> imb;\r\n  }\r\n};\r\n\r\n// used only in deflate\r\nUZIP.F._putsE = function (dt, pos, val) {\r\n  val = val << (pos & 7);\r\n  var o = pos >>> 3;\r\n  dt[o] |= val;\r\n  dt[o + 1] |= val >>> 8;\r\n};\r\nUZIP.F._putsF = function (dt, pos, val) {\r\n  val = val << (pos & 7);\r\n  var o = pos >>> 3;\r\n  dt[o] |= val;\r\n  dt[o + 1] |= val >>> 8;\r\n  dt[o + 2] |= val >>> 16;\r\n};\r\n\r\nUZIP.F._bitsE = function (dt, pos, length) {\r\n  return (\r\n    ((dt[pos >>> 3] | (dt[(pos >>> 3) + 1] << 8)) >>> (pos & 7)) &\r\n    ((1 << length) - 1)\r\n  );\r\n};\r\nUZIP.F._bitsF = function (dt, pos, length) {\r\n  return (\r\n    ((dt[pos >>> 3] |\r\n      (dt[(pos >>> 3) + 1] << 8) |\r\n      (dt[(pos >>> 3) + 2] << 16)) >>>\r\n      (pos & 7)) &\r\n    ((1 << length) - 1)\r\n  );\r\n};\r\n/*\r\nUZIP.F._get9 = function(dt, pos) {\r\n\treturn ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8))>>>(pos&7))&511;\r\n} */\r\nUZIP.F._get17 = function (dt, pos) {\r\n  // return at least 17 meaningful bytes\r\n  return (\r\n    (dt[pos >>> 3] |\r\n      (dt[(pos >>> 3) + 1] << 8) |\r\n      (dt[(pos >>> 3) + 2] << 16)) >>>\r\n    (pos & 7)\r\n  );\r\n};\r\nUZIP.F._get25 = function (dt, pos) {\r\n  // return at least 17 meaningful bytes\r\n  return (\r\n    (dt[pos >>> 3] |\r\n      (dt[(pos >>> 3) + 1] << 8) |\r\n      (dt[(pos >>> 3) + 2] << 16) |\r\n      (dt[(pos >>> 3) + 3] << 24)) >>>\r\n    (pos & 7)\r\n  );\r\n};\r\nUZIP.F.U = (function () {\r\n  var u16 = Uint16Array,\r\n    u32 = Uint32Array;\r\n  return {\r\n    next_code: new u16(16),\r\n    bl_count: new u16(16),\r\n    ordr: [\r\n      16,\r\n      17,\r\n      18,\r\n      0,\r\n      8,\r\n      7,\r\n      9,\r\n      6,\r\n      10,\r\n      5,\r\n      11,\r\n      4,\r\n      12,\r\n      3,\r\n      13,\r\n      2,\r\n      14,\r\n      1,\r\n      15,\r\n    ],\r\n    of0: [\r\n      3,\r\n      4,\r\n      5,\r\n      6,\r\n      7,\r\n      8,\r\n      9,\r\n      10,\r\n      11,\r\n      13,\r\n      15,\r\n      17,\r\n      19,\r\n      23,\r\n      27,\r\n      31,\r\n      35,\r\n      43,\r\n      51,\r\n      59,\r\n      67,\r\n      83,\r\n      99,\r\n      115,\r\n      131,\r\n      163,\r\n      195,\r\n      227,\r\n      258,\r\n      999,\r\n      999,\r\n      999,\r\n    ],\r\n    exb: [\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      1,\r\n      1,\r\n      1,\r\n      1,\r\n      2,\r\n      2,\r\n      2,\r\n      2,\r\n      3,\r\n      3,\r\n      3,\r\n      3,\r\n      4,\r\n      4,\r\n      4,\r\n      4,\r\n      5,\r\n      5,\r\n      5,\r\n      5,\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n    ],\r\n    ldef: new u16(32),\r\n    df0: [\r\n      1,\r\n      2,\r\n      3,\r\n      4,\r\n      5,\r\n      7,\r\n      9,\r\n      13,\r\n      17,\r\n      25,\r\n      33,\r\n      49,\r\n      65,\r\n      97,\r\n      129,\r\n      193,\r\n      257,\r\n      385,\r\n      513,\r\n      769,\r\n      1025,\r\n      1537,\r\n      2049,\r\n      3073,\r\n      4097,\r\n      6145,\r\n      8193,\r\n      12289,\r\n      16385,\r\n      24577,\r\n      65535,\r\n      65535,\r\n    ],\r\n    dxb: [\r\n      0,\r\n      0,\r\n      0,\r\n      0,\r\n      1,\r\n      1,\r\n      2,\r\n      2,\r\n      3,\r\n      3,\r\n      4,\r\n      4,\r\n      5,\r\n      5,\r\n      6,\r\n      6,\r\n      7,\r\n      7,\r\n      8,\r\n      8,\r\n      9,\r\n      9,\r\n      10,\r\n      10,\r\n      11,\r\n      11,\r\n      12,\r\n      12,\r\n      13,\r\n      13,\r\n      0,\r\n      0,\r\n    ],\r\n    ddef: new u32(32),\r\n    flmap: new u16(512),\r\n    fltree: [],\r\n    fdmap: new u16(32),\r\n    fdtree: [],\r\n    lmap: new u16(32768),\r\n    ltree: [],\r\n    ttree: [],\r\n    dmap: new u16(32768),\r\n    dtree: [],\r\n    imap: new u16(512),\r\n    itree: [],\r\n    //rev9 : new u16(  512)\r\n    rev15: new u16(1 << 15),\r\n    lhst: new u32(286),\r\n    dhst: new u32(30),\r\n    ihst: new u32(19),\r\n    lits: new u32(15000),\r\n    strt: new u16(1 << 16),\r\n    prev: new u16(1 << 15),\r\n  };\r\n})();\r\n\r\n(function () {\r\n  var U = UZIP.F.U;\r\n  var len = 1 << 15;\r\n  for (var i = 0; i < len; i++) {\r\n    var x = i;\r\n    x = ((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1);\r\n    x = ((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2);\r\n    x = ((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4);\r\n    x = ((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8);\r\n    U.rev15[i] = ((x >>> 16) | (x << 16)) >>> 17;\r\n  }\r\n\r\n  function pushV(tgt, n, sv) {\r\n    while (n-- != 0) tgt.push(0, sv);\r\n  }\r\n\r\n  for (var i = 0; i < 32; i++) {\r\n    U.ldef[i] = (U.of0[i] << 3) | U.exb[i];\r\n    U.ddef[i] = (U.df0[i] << 4) | U.dxb[i];\r\n  }\r\n\r\n  pushV(U.fltree, 144, 8);\r\n  pushV(U.fltree, 255 - 143, 9);\r\n  pushV(U.fltree, 279 - 255, 7);\r\n  pushV(U.fltree, 287 - 279, 8);\r\n  /*\r\n\tvar i = 0;\r\n\tfor(; i<=143; i++) U.fltree.push(0,8);\r\n\tfor(; i<=255; i++) U.fltree.push(0,9);\r\n\tfor(; i<=279; i++) U.fltree.push(0,7);\r\n\tfor(; i<=287; i++) U.fltree.push(0,8);\r\n\t*/\r\n  UZIP.F.makeCodes(U.fltree, 9);\r\n  UZIP.F.codes2map(U.fltree, 9, U.flmap);\r\n  UZIP.F.revCodes(U.fltree, 9);\r\n\r\n  pushV(U.fdtree, 32, 5);\r\n  //for(i=0;i<32; i++) U.fdtree.push(0,5);\r\n  UZIP.F.makeCodes(U.fdtree, 5);\r\n  UZIP.F.codes2map(U.fdtree, 5, U.fdmap);\r\n  UZIP.F.revCodes(U.fdtree, 5);\r\n\r\n  pushV(U.itree, 19, 0);\r\n  pushV(U.ltree, 286, 0);\r\n  pushV(U.dtree, 30, 0);\r\n  pushV(U.ttree, 320, 0);\r\n  /*\r\n\tfor(var i=0; i< 19; i++) U.itree.push(0,0);\r\n\tfor(var i=0; i<286; i++) U.ltree.push(0,0);\r\n\tfor(var i=0; i< 30; i++) U.dtree.push(0,0);\r\n\tfor(var i=0; i<320; i++) U.ttree.push(0,0);\r\n\t*/\r\n})();\r\n\r\nexport { UZIP };\r\n","function readAs(file, as) {\r\n  if (!(file instanceof Blob)) {\r\n    throw new TypeError('Must be a File or Blob');\r\n  }\r\n  return new Promise(function (resolve, reject) {\r\n    var reader = new FileReader();\r\n    reader.onload = function (e) {\r\n      resolve(e.target.result);\r\n    };\r\n    reader.onerror = function (e) {\r\n      reject(\r\n        new Error(\r\n          'Error reading' + file.name + ': ' + e.target.result,\r\n        ),\r\n      );\r\n    };\r\n    reader['readAs' + as](file);\r\n  });\r\n}\r\n\r\nfunction readAsDataURL(file) {\r\n  return readAs(file, 'DataURL');\r\n}\r\n\r\nfunction readAsText(file) {\r\n  return readAs(file, 'Text');\r\n}\r\n\r\nfunction readAsArrayBuffer(file) {\r\n  return readAs(file, 'ArrayBuffer');\r\n}\r\n\r\nexport { readAsArrayBuffer };\r\n","import { saveAs } from 'file-saver';\r\nimport { generateNameFromPageTitle } from './utils/generateNameFromPageTitle.js';\r\nimport { UZIP } from './vendor/custom/UZIP.js';\r\nimport { readAsArrayBuffer } from './vendor/custom/readAs.js';\r\nimport { stringToUint8 } from './utils/stringToUint8';\r\n\r\nclass Downloader {\r\n  constructor(files, assetsLocation) {\r\n    this.files = files;\r\n    this.assetsLocation = assetsLocation;\r\n    // TODO: add an instructions file to the zip\r\n  }\r\n\r\n  async prepareFiles() {\r\n    const zipFiles = {};\r\n    const assets = [];\r\n    for (const file of Object.values(this.files)) {\r\n      if (file.dataType === 'text') {\r\n        this.addTextFile(file, zipFiles);\r\n      } else {\r\n        assets.push(file);\r\n      }\r\n    }\r\n\r\n    await this.addAssetsToZip(assets, zipFiles);\r\n\r\n    return zipFiles;\r\n  }\r\n\r\n  addTextFile(file, zipFiles) {\r\n    const text = file.getContentsWithImportStyle('cdn');\r\n    zipFiles[`${file.url}`] = stringToUint8(text);\r\n  }\r\n\r\n  async addAssetsToZip(assets, zipFiles) {\r\n    const fileData = await this.fetchAssets(assets);\r\n\r\n    for (const [index, file] of assets.entries()) {\r\n      zipFiles[`${file.url}`] = new Uint8Array(\r\n        await readAsArrayBuffer(fileData[index]),\r\n      );\r\n    }\r\n  }\r\n\r\n  // TODO: this function is duplicated in Fetcher\r\n  async fetchAssets(assets) {\r\n    const filePromises = [];\r\n\r\n    for (const file of assets) {\r\n      const serverURL = file.url.replace(\r\n        /assets\\//g,\r\n        this.assetsLocation,\r\n      );\r\n\r\n      filePromises.push(fetch(serverURL));\r\n    }\r\n\r\n    const responses = await Promise.all(filePromises);\r\n    return Promise.all(responses.map((response) => response.blob()));\r\n  }\r\n\r\n  async downloadPackage() {\r\n    const name = generateNameFromPageTitle();\r\n    const zipFiles = await this.prepareFiles();\r\n\r\n    const zipped = UZIP.encode(zipFiles, false);\r\n    const blob = new Blob([zipped], { type: 'application/zip' });\r\n\r\n    saveAs(blob, `${name}.zip`);\r\n  }\r\n}\r\n\r\nexport { Downloader };\r\n","function stringToUint8(string) {\r\n  const uint = new Uint8Array(string.length);\r\n  for (let i = 0, j = string.length; i < j; ++i) {\r\n    uint[i] = string.charCodeAt(i);\r\n  }\r\n\r\n  return uint;\r\n}\r\n\r\nexport { stringToUint8 };\r\n","function generateNameFromPageTitle() {\r\n  return document.title\r\n    .split('|')[0]\r\n    .trim()\r\n    .replace(/ /g, '_')\r\n    .replace(/[^a-z0-9_]/gi, '');\r\n}\r\n\r\nexport { generateNameFromPageTitle };\r\n","import { BlobURLGenerator } from './BlobURLGenerator/BlobURLGenerator.js';\r\nimport { Editor } from './Editor/Editor.js';\r\nimport { Fetcher } from './Fetcher/Fetcher.js';\r\nimport { FileTree } from './FileTree/FileTree.js';\r\nimport { Preview } from './Preview/Preview.js';\r\nimport { Controls } from './Controls/Controls.js';\r\nimport { setupPanels } from './Panels/setupPanels.js';\r\nimport { Downloader } from './Downloader/Downloader.js';\r\nimport { getSiteURL } from './utils/getSiteURL.js';\r\n\r\n// NOTES:\r\n// load from directory structure like\r\n//\r\n// /assets\r\n//  -> /model\r\n//  -> /textures\r\n// /vendor\r\n//  -> three\r\n// /styles\r\n// /worlds\r\n//  -> chapter_01\r\n//  -> -> src\r\n//  -> -> index.html\r\n//\r\n// All worlds can share nearly all files, and differences are placed under worlds/\r\n// then the path /worlds/chapter_01/ can be hidden from the user when loaded in the IDE to keep things clean\r\n\r\nclass IDE {\r\n  constructor(config) {\r\n    this.config = config;\r\n    this.config.siteURL = getSiteURL();\r\n    this.config.assetsLocation = `${this.config.siteURL}/${this.config.serverDirectory}/assets/`;\r\n\r\n    this.fileTypes = ['.js', '.html', '.css', '.glb', '.png', '.jpg'];\r\n    this.textTypes = ['js', 'html', 'css'];\r\n    this.imageTypes = ['png', 'jpg'];\r\n    this.otherTypes = ['glb'];\r\n\r\n    this.comparisonsEnabled =\r\n      this.config.comparisonMode.toLowerCase() === 'true';\r\n\r\n    this.container = document.querySelector(config.container);\r\n  }\r\n\r\n  async init() {\r\n    this.files = await Fetcher.fetchFiles(\r\n      this.config.files,\r\n      this.config.startFiles,\r\n      this.config.finalFiles,\r\n      this.config.serverDirectory,\r\n      this.config.stripDirectory,\r\n      this.comparisonsEnabled,\r\n    );\r\n\r\n    this.editor = new Editor(this.files);\r\n    this.preview = new Preview();\r\n    this.imagePreview = document.querySelector('#image-preview');\r\n\r\n    this.fileTree = new FileTree(\r\n      this.files,\r\n      this.fileTypes,\r\n      this.config.closedFolders,\r\n      this.editor,\r\n      this.imagePreview,\r\n      this.comparisonsEnabled,\r\n    );\r\n\r\n    this.urlGenerator = new BlobURLGenerator(\r\n      this.files,\r\n      this.config.assetsLocation,\r\n      this.config.entry,\r\n    );\r\n\r\n    if (this.config.activeDocument) {\r\n      this.setActiveDocument(this.config.activeDocument);\r\n    }\r\n\r\n    this.preview.update(this.urlGenerator.generateSrcURL());\r\n    this.downloader = new Downloader(\r\n      this.files,\r\n      this.config.assetsLocation,\r\n    );\r\n\r\n    this.setupControls();\r\n    this.setupEvents();\r\n\r\n    setupPanels(this, this.config.fullScreen);\r\n  }\r\n\r\n  setActiveDocument(doc) {\r\n    this.editor.setActiveDocument(this.files[doc]);\r\n    this.fileTree.setSelectedFile(this.files[doc]);\r\n  }\r\n\r\n  setupEvents() {\r\n    // wait until typing stops for a certain time, then refresh\r\n    let refreshCountDown;\r\n\r\n    this.editor.setEventCallback('changes', () => {\r\n      clearTimeout(refreshCountDown);\r\n\r\n      refreshCountDown = setTimeout(() => this.updatePreview(), 700);\r\n\r\n      this.resetControls.setButtonStates();\r\n    });\r\n\r\n    this.editor.setEventCallback('refresh', () => {\r\n      this.resetControls.setButtonStates();\r\n    });\r\n  }\r\n\r\n  setupControls() {\r\n    Controls.setupDownloadPackageButton(this.downloader);\r\n    Controls.setupImportStyleSelect(\r\n      this.files,\r\n      this.config.switchImportsAllowed,\r\n    );\r\n    Controls.openPreviewInNewWindow(this.preview);\r\n\r\n    this.resetControls = Controls.setupResetButtons(this.editor);\r\n\r\n    if (this.comparisonsEnabled) {\r\n      Controls.setupStartFinalCodeToggle(this.editor);\r\n    }\r\n  }\r\n\r\n  updatePreview() {\r\n    this.preview.update(this.urlGenerator.generateSrcURL());\r\n  }\r\n\r\n  update() {\r\n    this.updatePreview();\r\n    this.editor.refresh();\r\n  }\r\n}\r\n\r\nexport { IDE };\r\n","import { IDE } from './IDE/IDE.js';\r\n\r\nasync function setupIDE(config) {\r\n  const ideWrapper = document.querySelector('#ide-wrapper');\r\n\r\n  const ideControls = document.querySelectorAll('.ide-control');\r\n\r\n  if (config.showIDE === true && ideWrapper) {\r\n    ideControls.forEach((ctrl) => ctrl.classList.remove('hide'));\r\n\r\n    const ide = new IDE(config.IDE);\r\n    await ide.init();\r\n\r\n    ideWrapper.classList.remove('hide');\r\n  } else if (ideWrapper) {\r\n    ideWrapper.classList.add('hide');\r\n  }\r\n}\r\n\r\nexport { setupIDE };\r\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","value","makeInvokeMethod","fn","obj","call","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","getSiteURL","window","location","href","replace","pathname","hash","cleanURL","url","BlobURLGenerator","files","assetsLocation","vendorLocation","generateFileURL","createBlobURL","file","generateHtmlURL","generateCssURL","generateJsURL","document","DOMParser","parseFromString","contents","mimeType","querySelectorAll","style","ref","getAttribute","cssFile","_this","script","src","jsFile","htmlString","XMLSerializer","serializeToString","currentURL","substring","lastIndexOf","text","importURLs","string","regex","match","index","matches","exec","getRegexMatches","map","includes","indexOf","currentURLParts","split","filter","String","join","importURLConverter","_this2","blobURL","replaceAssetsURLs","replaceVendorURLs","newText","code","blob","Blob","URL","createObjectURL","userAgent","navigator","platform","gecko","test","ie_upto10","ie_11up","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","node","current","className","after","removeChildren","e","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","tag","content","createElement","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","a","b","as","createRange","start","end","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","bind","f","args","Array","arguments","apply","copyObj","target","overwrite","prop","countColumn","tabSize","startIndex","startValue","search","n","nextTab","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","array","Date","setTimeout","set","ms","clearTimeout","Pass","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","Math","min","spaceStrs","spaceStr","lst","arr","out","nothing","createObj","base","props","inst","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","toLowerCase","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","str","dir","findFirst","pred","from","to","midF","mid","ceil","floor","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","len","types","i$1","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","m","i$7","at","isRTL","j$2","splice","nstart","unshift","getOrder","line","noHandlers","on","emitter","addEventListener","attachEvent","_handlers","concat","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","cm","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","l","nl","rt","hasSelection","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","defineMode","mode","dependencies","resolveMode","spec","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","val","innerMode","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","chunk","lines","children","sz","chunkSize","getBetween","getLines","updateLineHeight","height","diff","lineNo","no","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","maxLookAhead","baseTokens","baseTokenPos","highlightLine","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","offset","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","find","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","p","lineLength","found$1","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","view","operationGroup","orphanDelayedCallbacks","signalLater","list","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","insertBefore","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","wrapper","clientWidth","eventInWidget","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","parseInt","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","abs","bottom","top","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","closestDist","endX","dist","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","e$1","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","readOnly","selForContextMenu","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","native","null","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","nodeName","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumInnerWidth","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","NaN","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","parts","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","returned","v","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","getValue","lineSeparator","setValue","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","allowDropFileTypes","reader","onerror","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","Left","Right","Up","Down","End","Home","PageUp","PageDown","Delete","Backspace","Shift-Backspace","Tab","Shift-Tab","Enter","Insert","Esc","pcDefault","Ctrl-A","Ctrl-D","Ctrl-Z","Shift-Ctrl-Z","Ctrl-Y","Ctrl-Home","Ctrl-End","Ctrl-Up","Ctrl-Down","Ctrl-Left","Ctrl-Right","Alt-Left","Alt-Right","Ctrl-Backspace","Ctrl-Delete","Ctrl-S","Ctrl-F","Ctrl-G","Shift-Ctrl-G","Shift-Ctrl-F","Shift-Ctrl-R","Ctrl-[","Ctrl-]","Ctrl-U","Shift-Ctrl-U","Alt-U","emacsy","Ctrl-B","Ctrl-P","Ctrl-N","Alt-F","Alt-B","Ctrl-E","Ctrl-V","Shift-Ctrl-V","Ctrl-H","Alt-D","Alt-Backspace","Ctrl-K","Ctrl-T","Ctrl-O","macDefault","Cmd-A","Cmd-D","Cmd-Z","Shift-Cmd-Z","Cmd-Y","Cmd-Home","Cmd-Up","Cmd-End","Cmd-Down","Cmd-Left","Cmd-Right","Ctrl-Alt-Backspace","Alt-Delete","Cmd-S","Cmd-F","Cmd-G","Shift-Cmd-G","Cmd-Alt-F","Shift-Cmd-Alt-F","Cmd-[","Cmd-]","Cmd-Backspace","Cmd-Delete","Cmd-U","Shift-Cmd-U","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","getField","handled","up","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","_top","onDragStart","inp","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","findPosH","origDir","lineDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","sawType","getHelper","hitSide","findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","screenReaderLabelChanged","label","removeAttribute","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","toIndex","closing","extraLinebreak","close","addText","walk","cmText","markerID","isBlock","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","rtlMoveVisually","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","interpret","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","predicate","addEditorMethods","dontDelegate","contenteditable","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","factory","addHTMLMixedMode","defaultTags","attrRegexpCache","getAttrValue","regexp","getAttrRegexp","getTagRegexp","tagName","anchored","addTags","config","parserConfig","htmlMode","multilineTagIndentFactor","multilineTagIndentPastTag","tags","configTags","configScript","scriptTypes","html","htmlState","inTag","tagInfo","tagText","findMatchingMode","endTagA","endTag","localState","localMode","pat","maybeBackup","local","textAfter","addCSSMode","keySet","inline","propertyKeywords","tokenHooks","documentTypes","mediaTypes","mediaFeatures","mediaValueKeywords","nonStandardPropertyKeywords","fontProperties","counterDescriptors","colorKeywords","valueKeywords","allowNested","lineComment","supportsAtComponent","ret","tp","tokenBase","tokenize","tokenString","tokenParenthesized","quote","escaped","pushContext","popContext","pass","states","popAndPass","wordAsValue","stateArg","_stream","atBlock","_typeof","cx","blockCommentStart","blockCommentEnd","blockCommentContinue","fold","documentTypes_","mediaTypes_","mediaFeatures_","mediaValueKeywords_","propertyKeywords_","nonStandardPropertyKeywords_","colorKeywords_","valueKeywords_","allWords","tokenCComment","maybeEnd","$","addXMLMode","htmlConfig","autoSelfClosers","area","br","command","embed","frame","hr","keygen","link","meta","param","track","wbr","menuitem","implicitlyClosed","dd","li","optgroup","rp","tbody","td","tfoot","tr","contextGrabbers","dt","address","article","aside","blockquote","dl","fieldset","footer","h1","h2","h3","h4","h5","h6","header","hgroup","menu","nav","ol","section","table","ul","thead","doNotIndent","allowUnquoted","allowMissing","caseFold","xmlConfig","allowMissingTagName","editorConf","config_","setStyle","inText","chain","parser","inBlock","doctype","depth","closure","baseState","tagStart","isInAttribute","stringStartCol","terminator","startOfLine","noIndent","maybePopContext","nextTagName","parentTagName","tagNameState","closeTagNameState","attrState","matchClosing","closeState","closeStateErr","attrEqState","attrValueState","attrContinuedState","isInText","baseIndent","fullLine","alignCDATA","tagAfter","grabbers","configuration","skipAttribute","addJavaScriptMode","statementIndent","jsonldMode","jsonld","jsonMode","json","isTS","typescript","wordRE","wordCharacters","keywords","kw","A","B","C","D","operator","atom","if","while","with","else","do","try","finally","return","break","continue","new","delete","void","throw","debugger","var","const","let","function","for","switch","case","default","in","typeof","instanceof","true","false","class","super","yield","export","import","extends","await","isOperatorChar","isJsonldKeyword","cont","tokenComment","expressionAllowed","inSet","readRegexp","tokenQuasi","lexical","lastType","propertyIsEnumerable","findFatArrow","fatArrowAt","arrow","sawSomething","bracket","atomicTypes","number","variable","JSLexical","inScope","varname","localVars","vars","marked","cc","inList","register","block","newContext","registerVarScoped","Var","globalVars","isModifier","defaultVars","pushcontext","pushblockcontext","popcontext","pushlex","lex","poplex","expect","wanted","exp","statement","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","enumdef","typename","typeexpr","expression","maybelabel","maybeCatchBinding","afterExport","afterImport","funarg","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","targetNoComma","maybeTypeArgs","maybeTarget","expr","property","continueQuasi","_","getterSetter","afterprop","maybetype","what","sep","proceed","maybetypeOrIn","mayberettype","isKW","afterType","typeprop","typearg","maybeReturnType","functiondecl","typeparam","maybeTypeDefault","maybeAssign","vardefCont","eltpattern","proppattern","_type","forspec1","forspec2","classNameAfter","classBody","classfield","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","basecolumn","parseJS","firstChar","c","isContinuedStatement","doubleIndentSwitch","closeBrackets","skipExpression","addComment","noOptions","nonWS","useInnerComments","toggleComment","minLine","uncomment","commentString","pad","blankLines","commentBlankLines","baseString","whitespace","fullLines","blockComment","startString","endString","lastLineHasText","lead","blockCommentLead","didSomething","lineString","endPos","startLine","open","endLine","insideStart","insideEnd","lastStart","firstEnd","almostLastStart","foundEnd","addFullscreen","fullScreenRestore","overflow","setFullscreen","setNormal","addJumptoline","interpretLine","num","jumpToLine","shortText","openDialog","selectValueOnOpen","prompt","dialog","getJumpDialog","posStr","addMatchhighlighter","minChars","wordsOnly","annotateScrollbar","showToken","trim","State","timeout","matchesonscroll","matchHighlighter","scheduleHighlight","highlightMatches","query","hasBoundary","re","boundariesAround","makeOverlay","showMatchesOnScrollbar","searchFor","isWord","addSearch","SearchState","posFrom","posTo","lastQuery","getSearchState","queryCaseInsensitive","getSearchCursor","multiline","parseString","parseQuery","isRE","startSearch","queryText","global","ignoreCase","searchOverlay","annotate","doSearch","rev","persistent","immediate","findNext","q","hiding","searchNext","opacity","onEnter","closeOnEnter","onClose","clearSearch","persistentDialog","getQueryDialog","extra","callback","replaceAll","all","dialogText","getReplaceQueryDialog","getReplacementQueryDialog","advance","fs","openConfirm","confirm","confirmDialog","getDoReplaceConfirm","doReplace","findPersistent","findPersistentNext","findPersistentPrev","findPrev","addSearchcursor","doFold","noFold","ensureFlags","flags","regexpFlags","searchRegexpForward","searchRegexpForwardMultiline","maybeMultiline","inside","lastMatchIn","cutOff","newMatch","searchRegexpBackward","searchRegexpBackwardMultiline","adjustPos","orig","folded","foldFunc","searchStringForward","cutFrom","searchStringBackward","topString","SearchCursor","atOccurrence","normalize","findPrevious","addFoldcode","finder","minSize","allowFolded","marks","__isFold","cleared","myWidget","makeWidget","myRange","newFoldFunction","rangeFinder","toggleFold","foldCode","unfold","foldAll","unfoldAll","defaultOptions","auto","minFoldSize","scanUp","editorOptions","foldOptions","addClosebrackets","pairs","closeBefore","triples","explode","conf","ensureBound","getConfig","around","charsAround","linesep","chars","identical","opening","curType","stringStartsAfter","inverted","handleChar","addClosetag","whenClosing","autoCloseCurrent","autoCloseSlash","whenOpening","replacements","tok","dontCloseTags","htmlDontClose","indentTags","htmlIndent","lowerTagName","closingTagExists","emptyTags","newPos","dontIndentOnAutoClose","autoCloseGT","typingSlash","dontIndentOnSlash","replacement","collection","newTag","scanForClosingTag","nextClose","onCx","closeTag","addShowhint","Completion","debounce","tick","startPos","startLen","activityFunc","showHint","getHints","newOpts","editor","hintOptions","parseOptions","selections","supportsSelection","completionActive","requestAnimationFrame","cancelAnimationFrame","getText","getHintElement","hintsElement","el","Widget","picked","parentWindow","defaultView","hints","selectedHint","completions","render","hintId","alignWithWord","below","offsetParentPosition","bodyPosition","winW","innerWidth","winH","overlapY","scrolls","startScroll","closingOnBlur","overlapX","baseMap","moveFocus","menuSize","setFocus","pick","custom","customKeys","ourMap","addBinding","buildKeyMap","avoidWrap","changeActive","screenAmount","closeOnUnfocus","onScroll","curScroll","point","completeOnSingleClick","fetchHints","closeCharacters","disable","myTick","finishUpdate","completeSingle","words","resolved","app","applicableHelpers","run","fromList","anyword","term","autocomplete","addJShint","scriptHint","getToken","tprop","getCompletions","getCoffeeScriptToken","javascriptKeywords","coffeescriptKeywords","stringProps","arrayProps","funcProps","globalScope","maybeAdd","item","arrayContains","gatherCompletions","getOwnPropertyNames","forAllProps","additionalContext","useGlobalScope","jQuery","addFunctionsToCodeMirror","Annotation","scheduleRedraw","doRedraw","redraw","buttonHeight","scrollButtonHeight","annotations","doUpdate","computeScale","resizeHandler","listenForChanges","hScale","anns","singleLineH","curLineObj","getY","nextTop","ann","addAnnotateScrollbar","BACK_CLASS","clearActiveLines","activeLines","updateActiveLines","nonEmpty","sameArray","selectionChange","addActiveLine","dialogDiv","template","innerHTML","closeNotification","newVal","currentNotificationClose","closed","getElementsByTagName","onInput","closeOnBlur","blurring","doneTimer","duration","addDialog","SearchAnnotation","annotateOptions","annotation","findMatches","_cm","onChange","offsetLine","changeStart","sizeChange","maxMatches","newFrom","newTo","updateAfterChange","addMatchesonscroll","tokenType","lineText","findOpening","openCh","startToken","endToken","nextOpen","hasImport","semi","has","hasInclude","addCommentfold","foldGutter","onGutterClick","onViewportChange","onFold","opts","indicatorOpen","indicatorFolded","updateInViewport","isFolded","updateFoldInfo","foldOption","vp","changeUpdate","foldOnChangeTimeSpan","updateViewportTimeSpan","addFoldgutter","lineIndent","spaceTo","myIndent","lastLineInFold","addIndentfold","nameStartChar","xmlTagStart","Iter","tagAt","prevLine","toTagEnd","gt","lastSlash","selfClose","toTagStart","lt","toNextTag","toPrevTag","findMatchingClose","stack","findMatchingOpen","openTag","findMatchingTag","findEnclosingTag","addXmlfold","WORD","curWord","seen","addAnywordhint","typed","matchInMiddle","schemaInfo","quoteChar","prefix","replaceToken","tagType","curTag","childList","attrs","globalAttrs","nm","atValues","atName","addXMLhint","pseudoClasses","visited","hover","lang","addCSSHint","langs","targets","charsets","methods","encs","media","s","ping","hreflang","abbr","acronym","applet","shape","audio","mediagroup","crossorigin","preload","autoplay","controls","basefont","bdi","bdo","big","cite","formaction","formenctype","formmethod","formnovalidate","formtarget","canvas","caption","center","colgroup","icon","radiogroup","checked","datagrid","multiple","datalist","del","datetime","details","dfn","em","eventsource","figcaption","figure","font","action","enctype","novalidate","frameset","manifest","iframe","srcdoc","sandbox","seamless","ismap","usemap","dirname","maxlength","step","accept","readonly","required","ins","kbd","challenge","keytype","legend","charset","meter","low","high","optimum","noframes","noscript","typemustmatch","reversed","progress","ruby","samp","defer","small","strike","strong","scoped","summary","sup","colspan","rowspan","headers","rows","cols","scope","kind","srclang","tt","u","video","poster","muted","accesskey","contextmenu","dropzone","inert","itemid","itemprop","itemref","itemscope","itemtype","translate","onclick","populate","htmlHint","xml","htmlSchema","addHTMLhint","HTMLBuilder","textArea","classList","Editor","activeFile","fileDirty","buildEditor","autoCloseBrackets","autoCloseTags","autoFocus","autoCorrect","lint","matchBrackets","screenReaderLabel","styleActiveLine","F11","setupCodeMirror","setReadOnly","eventType","bool","comparisonEnabled","setState","setActiveDocument","some","isDirty","textURLS","imageURLS","modelsURLS","classifyURL","fetchFiles","urls","serverDirectory","filePromises","serverURL","fetch","responses","response","convertImportsInText","oldStyle","newStyle","convertedText","cdnBuildImport","cdnExampleImport","newBuildURl","newExampleURl","comparisonsEnabled","deletable","dataType","getMimetype","setupText","setServerURL","importStyle","cmDoc","inactiveStateHistory","originalText","workingText","originalStartText","workingStartText","originalFinalText","workingFinalText","final","cursorPos","activeText","Fetcher","startURLS","finalURLS","stripDirectory","textURLs","assetURLs","fetchTextURLs","textFiles","assetFiles","processAssetsURLs","serverURLs","textData","fileData","entries","fileDataPaired","results","paths","folderOpen","folderClosed","js","image","cube","createIcon","svg","createElementNS","path","append","EzTree","parentId","selectedId","parentEl","getElementById","handleInternalSelect","elem","expanded","dataset","innerText","handleType","isArray","folders","icons","openIcon","closedIcon","dontPreventDefault","onSelectCallback","cev","findNode","handleOpen","onInternalSelectCallback","handleSelect","openContainingFolder","_toConsumableArray","getElemByDataID","getContainingFolder","toggleOpen","_this3","currentSelectedEl","unsetSelected","selectedEl","setSelected","itemPath","findPath","traverse","root","grandChild","jpg","png","glb","buildFileTree","fileTypes","closedFolders","directories","folder","currentID","reduce","buildDirectories","FileTree","imagePreview","currentFolder","currentFile","setupCreateFileButton","setupDeleteFileButton","tree","dispose","buildTree","setupOnSelect","onSelectFile","selectNodeByPath","onSelectTextFile","onSelectImage","onSelectModel","setControlsState","onSelect","selectItem","deleteFileButton","defaultText","sanitisedName","validateFileName","sanitiseFileName","alert","createFile","setSelectedFile","deleteFile","Preview","buildPreviewFrame","externalPreviews","setupLogging","previewHider","onLoad","childWindow","crypto","getRandomValues","Uint8Array","createWindow","Reset","resetActiveFileButton","resetAllButton","setupResetActiveButton","setupResetAllButton","resetActiveFile","setButtonStates","resetAllFiles","Controls","downloader","downloadPackage","enabled","selectMenu","selectedIndex","setImportStyle","preview","newWindowPreviewButton","createExternalPreview","setComparisonState","ssr","NOOP","calc","isString","elementOrSelector","ele","propName","def","getGutterSize","gutterSize","isFirst","isLast","gutterAlign","defaultGutterFn","gutterDirection","gut","defaultElementStyleFn","dim","gutSize","defaultGutterStyleFn","Split","idsOption","dimension","clientAxis","positionEnd","clientSize","elements","ids","parentFlexDirection","flexDirection","minSizes","expandToMin","snapOffset","dragInterval","elementStyle","gutterStyle","setElementSize","getSizes","element","getMousePosition","adjust","percentage","drag","dragging","dragOffset","calculateSizes","aBounds","bBounds","trimToMin","sizesToTrim","parentSize","computedStyle","parseFloat","innerSize","excessPixels","toSpare","pixelSizes","pixelSize","elementGutterSize","elementMinSize","newPixelSize","takenPixels","stopDragging","userSelect","webkitUserSelect","MozUserSelect","startDragging","adjustToMin","pair","temp","gutterElement","setGutterSize","computedSize","setSizes","newSizes","trimmed","newSize","destroy","preserveStyles","preserveGutter","Panels","ide","panelElements","panels","createPanels","restoreState","panel","toggleChecked","localStorage","setItem","JSON","stringify","parse","getItem","enable","splits","breakpoint","isOpen","mainPanelIndex","mainPanel","minorPanelIndex","createToggle","selectors","selector","createSplit","updatePreview","setupOnToggle","collapseBelowBreakpoint","_this4","enablePanelAnimation","onDragEnd","saveState","toggleElem","onIcon","labels","offIcon","onToggle","toggleSize","_this5","layout","orientationControls","fullScreen","OrientationControl","stateValues","orientation","setOrientationLock","nextState","getLayout","initPanels","newLayout","fullscreen","isTopPanel","main","createPanelConfig","XMLHttpRequest","responseType","send","status","MouseEvent","createEvent","initMouseEvent","saveAs","HTMLAnchorElement","webkitURL","download","revokeObjectURL","msSaveOrOpenBlob","autoBom","HTMLElement","onloadend","readAsDataURL","u16","u32","UZIP","readAsArrayBuffer","readAs","buf","onlyNames","rUs","bin","readUshort","rUi","readUint","eocd","cnu","csize","coffs","usize","cl","roff","_readLocal","cmpr","nlen","elen","readUTF8","buffer","inflateRaw","F","inflate","byteOffset","deflate","deflateRaw","crc","adler","encode","noCmpr","tot","wUi","writeUint","wUs","writeUshort","zpd","cpr","_noNeed","sizeUTF8","fof","_writeHeader","ioff","writeUTF8","tab","Uint32Array","eend","buff","readASCII","writeASCII","ns","decodeURIComponent","strl","ci","opos","lvl","U","goodIndex","_goodIndex","putsE","_hash","_putsE","cvrd","dlen","_copyExact","lits","strt","lc","bs","ebits","nc","ii","_writeBlock","mch","_bestMatch","dst","lgi","of0","lhst","dgi","df0","dhst","exb","dxb","nice","pi","dif","tl","dlim","_howLong","maxd","ei","curd","oi","BFINAL","o0","l0","T","ML","MD","MH","numl","numd","numh","lset","dset","putsF","_putsF","getTrees","cstSize","fxdSize","contSize","fltree","fdtree","dynSize","ltree","dtree","itree","ihst","BTYPE","makeCodes","revCodes","ordr","_codeTiny","si","qb","_writeLit","qc","p8","_hufTree","_lenCodes","getSecond","nonZero","hst","rst","rsl","nxt","nnxt","prv","lz","zc","MAXL","hl","lit","l2","i0","i1","i2","maxl","setDepth","restrictDepth","dps","bCost","dbt","od","u8","bitsF","_bitsF","bitsE","_bitsE","decodeTiny","_decodeTiny","codes2map","get17","_get17","noBuf","lmap","dmap","HLIT","HDIST","HCLEN","_check","flmap","fdmap","imap","ttree","mx0","_copyOut","mx1","ebs","ldef","dcode","dlit","dbs","ddef","bl","nbuf","LL","ll","ni","mx","MAX_BITS","bits","max_code","bl_count","next_code","r15","rev15","imb","_get25","Uint16Array","pushV","tgt","sv","Downloader","zipFiles","assets","addTextFile","addAssetsToZip","getContentsWithImportStyle","uint","stringToUint8","fetchAssets","prepareFiles","zipped","IDE","siteURL","textTypes","imageTypes","otherTypes","comparisonMode","startFiles","finalFiles","fileTree","urlGenerator","activeDocument","generateSrcURL","setupControls","setupEvents","isFullScreen","refreshCountDown","setEventCallback","resetControls","setupDownloadPackageButton","setupImportStyleSelect","switchImportsAllowed","openPreviewInNewWindow","setupResetButtons","setupStartFinalCodeToggle","setupIDE","ideWrapper","ideControls","showIDE"],"mappings":"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jB,EAANA,IACD,GAAKzO,GAAU,GAOrB0zG,GAAKwB,EAAE8I,OAAS,SAAUpyC,EAAIn9D,UAGzBm9D,EAAGn9D,IAAQ,GACTm9D,EAAiB,GAAbn9D,IAAQ,KAAW,EACvBm9D,EAAiB,GAAbn9D,IAAQ,KAAW,OACnB,EAANA,IAGLilG,GAAKwB,EAAEiL,OAAS,SAAUv0C,EAAIn9D,UAGzBm9D,EAAGn9D,IAAQ,GACTm9D,EAAiB,GAAbn9D,IAAQ,KAAW,EACvBm9D,EAAiB,GAAbn9D,IAAQ,KAAW,GACvBm9D,EAAiB,GAAbn9D,IAAQ,KAAW,OACnB,EAANA,IAGLilG,GAAKwB,EAAEkC,GACD5D,GAAM4M,YACR3M,GAAMgD,YACD,CACLsJ,UAAW,IAAIvM,GAAI,IACnBsM,SAAU,IAAItM,GAAI,IAClB8H,KAAM,CACJ,GACA,GACA,GACA,EACA,EACA,EACA,EACA,EACA,GACA,EACA,GACA,EACA,GACA,EACA,GACA,EACA,GACA,EACA,IAEF7C,IAAK,CACH,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEFK,IAAK,CACH,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAEFkG,KAAM,IAAIxL,GAAI,IACdoF,IAAK,CACH,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MACA,MACA,OAEFG,IAAK,CACH,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA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"}