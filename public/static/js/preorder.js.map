{"version":3,"file":"preorder.js","sources":["../../src/modules/layout/nav.js","../../src/modules/layout/smoothInternalLinks.js","../../src/modules/layout/moveAnchorIntoView.js","../../src/base.js","../../src/apps/preorder/sendowl.js","../../src/apps/preorder/form/handleMessages.js","../../src/apps/preorder/form/handleSuccess.js","../../src/apps/preorder/form/paymentForm.js","../../src/apps/preorder/main.js"],"sourcesContent":["export function setupNav(\r\n  wrapperElem,\r\n  triggers = document.querySelectorAll('.nav-panel-trigger'),\r\n) {\r\n  document.querySelector('main').addEventListener('click', () => {\r\n    triggers.forEach(trigger => {\r\n      trigger.checked = false;\r\n    });\r\n  });\r\n}\r\n","export function smoothInternalLinks() {\r\n  const internalLinks = document.querySelectorAll(\"a[href^='#']\");\r\n\r\n  internalLinks.forEach(link => {\r\n    const id = '#' + link.href.split('#')[1];\r\n\r\n    if (!id.includes('lightbox')) {\r\n      const target = document.querySelector(id);\r\n\r\n      if (target) {\r\n        link.addEventListener('click', e => {\r\n          e.preventDefault();\r\n\r\n          window.scrollTo({\r\n            top: target.offsetTop - 100,\r\n            left: 0,\r\n            behavior: 'smooth',\r\n          });\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n","// if the user arrives on the page via an anchor link, scroll it into view\r\nexport function moveAnchorIntoView() {\r\n  if (window.location.hash.length > 0) {\r\n    const target = document.querySelector(window.location.hash);\r\n\r\n    window.scrollTo({\r\n      top: target.offsetTop - 100,\r\n      left: 0,\r\n      behavior: 'auto',\r\n    });\r\n  }\r\n}\r\n","import { setupNav } from './modules/layout/nav.js';\r\n\r\n// import {setupLightboxes} from './modules/layout/setupLightboxes.js';\r\nimport { smoothInternalLinks } from './modules/layout/smoothInternalLinks.js';\r\nimport { moveAnchorIntoView } from './modules/layout/moveAnchorIntoView.js';\r\n\r\nexport function setup(spec = {}) {\r\n  window.addEventListener('load', () => {\r\n    const header = document.querySelector('#header');\r\n    if (header) {\r\n      header.classList.remove('fade-out');\r\n      header.classList.add('fade-in');\r\n    }\r\n\r\n    moveAnchorIntoView();\r\n    setupNav(spec.navCloseElem, spec.navCloseTriggers);\r\n\r\n    // setupLightboxes();\r\n    smoothInternalLinks();\r\n  });\r\n}\r\n","function setupSendowl() {\r\n  console.log('sendowl');\r\n}\r\n\r\nexport { setupSendowl };\r\n","function handleMessages(message) {\r\n  document.querySelector('#form-messages').textContent = message;\r\n  const loadingOverlay = document.querySelector('.loading-overlay');\r\n  loadingOverlay.style.visibility = 'hidden';\r\n  loadingOverlay.style.opacity = 0;\r\n}\r\n\r\nexport { handleMessages };\r\n","function handleSuccess(result) {\r\n  const loadingOverlay = document.querySelector('.loading-overlay');\r\n  const userStatus = document.querySelector('#user-status');\r\n  const upgradeButton = document.querySelector(\r\n    '#upgrade-account-button',\r\n  );\r\n  const codeInfo = document.querySelector('#code-info');\r\n  const upgradeInstructions = document.querySelector(\r\n    '#upgrade-instructions',\r\n  );\r\n\r\n  loadingOverlay.style.visibility = 'hidden';\r\n  loadingOverlay.style.opacity = 0;\r\n\r\n  if (result.action === 'account_upgraded') {\r\n    userStatus.textContent = result.new_status;\r\n\r\n    upgradeInstructions.textContent =\r\n      'Your account has been upgraded';\r\n\r\n    upgradeButton.textContent = 'Account Successfully Upgraded';\r\n  } else if (result.action === 'code_generated') {\r\n    codeInfo.style.display = 'initial';\r\n    upgradeButton.disabled = false;\r\n    upgradeButton.textContent = 'Actually, Upgrade My Account Now';\r\n  }\r\n}\r\n\r\nexport { handleSuccess };\r\n","import { handleMessages } from './handleMessages';\r\nimport { handleSuccess } from './handleSuccess';\r\n\r\nfunction setupPaymentForm() {\r\n  const form = document.querySelector('#upgrade-account-form');\r\n  if (!form) return;\r\n\r\n  const csrfToken = form.querySelector(\r\n    'input[name=\"csrfmiddlewaretoken\"]',\r\n  ).value;\r\n  const upgradeButton = form.querySelector('#upgrade-account-button');\r\n  const generateCodeButton = form.querySelector(\r\n    '#generate-code-button',\r\n  );\r\n  const codeInfo = document.querySelector('#code-info');\r\n\r\n  const loadingOverlay = document.querySelector('.loading-overlay');\r\n\r\n  upgradeButton.addEventListener('click', async (e) => {\r\n    e.preventDefault();\r\n\r\n    upgradeButton.disabled = true;\r\n    generateCodeButton.disabled = true;\r\n    loadingOverlay.style.visibility = 'initial';\r\n    loadingOverlay.style.opacity = 1;\r\n    codeInfo.style.display = 'none';\r\n\r\n    await submitForm('upgrade_account');\r\n  });\r\n\r\n  generateCodeButton.addEventListener('click', async (e) => {\r\n    e.preventDefault();\r\n\r\n    upgradeButton.disabled = true;\r\n    generateCodeButton.disabled = true;\r\n    loadingOverlay.style.visibility = 'initial';\r\n    loadingOverlay.style.opacity = 1;\r\n\r\n    await submitForm('generate_code');\r\n  });\r\n\r\n  const submitForm = async (action) => {\r\n    const formData = new FormData();\r\n    formData.append('action', action);\r\n    formData.append('csrfmiddlewaretoken', csrfToken);\r\n\r\n    const response = await fetch('/ajax/upgrade_account/', {\r\n      method: 'POST',\r\n      credentials: 'same-origin',\r\n      body: formData,\r\n    });\r\n\r\n    const result = await response.json();\r\n\r\n    if (result.error) handleMessages(result.error);\r\n    else if (result.success === true) handleSuccess(result);\r\n  };\r\n}\r\n\r\nexport { setupPaymentForm };\r\n","import { setup } from '../../base.js';\r\n\r\nimport { setupSendowl } from './sendowl.js';\r\nimport { setupPaymentForm } from './form/paymentForm.js';\r\n\r\nsetup({\r\n  navCloseElem: '#wrapper',\r\n});\r\n\r\nsetupSendowl();\r\nsetupPaymentForm();\r\n"],"names":[],"mappings":"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"}