function v(e){let t={invertedColors:e};localStorage.setItem("colors-theme-state",JSON.stringify(t))}function h(){let e=JSON.parse(localStorage.getItem("colors-theme-state"));return e&&e.invertedColors?e.invertedColors:!1}function d(){let e=document.querySelector("body"),t=document.querySelector("#invert-colors-toggle");if(!t)return;let r=a=>{a===!0?e.classList.add("invert-colors"):e.classList.remove("invert-colors"),v(a)},o=h();r(o),o===!0&&(t.checked=!0),t.addEventListener("change",()=>{t.checked?r(!0):r(!1)})}function u(){let e=document.querySelector(".wrapper"),t=document.querySelector("#left-menu-toggle"),r=document.querySelector("#right-menu-toggle"),o=document.querySelector(".left-menu"),a=document.querySelector(".right-menu");o||t.labels[0].classList.add("hide");function n(i){!o||(i===!0?(t.checked=!0,s(!1),o.classList.add("show"),e.classList.add("fade")):(t.checked=!1,o.classList.remove("show"),e.classList.remove("fade")))}function s(i){i===!0?(r.checked=!0,n(!1),a.classList.add("show"),e.classList.add("fade")):(r.checked=!1,a.classList.remove("show"),e.classList.remove("fade"))}t.addEventListener("click",()=>{n(t.checked)}),r.addEventListener("click",()=>{s(r.checked)}),e.addEventListener("click",()=>{n(!1),s(!1)})}var c,f="loading"in HTMLImageElement.prototype,m="loading"in HTMLIFrameElement.prototype,g="onscroll"in window;function p(e){var t,r,o=[];e.parentNode.tagName.toLowerCase()==="picture"&&((r=(t=e.parentNode).querySelector("source[data-lazy-remove]"))&&t.removeChild(r),o=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),o.push(e),o.forEach(function(a){a.hasAttribute("data-lazy-srcset")&&(a.setAttribute("srcset",a.getAttribute("data-lazy-srcset")),a.removeAttribute("data-lazy-srcset"))}),e.setAttribute("src",e.getAttribute("data-lazy-src")),e.removeAttribute("data-lazy-src")}function y(e){var t=document.createElement("div");for(t.innerHTML=function(a){var n=a.textContent||a.innerHTML,s="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 "+((n.match(/width=['"](\d+)['"]/)||!1)[1]||1)+" "+((n.match(/height=['"](\d+)['"]/)||!1)[1]||1)+"%27%3E%3C/svg%3E";return(/<img/gim.test(n)&&!f||/<iframe/gim.test(n)&&!m)&&g&&(n=c===void 0?n.replace(/(?:\r\n|\r|\n|\t| )src=/g,' lazyload="1" src='):(n=n.replace("<source",'<source srcset="'+s+`" data-lazy-remove="true"></source>
<source`)).replace(/(?:\r\n|\r|\n|\t| )srcset=/g," data-lazy-srcset=").replace(/(?:\r\n|\r|\n|\t| )src=/g,' src="'+s+'" data-lazy-src=')),n}(e);t.firstChild;){var r=t.firstChild;if(g&&c!==void 0&&r.tagName&&((r.tagName.toLowerCase()==="img"||r.tagName.toLowerCase()==="picture")&&!f||r.tagName.toLowerCase()==="iframe"&&!m)){var o=r.tagName.toLowerCase()==="picture"?t.querySelector("img"):r;c.observe(o)}e.parentNode.insertBefore(r,e)}e.parentNode.removeChild(e)}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(c=new IntersectionObserver(function(e,t){e.forEach(function(r){if(r.intersectionRatio!==0){var o=r.target;t.unobserve(o),p(o)}})},{rootMargin:"0px 0px 256px 0px",threshold:.01}));var l=function(){document.querySelectorAll("noscript.loading-lazy").forEach(function(e){return y(e)}),window.matchMedia!==void 0&&window.matchMedia("print").addListener(function(e){e.matches&&document.querySelectorAll('img[loading="lazy"][data-lazy-src],iframe[loading="lazy"][data-lazy-src]').forEach(function(t){p(t)})})};/comp|inter/.test(document.readyState)?l():"addEventListener"in document?document.addEventListener("DOMContentLoaded",function(){l()}):document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&l()});function L(){d(),document.body.classList.remove("loading-page"),u()}export{L as setupChapterEarly};
