<h1 id="how-to-include-threejs-in-your-projects">How to Include three.js in Your Projects</h1>
<p>There are several ways to include three.js in your JavaScript application, some simple, some a little more complex, but they all boil down to this: you need to include the three.js core in your project, which you can find in this file on the three.js repo:</p>
<ul>
<li><a href="https://github.com/mrdoob/three.js/tree/master/build" target="_blank" rel="noopener noreferrer"><em><strong>three.module.js</strong></em></a></li>
</ul>
<p>In addition to the core file, we&rsquo;ll often add <a href="/book/introduction/github-repo/#examples-folder">plugins</a> such as <a href="/book/first-steps/camera-controls/">camera controls</a> or post-processing. You can find plugins in the <a href="https://github.com/mrdoob/three.js/tree/master/examples/jsm/" target="_blank" rel="noopener noreferrer"><em><strong>examples/jsm</strong></em></a> folder on the repo, and including them works in much the same way as for the core file. For the rest of this chapter, we&rsquo;ll use the <code>OrbitControls</code> plugin (a popular camera controls plugin) for demonstration, which you can find on the repo here:</p>
<ul>
<li><a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/controls/OrbitControls.js" target="_blank" rel="noopener noreferrer"><em><strong>examples/jsm/controls/OrbitControls.js</strong></em></a></li>
</ul>
<p>Open up the editor on this page by clicking the {% include 'partials/icons/solid/columns.svg' %} icon, and you&rsquo;ll see that we have included these two files inside the <em><strong>vendor/</strong></em> folder:</p>
<ul>
<li>The core is in <em><strong>vendor/three/build/three.module.js</strong></em></li>
<li><code>OrbitControls</code> is in <em><strong>vendor/three/examples/jsm/controls/OrbitControls.js</strong></em>.</li>
</ul>
<p>We have also set up a very simple web page consisting of these three files:</p>
<ul>
<li><em><strong>index.html</strong></em></li>
<li><em><strong>src/main.js</strong></em></li>
<li><em><strong>styles/main.css</strong></em></li>
</ul>
<p>Check out <em><strong>index.html</strong></em> now, and you&rsquo;ll see that we have referenced <em><strong>main.js</strong></em> in the <code>&lt;head&gt;</code> section:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>index.html</strong></em>: referencing the main JavaScript file</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="14"
    data-line=""
    data-line-offset="14"
    >
    <code class="highlight language-js match-braces">

&lt;script type=&#34;module&#34; src=&#34;./src/main.js&#34;&gt;&lt;/script&gt;

</code>
  </pre>
</section>

<p>Take special notice of <code>type=&quot;module&quot;</code>, which we&rsquo;re using to tell the browser the linked file is a JavaScript module. If anything in <em><strong>index.html</strong></em> is unfamiliar to you, check out <a href="/book/appendix/html-and-css-reference/">A.1: HTML and CSS Used in This Book</a>. If using JavaScript modules is new to you, or you need a refresher, check out <a href="/book/appendix/javascript-modules/">A.4: JavaScript Modules</a>.</p>
<h2 id="importing-threejs-modules">Importing three.js Modules</h2>
<p>The core and <code>OrbitControls</code> plugins are JavaScript modules. To use them, first, we need to <em>import</em> them into <em><strong>main.js</strong></em>, so open up that file now. Over the rest of this chapter, we&rsquo;ll demonstrate various ways to import <em><strong>three.module.js</strong></em> and <em><strong>OrbitControls.js</strong></em> here.</p>
<h3 id="importing-the-threejs-core">Importing the three.js Core</h3>
<p>The three.js core contains hundreds of classes such as cameras, materials, geometries, textures, lights, shadows, the animation system, various loaders, audio, the renderer, 2D shapes, helpers, fog, and so on. We&rsquo;ll never need to use all of them at once, and in fact, it&rsquo;s almost certain you&rsquo;ll never need to use all of them across an entire application, no matter how big it is. So, for this chapter, let&rsquo;s assume we want to import just three classes from <em><strong>three.module.js</strong></em>: the <a href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera" target="_blank" rel="noopener noreferrer"><code>PerspectiveCamera</code></a>, the <a href="https://threejs.org/docs/#api/en/materials/MeshStandardMaterial" target="_blank" rel="noopener noreferrer"><code>MeshStandardMaterial</code></a>, and the <a href="https://threejs.org/docs/#api/en/renderers/WebGLRenderer" target="_blank" rel="noopener noreferrer"><code>WebGLRenderer</code></a>.</p>
<h4 id="import-the-entire-threejs-core">Import the Entire three.js Core</h4>
<p>The simplest approach is to <a href="/book/appendix/javascript-modules/#using-namespaces-with-named-imports">import <em>everything</em></a> from the three.js core into <em><strong>main.js</strong></em> under the <code>THREE</code> namespace:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: import the entire three.js core</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import * as THREE from &#39;./vendor/three/build/three.module.js&#39;;
</code>
  </pre>
</section>

<p>Then we can use any element of the core by referencing them under the <code>THREE</code> namespace:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: accessing classes from the core under the <code>THREE</code> namespace</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

THREE.PerspectiveCamera
THREE.MeshStandardMaterial
THREE.Texture
// ... and hundreds more

</code>
  </pre>
</section>

<h4 id="import-individual-components-from-the-core">Import Individual Components from the Core</h4>
<p>However, in this book we&rsquo;ll prefer to import only the classes that we need in any given module:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: importing class as we need them</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

import {
  PerspectiveCamera,
  MeshStandardMaterial,
  WebGLRenderer,
} from &#39;./vendor/three/build/three.module.js&#39;;

</code>
  </pre>
</section>

<p>Now instead of hundreds of properties being imported, there are only the three that we need:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: accessing individually imported classes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

PerspectiveCamera
MeshStandardMaterial
WebGLRenderer

</code>
  </pre>
</section>

<p>Doing this forces us to think more carefully about the classes we&rsquo;re using in a given module, which means we&rsquo;re more likely to follow best practices and keep our modules small and focused. We can also avoid using the <code>THREE</code> namespace this way.</p>
<h3 id="importing-plugins">Importing Plugins</h3>
<p>The <em><strong>OrbitControls.js</strong></em> module contains a single export, the <code>OrbitControls</code> class. Importing this works the same way as importing classes from the core:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: import <code>OrbitControls</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

import { OrbitControls } from &#39;./vendor/three/examples/jsm/controls/OrbitControls.js&#39;;

</code>
  </pre>
</section>

<p>Now the <code>OrbitControls</code> class is available within <em><strong>main.js</strong></em>. With both the core files and a camera controls plugin, we are ready to start building our app.</p>
<h2 id="how-to-obtain-the-threejs-files">How to Obtain the three.js Files</h2>
<p>Not so fast! How do we get our hands on the files in the first place? In the editor, we have already got the files for you, but if you&rsquo;re working locally, you&rsquo;ll have to handle that yourself. Here are three common approaches.</p>
<h3 id="download-files">1: Download Them All!</h3>
<p>The easiest method is to download the entire three.js Github repo onto your computer. Here&rsquo;s the <a href="https://github.com/mrdoob/three.js/archive/master.zip" target="_blank" rel="noopener noreferrer">latest release of three.js as a zip file</a>. Download it and look inside the <em><strong>build/</strong></em> and <em><strong>examples/jsm/</strong></em> folders and you&rsquo;ll find the necessary files. Extract everything from the zip file into <em><strong>vendor/</strong></em> and proceed as described above.</p>
<p>If you&rsquo;re new to web development, you&rsquo;ll probably find this method the easiest. You can graduate to a more sophisticated approach later.</p>
<h3 id="use-a-cdn">2: Link to the files from a CDN</h3>
<p>A second approach is to link the files from a CDN (Content Delivery Network), which is a remote site dedicated to hosting files so you can use them in a web page without downloading them first. There are lots of CDNs around, and we&rsquo;ll use <a href="https://unpkg.com/browse/three@0.119.0/" target="_blank" rel="noopener noreferrer">unpkg.com</a> to demonstrate. You can find the core <em><strong>three.module.js</strong></em> file here:</p>
<ul>
<li><a href="https://unpkg.com/three@0.119.0/build/three.module.js">https://unpkg.com/three@0.119.0/build/three.module.js</a></li>
</ul>
<p>Notice that the folder structure once again matches the repo, so you can find <em><strong>OrbitControls.js</strong></em> here:</p>
<ul>
<li><a href="https://unpkg.com/three@0.119.0/examples/jsm/controls/OrbitControls.js">https://unpkg.com/three@0.119.0/examples/jsm/controls/OrbitControls.js</a></li>
</ul>
<p>To find a file from the repo, take the URL from GitHub (such as <em><strong>examples/jsm/controls/OrbitControls.js</strong></em>) and prepend <em><strong>https://unpkg.com/three@0.{version}.0</strong></em>, where <em>{version}</em> is the current release of three.js.</p>
<p>At the time of writing, the latest version is r119, but by the time you read this, it will probably be higher, as a new version is released every month. It&rsquo;s not necessary to always use the latest version, however, it <em>is necessary</em> to use the same version for the main build file <em>and</em> any extensions you use.</p>
<p>Importing the files from a CDN works the same way as importing them from your local file system, except that now we are loading the files from unpkg.com instead of from our hard drive:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: importing three.js files from a CDN</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

import {
  Camera,
  Material,
  Texture,
} from &#39;https://unpkg.com/three@0.119.0/build/three.module.js&#39;

import { OrbitControls } from &#39;https://unpkg.com/three@0.119.0/examples/jsm/controls/OrbitControls.js&#39;

</code>
  </pre>
</section>

<h3 id="package-manager">3: Install three.js as an NPM package</h3>
<p><em>Note: This section assumes that you have a basic understanding of how JavaScript package management works. If you don&rsquo;t, get the files using another method for now.</em></p>
<p>three.js is also available as a <a href="https://www.npmjs.com/package/three" target="_blank" rel="noopener noreferrer">package on NPM</a>. If you have <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a> and <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">NPM</a> (Node Package Manager) installed on your computer, you can open a command prompt and enter the following commands:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>Command prompt</strong></em>: install the <em>three</em> npm package</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// set up a project
npm init

// once the project is set up, install the three npm package
npm install --save three
</code>
  </pre>
</section>

<p>Once again, importing the files works the same way, except that now we can replace the big ugly CDN URL with the name of the package, in this case, <em>three</em>:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: importing class from the three.js core using the NPM package</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import {
  Camera,
  Material,
  Texture,
} from &#39;three&#39;;
</code>
  </pre>
</section>

<p>When you do this, your bundler will automatically resolve <code>three</code> to the main export of the package, in this case <code>three/build/three.module.js</code>. You can also import this file directly, there&rsquo;s no difference:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: directly referencing the core file from the <em>three</em> package</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import {
  Camera,
  Material,
  Texture,
} from &#39;three/build/three.module.js&#39;;
</code>
  </pre>
</section>

<p>Importing plugins is not quite so convenient as an NPM package can only have one main file. To import <code>OrbitControls</code>, we need to reference the containing module directly:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: importing three.js plugins using the NPM package</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls.js&#39;;
</code>
  </pre>
</section>

<p>There are many bundlers available, such as Rollup, Webpack, ESBuild, and Parcel, and setting these up is beyond the scope of this book. However, they all resolve modules in the same way so you can write this code and then bundle it using whichever one you like.</p>
<h2 id="import-style-used-in-this-book">Import Style Used in this Book</h2>
<p>In the examples throughout this book, we&rsquo;ll use NPM style imports since these are both the shortest way of writing the import statements, and the style you are most likely to encounter in a professional setting.</p>
<p>In most chapters, in the editor, you can switch between NPM and CDN imports (using <em><strong>unpkg.com</strong></em>). However, if you download the code from the editor, the downloaded code will use CDN imports. This means you can use the downloaded code immediately on your local computer without the trouble of setting up a bundler or installing NPM packages. You will, however, need to <a href="/book/introduction/about-the-book/#code-examples">set up a local development server</a>.</p>
